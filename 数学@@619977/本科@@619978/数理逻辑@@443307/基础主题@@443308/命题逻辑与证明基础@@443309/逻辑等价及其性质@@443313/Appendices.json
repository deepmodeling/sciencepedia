{"hands_on_practices": [{"introduction": "逻辑等价是逻辑推理的基石，它保证了在不改变命题真值的情况下进行公式替换。检验两个公式 $\\varphi$ 和 $\\psi$ 是否逻辑等价，最根本的方法是验证双条件句 $\\varphi \\leftrightarrow \\psi$ 是否为重言式（即在所有解释下都为真）。本练习 [@problem_id:3046361] 旨在通过构造具体的赋值来展示两个公式不是逻辑等价的，即找到一个反例使得它们的双条件句不为真，这有助于加深对逻辑等价严格定义的理解。", "problem": "在经典命题逻辑中，两个公式 $\\,\\varphi\\,$ 和 $\\,\\psi\\,$ 是逻辑等价的，当且仅当双条件句 $\\,\\varphi \\leftrightarrow \\psi\\,$ 是有效的，即在每个命题赋值下都为真。选择所有给出公式对 $\\,(\\varphi,\\psi)\\,$ 的选项，使得 $\\,\\varphi \\leftrightarrow \\psi\\,$ 是可满足的但不是有效的，从而表明 $\\,\\varphi\\,$ 和 $\\,\\psi\\,$ 不是逻辑等价的。\n\nA. $(\\,p,\\; p \\lor q\\,)$\n\nB. $(\\,p \\lor q,\\; q \\lor p\\,)$\n\nC. $(\\,p,\\; \\lnot p\\,)$\n\nD. $(\\,p \\land q,\\; p\\,)$\n\nE. $(\\,p \\lor \\lnot p,\\; q \\to p\\,)$", "solution": "对问题陈述进行验证。\n\n**步骤 1：提取已知条件**\n- 研究领域：经典命题逻辑。\n- 定义：两个公式 $\\varphi$ 和 $\\psi$ 是逻辑等价的，当且仅当双条件句 $\\varphi \\leftrightarrow \\psi$ 是有效的。\n- 定义：一个公式是有效的，如果它在每个命题赋值下都为真。\n- 任务：选择所有提供公式对 $(\\varphi, \\psi)$ 的选项，使得 $\\varphi \\leftrightarrow \\psi$ 是可满足的但不是有效的。\n\n**步骤 2：使用提取的已知条件进行验证**\n- **科学依据**：该问题是在经典命题逻辑的标准框架内提出的。逻辑等价、有效性和可满足性的定义都是该领域的标准和基础。\n- **适定性**：该问题是适定的。“可满足但非有效”是一个精确的逻辑属性。对于任何给定的公式对 $(\\varphi, \\psi)$，双条件句 $\\varphi \\leftrightarrow \\psi$ 在所有可能赋值下的真值都可以系统地确定（例如，通过真值表）。这允许唯一且可验证地确定哪些选项满足所述标准。\n- **客观性**：该问题以形式化、客观的语言陈述，没有歧义或主观因素。\n\n**步骤 3：结论与行动**\n问题陈述是有效的，因为它是科学上合理的、适定的、客观的且自洽的。可以开始求解过程。\n\n**求解推导**\n问题要求我们从给定选项中找出所有公式对 $(\\varphi, \\psi)$，使得双条件句公式 $\\varphi \\leftrightarrow \\psi$ 是可满足的但不是有效的。\n\n设命题赋值为一个函数 $v$，它为每个命题变量賦予一个真值，真 ($T$) 或假 ($F$)。\n\n一个公式 $\\chi$ 是 **可满足的**，如果存在至少一个赋值 $v$ 使得 $v(\\chi) = T$。\n对于双条件句 $\\varphi \\leftrightarrow \\psi$ 来说，这意味着存在至少一个赋值 $v$，使得 $v(\\varphi)$ 和 $v(\\psi)$ 具有相同的真值，即 $v(\\varphi) = v(\\psi)$。\n\n一个公式 $\\chi$ 是 **有效的** (重言式)，如果对于每一个赋值 $v$，都有 $v(\\chi) = T$。\n$\\varphi \\leftrightarrow \\psi$ **不是有效的** 这一条件意味着存在至少一个赋值 $v'$ 使得 $v'(\\varphi \\leftrightarrow \\psi) = F$。这种情况发生在 $v'(\\varphi)$ 和 $v'(\\psi)$ 具有不同真值时，即 $v'(\\varphi) \\neq v'(\\psi)$。\n\n总而言之，我们正在寻找这样的公式对 $(\\varphi, \\psi)$：它们不是逻辑等价的（因为它们的双条件句不是有效的），但至少在一种情况下它们共享相同的真值（使得它们的双条件句是可满足的）。\n\n我们现在将使用真值表分析每个选项。\n\n**A. $(\\varphi,\\; \\psi) = (p,\\; p \\lor q)$**\n我们检验公式 $\\varphi \\leftrightarrow \\psi$，即 $p \\leftrightarrow (p \\lor q)$。\n真值表如下：\n| $v(p)$ | $v(q)$ | $v(\\varphi) = v(p)$ | $v(\\psi) = v(p \\lor q)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $T$ | $T$ | $T$ |\n| $F$ | $T$ | $F$ | $T$ | $F$ |\n| $F$ | $F$ | $F$ | $F$ | $T$ |\n\n公式 $p \\leftrightarrow (p \\lor q)$ 在赋值 $(v_1(p)=T, v_1(q)=T)$、$(v_2(p)=T, v_2(q)=F)$ 和 $(v_3(p)=F, v_3(q)=F)$ 下为真。由于它可以为真，所以它是 **可满足的**。\n该公式在赋值 $(v_4(p)=F, v_4(q)=T)$ 下为假。由于它可以为假，所以它 **不是有效的**。\n此选项满足两个条件。\n**结论：正确。**\n\n**B. $(\\varphi,\\; \\psi) = (p \\lor q,\\; q \\lor p)$**\n我们检验公式 $(p \\lor q) \\leftrightarrow (q \\lor p)$。这与析取的交换律有关。\n| $v(p)$ | $v(q)$ | $v(\\varphi) = v(p \\lor q)$ | $v(\\psi) = v(q \\lor p)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $T$ | $T$ | $T$ |\n| $F$ | $T$ | $T$ | $T$ | $T$ |\n| $F$ | $F$ | $F$ | $F$ | $T$ |\n\n公式 $(p \\lor q) \\leftrightarrow (q \\lor p)$ 对所有可能的赋值都为真。因此，它是 **可满足的** 且 **有效的**。\n此选项不满足“不是有效的”这一条件。这两个公式是逻辑等价的。\n**结论：错误。**\n\n**C. $(\\varphi,\\; \\psi) = (p,\\; \\lnot p)$**\n我们检验公式 $p \\leftrightarrow \\lnot p$。\n| $v(p)$ | $v(\\varphi) = v(p)$ | $v(\\psi) = v(\\lnot p)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|\n| $T$ | $T$ | $F$ | $F$ |\n| $F$ | $F$ | $T$ | $F$ |\n\n公式 $p \\leftrightarrow \\lnot p$ 对所有可能的赋值都为假。一个恒为假的公式是一个矛盾式。因此，它 **不是可满足的**。\n此选项不满足“可满足的”这一条件。\n**结论：错误。**\n\n**D. $(\\varphi,\\; \\psi) = (p \\land q,\\; p)$**\n我们检验公式 $(p \\land q) \\leftrightarrow p$。\n| $v(p)$ | $v(q)$ | $v(\\varphi) = v(p \\land q)$ | $v(\\psi) = v(p)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $F$ | $T$ | $F$ |\n| $F$ | $T$ | $F$ | $F$ | $T$ |\n| $F$ | $F$ | $F$ | $F$ | $T$ |\n\n公式 $(p \\land q) \\leftrightarrow p$ 在赋值 $(v_1(p)=T, v_1(q)=T)$、$(v_2(p)=F, v_2(q)=T)$ 和 $(v_3(p)=F, v_3(q)=F)$ 下为真。由于它可以为真，所以它是 **可满足的**。\n该公式在赋值 $(v_4(p)=T, v_4(q)=F)$ 下为假。由于它可以为假，所以它 **不是有效的**。\n此选项满足两个条件。\n**结论：正确。**\n\n**E. $(\\varphi,\\; \\psi) = (p \\lor \\lnot p,\\; q \\to p)$**\n公式 $\\varphi = p \\lor \\lnot p$ 是一个重言式；它在每个赋值下都为真。\n我们检验公式 $(p \\lor \\lnot p) \\leftrightarrow (q \\to p)$。\n由于 $v(p \\lor \\lnot p)$ 恒为 $T$，该双条件句的真值与 $q \\to p$ 的真值相同。所以我们需要确定 $q \\to p$ 是否是可满足的但不是有效的。\n| $v(p)$ | $v(q)$ | $v(\\psi) = v(q \\to p)$ | $v(\\varphi \\leftrightarrow \\psi)=v(T \\leftrightarrow (q \\to p))$ |\n|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $T$ | $T$ |\n| $F$ | $T$ | $F$ | $F$ |\n| $F$ | $F$ | $T$ | $T$ |\n\n双条件句的最终真值列是 $(T, T, F, T)$。\n该公式在多个赋值下为真，所以它是 **可满足的**。\n当 $v(p)=F$ 且 $v(q)=T$ 时，该公式为假，所以它 **不是有效的**。\n此选项满足两个条件。\n**结论：正确。**\n\n总而言之，选项 A、D 和 E 提供了双条件句是可满足但非有效的公式对。", "answer": "$$\\boxed{ADE}$$", "id": "3046361"}, {"introduction": "在逻辑学的应用中，尤其是在自动推理和可满足性问题中，我们有时并不需要像逻辑等价那样强的关系。一个更宽松但同样重要的概念是“等可满足性”（equisatisfiability）。本练习 [@problem_id:3046387] 引导我们辨析逻辑等价与等可满足性之间的关键区别：前者要求在所有解释下真值相同，而后者仅要求两个公式同时可满足或同时不可满足。理解这一区别对于掌握高级逻辑变换技术至关重要。", "problem": "在经典命题逻辑中，一个解释 (interpretation) 是一个函数，它为每个命题变量（如 $p$、$q$ 和 $r$）赋予一个在 $\\{\\mathsf{T}, \\mathsf{F}\\}$ 中的真值。对于一个公式 $\\varphi$，我们用 $I \\models \\varphi$ 表示解释 $I$ 在 $\\neg$、$\\land$、$\\lor$、$\\to$ 和 $\\leftrightarrow$ 的常规语义下使 $\\varphi$ 为真。如果存在一个解释 $I$ 使得 $I \\models \\varphi$，则称公式 $\\varphi$ 是可满足的 (satisfiable)。如果对于每一个解释 $I$，都有 $I \\models \\varphi$ 当且仅当 $I \\models \\psi$，则称两个公式 $\\varphi$ 和 $\\psi$ 是逻辑等价的 (logically equivalent)，记作 $\\varphi \\equiv \\psi$。如果 $\\varphi$ 是可满足的当且仅当 $\\psi$ 是可满足的，则称两个公式 $\\varphi$ 和 $\\psi$ 是等可满足的 (equisatisfiable)；请注意，等可满足性不要求 $\\varphi$ 和 $\\psi$ 共享相同的满足解释集，甚至不要求它们共享相同的命题变量集。\n\n下列哪对公式是等可满足的但非逻辑等价的？选择所有适用的选项。\n\nA. $p$ 和 $p \\lor q$\n\nB. $p \\land q$ 和 $(p \\land q) \\land r$\n\nC. $p \\leftrightarrow q$ 和 $(p \\land q) \\lor (\\neg p \\land \\neg q)$\n\nD. $\\neg(p \\lor q)$ 和 $\\neg p \\land \\neg q$\n\nE. $p \\lor \\neg p$ 和 $q$\n\nF. $p \\land \\neg p$ 和 $q \\land \\neg q$", "solution": "我们需要找到满足以下条件的公式对 $(\\varphi, \\psi)$：\n1. $\\varphi$ 是可满足的当且仅当 $\\psi$ 是可满足的。（等可满足性）\n2. 存在一个解释 $I$，使得 $\\varphi$ 和 $\\psi$ 的真值不同。（非逻辑等价）\n\n我们来逐一分析每个选项：\n\n**A. $p$ 和 $p \\lor q$**\n*   **可满足性**：$p$ 是可满足的（例如，$I(p)=\\mathsf{T}$）。$p \\lor q$ 也是可满足的（例如，$I(p)=\\mathsf{T}, I(q)=\\mathsf{F}$）。因此它们是等可满足的（两者都可满足）。\n*   **逻辑等价性**：它们不是逻辑等价的。考虑解释 $I$，$I(p)=\\mathsf{F}$ 且 $I(q)=\\mathsf{T}$。在此解释下，$p$ 为假，但 $p \\lor q$ 为真。\n*   **结论**：这对公式是等可满足的但非逻辑等价的。因此，A 是一个正确答案。\n\n**B. $p \\land q$ 和 $(p \\land q) \\land r$**\n*   **可满足性**：$p \\land q$ 是可满足的（例如，$I(p)=\\mathsf{T}, I(q)=\\mathsf{T}$）。$(p \\land q) \\land r$ 也是可满足的（例如，$I(p)=\\mathsf{T}, I(q)=\\mathsf{T}, I(r)=\\mathsf{T}$）。因此它们是等可满足的。\n*   **逻辑等价性**：它们不是逻辑等价的，因为它们甚至没有相同的命题变量集。举一个更正式的反例，考虑解释 $I$，$I(p)=\\mathsf{T}$，$I(q)=\\mathsf{T}$ 且 $I(r)=\\mathsf{F}$。在此解释下，$p \\land q$ 为真，但 $(p \\land q) \\land r$ 为假。\n*   **结论**：这对公式是等可满足的但非逻辑等价的。因此，B 是一个正确答案。\n\n**C. $p \\leftrightarrow q$ 和 $(p \\land q) \\lor (\\neg p \\land \\neg q)$**\n*   这两个公式是逻辑等价的。第二个公式是用 $\\land$、$\\lor$ 和 $\\neg$ 定义双条件句。由于它们是逻辑等价的，所以它们不可能是“非逻辑等价的”。\n*   **结论**：C 不是一个正确答案。\n\n**D. $\\neg(p \\lor q)$ 和 $\\neg p \\land \\neg q$**\n*   根据德摩根定律之一，这两个公式是逻辑等价的。由于它们是逻辑等价的，所以这个选项不正确。\n*   **结论**：D 不是一个正确答案。\n\n**E. $p \\lor \\neg p$ 和 $q$**\n*   **可满足性**：公式 $p \\lor \\neg p$ 是一个永真式（重言式），意味着它在任何解释下都为真。因此，它是可满足的。公式 $q$ 也是可满足的（例如，$I(q)=\\mathsf{T}$）。所以它们是等可满足的。\n*   **逻辑等价性**：它们不是逻辑等价的。考虑一个解释 $I(q)=\\mathsf{F}$。在此解释下，$q$ 为假，而 $p \\lor \\neg p$ 为真。\n*   **结论**：这对公式是等可满足的但非逻辑等价的。因此，E 是一个正确答案。\n\n**F. $p \\land \\neg p$ 和 $q \\land \\neg q$**\n*   **可满足性**：$p \\land \\neg p$ 和 $q \\land \\neg q$ 都是矛盾式。它们在任何解释下都为假。因此，两者都不可满足。它们是等可满足的（两者都不可满足）。\n*   **逻辑等价性**：任何两个矛盾式都是逻辑等价的。这是因为对于任何解释 $I$，两个公式的求值结果都为 $\\mathsf{F}$，因此 $I \\models \\varphi$ 当且仅当 $I \\models \\psi$ 总是成立的（因为“当且仅当”两侧都为假）。由于它们是逻辑等价的，所以这个选项不正确。\n*   **结论**：F 不是一个正确答案。\n\n总结：等可满足但非逻辑等价的公式对是 A、B 和 E。", "answer": "$$\\boxed{ABE}$$", "id": "3046387"}, {"introduction": "将任意命题公式转换为合取范式（CNF）是许多自动推理算法（如SAT求解器）的关键预处理步骤。然而，直接使用逻辑等价规则（如分配律）进行转换可能导致公式大小的指数级爆炸。本练习 [@problem_id:3046374] 介绍了一种更为高效的解决方案——Tseitin变换，它通过引入辅助变量，在保持“等可满足性”的前提下，将任意公式线性地转换为CNF。这个实践展示了理论概念（如等可满足性）如何在解决实际计算挑战中发挥核心作用。", "problem": "设 $\\varphi$ 是一个建立在有限命题原子集上的命题公式。目标是设计一个流水线，将 $\\varphi$ 转换为合取范式（Conjunctive Normal Form, CNF）公式，使其适合作为布尔可满足性问题（Boolean Satisfiability Problem, SAT）求解器的输入，同时避免大小的指数级爆炸。如果对于原始原子的每一个赋值 $\\nu$，都满足以下条件，则该流水线被认为是保守扩展意义下的等价保持：\n$$\n\\nu \\vDash \\varphi \\quad \\text{if and only if} \\quad \\exists \\hat{\\nu}\\,(\\hat{\\nu} \\text{ extends } \\nu \\text{ and } \\hat{\\nu} \\vDash \\Phi),\n$$\n其中 $\\Phi$ 是流水线输出的 CNF，$\\hat{\\nu}$ 是对原始原子和流水线引入的任何新原子的赋值。此外，该流水线必须确保 $\\Phi$ 的大小以 $O(n)$ 为界，其中 $n$ 是以符号数量衡量的 $\\varphi$ 的大小。\n\n任何正确的流水线或论证都必须隐含地使用以下基础知识：$\\neg$、$\\land$、$\\lor$、$\\rightarrow$ 和 $\\leftrightarrow$ 的真值函数语义；逻辑等价在所有赋值下真值相等的定义；命题逻辑的代数定律，包括 $\\rightarrow$ 和 $\\leftrightarrow$ 的消除、De Morgan 定律、结合律、交换律和分配律；以及合取范式作为文字析取式的合取的定义。\n\n选择正确指定了这样一种流水线的选项。每个选项描述了一系列的转换及其声称的属性。\n\nA. 在 $\\varphi$ 中消除 $\\rightarrow$ 和 $\\leftrightarrow$；通过 De Morgan 定律将 $\\neg$ 内推以获得否定范式；重复地将 $\\lor$ 分配到 $\\land$ 上直到获得 CNF。该流水线声称精确地保持逻辑等价（没有新原子），并且输出大小至多为 $O(n)$。\n\nB. 为 $\\varphi$ 构建一个解析树。为 $\\varphi$ 的每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$。对每个节点，添加 CNF 子句来强制实施 $v_{\\psi} \\leftrightarrow \\operatorname{op}(v_{\\psi_1},\\dots,v_{\\psi_k})$，其中 $\\operatorname{op}$ 是该节点对应的连接词，而 $v_{\\psi_i}$ 是其直接子公式的新原子。例如，对于合取式 $\\psi = \\alpha \\land \\beta$，添加 3 个子句 $(\\neg v_{\\psi} \\lor v_{\\alpha})$、$(\\neg v_{\\psi} \\lor v_{\\beta})$ 和 $(\\neg v_{\\alpha} \\lor \\neg v_{\\beta} \\lor v_{\\psi})$；对于析取式 $\\psi = \\alpha \\lor \\beta$，添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$、$(\\neg v_{\\beta} \\lor v_{\\psi})$ 和 $(\\neg v_{\\psi} \\lor v_{\\alpha} \\lor v_{\\beta})$；对于否定式 $\\psi = \\neg \\alpha$，添加 $(\\neg v_{\\psi} \\lor \\neg v_{\\alpha})$ 和 $(v_{\\psi} \\lor v_{\\alpha})$。将所有这些子句进行合取，并最终合取单元子句 $v_{\\varphi}$。该流水线声称是一个在原始原子上保持等价的保守扩展（如上所述），并产生一个大小为 $O(n)$ 的 CNF。\n\nC. 如选项 B，为每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$，但对于每个连接词，只编码从新原子到其组成部分的正向蕴含，例如对于 $\\psi = \\alpha \\land \\beta$ 只添加 $(\\neg v_{\\psi} \\lor v_{\\alpha})$ 和 $(\\neg v_{\\psi} \\lor v_{\\beta})$，而对于 $\\psi = \\alpha \\lor \\beta$ 只添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$ 和 $(\\neg v_{\\beta} \\lor v_{\\psi})$。最后通过合取 $v_{\\varphi}$ 来结束。该流水线声称是保守扩展意义下的等价保持，并且大小是线性的。\n\nD. 如选项 B，为每个子公式引入新原子和双向蕴含约束，但在末尾省略合取 $v_{\\varphi}$。只返回所有定义性子句的合取。该流水线声称是保守扩展意义下的等价保持，并且大小是线性的。\n\nE. 首先通过将 $\\land$ 分配到 $\\lor$ 上将 $\\varphi$ 转换为析取范式，然后应用一个子句学习解析方案来派生一个与 $\\varphi$ 逻辑等价且通过重用派生子句而大小为线性的 CNF。该流水线声称保持等价性并避免大小爆炸。\n\n哪个选项满足所述要求？", "solution": "用户要求对问题陈述进行严格验证，然后提供详细的解决方案和选项评估，以将命题公式 $\\varphi$ 转换为一个等可满足的合取范式（CNF）公式 $\\Phi$，且 $\\Phi$ 的大小与 $\\varphi$ 的大小呈线性关系。\n\n**问题验证**\n\n**步骤1：提取已知条件**\n-   设 $\\varphi$ 是一个建立在有限命题原子集上的命题公式。\n-   目标：将 $\\varphi$ 转换为一个 CNF 公式 $\\Phi$。\n-   要求1（等价性）：转换必须是“保守扩展意义下的等价保持”，定义为：对于原始原子的每一个赋值 $\\nu$，$\\nu \\vDash \\varphi$ 当且仅当存在一个扩展 $\\nu$ 的赋值 $\\hat{\\nu}$ 满足 $\\Phi$（即 $\\hat{\\nu} \\vDash \\Phi$）。\n-   要求2（大小）：$\\Phi$ 的大小必须以 $O(n)$ 为界，其中 $n$ 是 $\\varphi$ 的大小。\n-   隐式知识库：命题连接词（$\\neg$、$\\land$、$\\lor$、$\\rightarrow$、$\\leftrightarrow$）的语义，逻辑等价，逻辑的代数定律（例如 De Morgan 定律、分配律），以及 CNF 的定义。\n\n**步骤2：使用提取的已知条件进行验证**\n-   **科学依据：** 该问题是计算逻辑和理论计算机科学中的一个标准基础课题。将命题公式转换为CNF是现代SAT求解器的关键预处理步骤。通过 Tseitin 式转换实现朴素的指数级转换和复杂的线性时间转换之间的区别是一个核心概念。\n-   **问题定义明确：** 问题定义清晰。它指明了输入（$\\varphi$）、期望的输出格式（CNF），以及两个精确的约束（等可满足性和线性大小）。问题要求从一系列选项中识别出正确的程序。预期会有一个唯一的正确答案。\n-   **客观性：** 问题陈述使用了源自数理逻辑的精确、形式化的语言。它没有歧义和主观性。\n\n**步骤3：结论与行动**\n问题陈述是有效的。这是一个来自逻辑与计算领域的、定义明确且科学上合理的 问题。我现在将继续进行解决方案的推导和选项分析。\n\n**解决方案推导**\n\n主要挑战是同时满足等可满足性和线性大小复杂度的要求。使用逻辑等价（特别是分配律）的朴素方法无法满足大小要求。\n\n考虑分配律：$(\\alpha \\land \\beta) \\lor \\gamma \\equiv (\\alpha \\lor \\gamma) \\land (\\beta \\lor \\gamma)$。虽然这种转换保持了逻辑等价，但重复应用可能导致公式大小的指数级增长。例如，使用分配律将 $\\varphi = (\\alpha_1 \\land \\beta_1) \\lor (\\alpha_2 \\land \\beta_2) \\lor \\dots \\lor (\\alpha_k \\land \\beta_k)$ 转换为 CNF 会得到一个包含 $2^k$ 个子句的公式，这在 $\\varphi$ 的大小 $O(k)$ 上是指数级的。\n\n为了避免这种指数级爆炸，有必要引入新变量。这就是 Tseitin 变换的基础。该变换按以下方式操作：\n1.  为公式 $\\varphi$ 构建解析树。\n2.  对每个子公式 $\\psi$（包括完整公式 $\\varphi$ 本身），引入一个新的命题原子，例如 $v_{\\psi}$。这个新原子意在当且仅当子公式 $\\psi$ 为真时为真。\n3.  对每个非原子子公式 $\\psi$，断言逻辑等价 $v_{\\psi} \\leftrightarrow \\psi$。由于 $\\psi$ 是由其直接子公式构成的（例如 $\\psi = \\psi_1 \\text{ op } \\psi_2$），这种等价性用对应于那些子公式的新变量来表示，例如 $v_{\\psi} \\leftrightarrow (v_{\\psi_1} \\text{ op } v_{\\psi_2})$。\n4.  每个这样的等价关系都被转换为一小组子句（其CNF表示）。对于任何二元连接词，这会产生常数数量（最多3个）的常数长度的子句。\n5.  最终的 CNF 公式 $\\Phi$ 是为每个子公式生成的所有子句的合取，再加上一个最终的单元子句 $(v_{\\varphi})$，它断言整个原始公式必须为真。\n\n$\\varphi$ 中子公式的数量与其大小 $n$ 呈线性关系。由于每个子公式产生常数数量的新 CNF 材料，$\\Phi$ 的总大小为 $O(n)$。此过程满足线性大小约束。\n\n它也满足保守扩展的要求。设 $\\Phi$ 是由 Tseitin 变换生成的公式。\n-   如果 $\\nu \\vDash \\varphi$，可以通过将每个新变量 $v_{\\psi}$ 的值设置为子公式 $\\psi$ 在 $\\nu$ 下的真值来定义一个扩展 $\\hat{\\nu}$。根据构造，这个 $\\hat{\\nu}$ 将满足所有的等价子句。由于 $\\nu \\vDash \\varphi$，$\\hat{\\nu}(v_{\\varphi})$ 将为真，从而满足最后的单元子句 $(v_{\\varphi})$。因此，$\\hat{\\nu} \\vDash \\Phi$。\n-   反之，如果对于某个 $\\nu$ 的扩展 $\\hat{\\nu}$ 有 $\\hat{\\nu} \\vDash \\Phi$，那么单元子句 $(v_{\\varphi})$ 意味着 $\\hat{\\nu}(v_{\\varphi})$ 为真。接着，等价子句保证了在 $\\hat{\\nu}$ 下 $v_{\\psi}$ 的真值与其所代表的表达式的真值相匹配，一直向下到原始原子。因此，$\\varphi$ 在 $\\nu$ 下的真值必须为真。所以，$\\nu \\vDash \\varphi$。\n\n这证实了 Tseitin 变换是满足两个所述要求的正确流水线。现在我们来评估各个选项。\n\n**逐项分析**\n\n**A. 在 $\\varphi$ 中消除 $\\rightarrow$ 和 $\\leftrightarrow$；通过 De Morgan 定律将 $\\neg$ 内推以获得否定范式；重复地将 $\\lor$ 分配到 $\\land$ 上直到获得 CNF。该流水线声称精确地保持逻辑等价（没有新原子），并且输出大小至多为 $O(n)$。**\n此选项描述了教科书式的“朴素”转换算法。虽然它确实能生成一个逻辑等价的 CNF，但其复杂性是其致命弱点。如上所述，将 $\\lor$ 分配到 $\\land$ 上会导致公式大小的最坏情况指数级增长。例如，将 $\\varphi_k = (a_1 \\land b_1) \\lor \\dots \\lor (a_k \\land b_k)$ 转换为 CNF 会导致一个大小为 $k$ 的指数级的公式。因此，声称输出大小至多为 $O(n)$ 是错误的。\n**结论：不正确**。\n\n**B. 为 $\\varphi$ 构建一个解析树。为 $\\varphi$ 的每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$。对每个节点，添加 CNF 子句来强制实施 $v_{\\psi} \\leftrightarrow \\operatorname{op}(v_{\\psi_1},\\dots,v_{\\psi_k})$，其中 $\\operatorname{op}$ 是该节点对应的连接词，而 $v_{\\psi_i}$ 是其直接子公式的新原子。例如，对于合取式 $\\psi = \\alpha \\land \\beta$，添加 3 个子句 $(\\neg v_{\\psi} \\lor v_{\\alpha})$、$(\\neg v_{\\psi} \\lor v_{\\beta})$ 和 $(\\neg v_{\\alpha} \\lor \\neg v_{\\beta} \\lor v_{\\psi})$；对于析取式 $\\psi = \\alpha \\lor \\beta$，添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$、$(\\neg v_{\\beta} \\lor v_{\\psi})$ 和 $(\\neg v_{\\psi} \\lor v_{\\alpha} \\lor v_{\\beta})$；对于否定式 $\\psi = \\neg \\alpha$，添加 $(\\neg v_{\\psi} \\lor \\neg v_{\\alpha})$ 和 $(v_{\\psi} \\lor v_{\\alpha})$。将所有这些子句进行合取，并最终合取单元子句 $v_{\\varphi}$。该流水线声称是一个在原始原子上保持等价的保守扩展（如上所述），并产生一个大小为 $O(n)$ 的 CNF。**\n此选项提供了对 Tseitin 变换的精确和正确的描述。示例中的子句是所需双向蕴含的正确 CNF 编码：\n-   $v_{\\psi} \\leftrightarrow (v_{\\alpha} \\land v_{\\beta}) \\equiv (\\neg v_{\\psi} \\lor v_{\\alpha}) \\land (\\neg v_{\\psi} \\lor v_{\\beta}) \\land (\\neg v_{\\alpha} \\lor \\neg v_{\\beta} \\lor v_{\\psi})$。\n-   $v_{\\psi} \\leftrightarrow (v_{\\alpha} \\lor v_{\\beta}) \\equiv (\\neg v_{\\alpha} \\lor v_{\\psi}) \\land (\\neg v_{\\beta} \\lor v_{\\psi}) \\land (\\neg v_{\\psi} \\lor v_{\\alpha} \\lor v_{\\beta})$。\n-   $v_{\\psi} \\leftrightarrow \\neg v_{\\alpha} \\equiv (\\neg v_{\\psi} \\lor \\neg v_{\\alpha}) \\land (v_{\\psi} \\lor v_{\\alpha})$。\n该过程正确地包括了合取所有定义性子句和最后的单元子句 $(v_{\\varphi})$。如上面的推导所示，该方法满足等可满足性和线性大小的要求。\n**结论：正确**。\n\n**C. 如选项 B，为每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$，但对于每个连接词，只编码从新原子到其组成部分的正向蕴含，例如对于 $\\psi = \\alpha \\land \\beta$ 只添加 $(\\neg v_{\\psi} \\lor v_{\\alpha})$ 和 $(\\neg v_{\\psi} \\lor v_{\\beta})$，而对于 $\\psi = \\alpha \\lor \\beta$ 只添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$ 和 $(\\neg v_{\\beta} \\lor v_{\\psi})$。最后通过合取 $v_{\\varphi}$ 来结束。该流水线声称是保守扩展意义下的等价保持，并且大小是线性的。**\n这个选项建议只使用单向蕴含而不是双向蕴含。这被称为单边或基于极性的 Tseitin 编码，但此处描述的实现是有缺陷的。让我们分析所提供的子句。对于 $\\psi=\\alpha \\lor \\beta$，子句是 $(\\neg v_{\\alpha} \\lor v_{\\psi})$ 和 $(\\neg v_{\\beta} \\lor v_{\\psi})$，它们一起编码了 $(v_{\\alpha} \\lor v_{\\beta}) \\rightarrow v_{\\psi}$。设完整公式为 $\\varphi = a \\lor b$。根据该选项，生成的 CNF $\\Phi$ 将是 $(\\neg a \\lor v_{\\varphi}) \\land (\\neg b \\lor v_{\\varphi}) \\land (v_{\\varphi})$。考虑赋值 $\\nu$，其中 $\\nu(a) = \\text{false}$ 且 $\\nu(b) = \\text{false}$。此赋值不满足 $\\varphi$。然而，我们可以找到一个满足 $\\Phi$ 的扩展 $\\hat{\\nu}$：令 $\\hat{\\nu}(a) = \\text{false}$，$\\hat{\\nu}(b) = \\text{false}$，且 $\\hat{\\nu}(v_{\\varphi}) = \\text{true}$。$\\Phi$ 变为 $(\\neg \\text{false} \\lor \\text{true}) \\land (\\neg \\text{false} \\lor \\text{true}) \\land (\\text{true})$，这是真的。所以我们找到了一个 $\\Phi$ 的满足赋值，其对原始变量的限制并*不*满足 $\\varphi$。这违反了所要求的“当且仅当”条件中的“当”部分（**如果** $\\exists \\hat{\\nu} \\dots \\vDash \\Phi$ 则 $\\nu \\vDash \\varphi$）。该流水线不是所要求的等价保持。\n**结论：不正确**。\n\n**D. 如选项 B，为每个子公式引入新原子和双向蕴含约束，但在末尾省略合取 $v_{\\varphi}$。只返回所有定义性子句的合取。该流水线声称是保守扩展意义下的等价保持，并且大小是线性的。**\n此选项省略了断言顶层公式为真的关键最后一步。所有定义性子句的合取，我们称之为 $\\Phi_D$，只描述了子公式之间的关系。$\\Phi_D$ 几乎总是可满足的。例如，可以通过将所有新变量和所有原始原子都设置为假来找到一个满足赋值。这个赋值满足所有双向蕴含子句。所以，即使 $\\varphi$ 是一个矛盾式（例如 $\\varphi = a \\land \\neg a$），$\\Phi_D$ 也是可满足的。对于不可满足的 $\\varphi = a \\land \\neg a$，定义性子句是可满足的，例如，通过将 $a, v_{a \\land \\neg a}$ 设置为假，将 $v_{\\neg a}$ 设置为真。这显然违反了等可满足性的要求。\n**结论：不正确**。\n\n**E. 首先通过将 $\\land$ 分配到 $\\lor$ 上将 $\\varphi$ 转换为析取范式，然后应用一个子句学习解析方案来派生一个与 $\\varphi$ 逻辑等价且通过重用派生子句而大小为线性的 CNF。该流水线声称保持等价性并避免大小爆炸。**\n此选项在多个方面存在缺陷。首先，将任意公式转换为 DNF 本身就会导致大小的指数级爆炸。例如，将一个已经是 CNF 的公式，如 $\\varphi = (a_1 \\lor b_1) \\land \\dots \\land (a_k \\lor b_k)$，转换为 DNF 会产生 $2^k$ 个析取项。仅这一初始步骤就违反了线性大小的要求。其次，“子句学习解析方案”不是一种用于在范式之间转换的标准算法；它是现代 SAT 求解器中用于指导搜索过程的一个组件。声称这样一种方案可以从一个可能呈指数级的 DNF 中恢复一个线性大小的 CNF 是没有根据的，并且通常不成立。\n**结论：不正确**。", "answer": "$$\\boxed{B}$$", "id": "3046374"}]}
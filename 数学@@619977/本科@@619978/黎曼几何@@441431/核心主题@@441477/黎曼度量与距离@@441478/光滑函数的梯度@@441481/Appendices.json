{"hands_on_practices": [{"introduction": "要真正理解黎曼流形上的梯度，一个有效的方法是首先将其与我们熟悉的概念联系起来。本练习要求您从基本定义 $g(\\nabla f, X) = df(X)$ 出发，推导标准欧氏平面上一个径向函数的梯度。通过这个过程，您将看到黎曼几何的抽象工具如何重现矢量微积分中梯度指向最速上升方向的直观结果 [@problem_id:3071952]。", "problem": "考虑光滑流形 $\\mathbb{R}^{2}$，其上赋有标准的欧几里得黎曼度量。在 $\\mathbb{R}^{2}$ 上引入极坐标 $(r,\\theta)$，坐标变换为 $x=r\\cos\\theta$ 和 $y=r\\sin\\theta$，并回想在这些坐标下，欧几里得度量为 $g=dr^{2}+r^{2}d\\theta^{2}$。设 $f:\\mathbb{R}^{2}\\setminus\\{0\\}\\to\\mathbb{R}$ 为一个光滑的径向函数，这意味着 $f(p)$ 的值仅取决于点 $p$ 的半径 $r$，并且可以写成 $f(r)$ 的形式，其中 $r0$。\n\n从黎曼流形上梯度的定义性质出发，即对于任意向量场 $X$，梯度 $\\nabla f$ 由恒等式 $g(\\nabla f,X)=df(X)$ 唯一确定，推导 $\\nabla f$ 关于笛卡尔坐标 $(x,y)$ 的显式表达式。然后，利用你得到的表达式，从第一性原理出发，证明 $\\nabla f$ 沿着径向方向，并用 $f'(r)$ 和度量 $g$ 来确定其大小。\n\n将你的最终答案表示为 $\\nabla f$ 的两个笛卡尔分量，仅用 $x$、$y$ 和导数 $f'$ 写成单一的解析表达式。不需要四舍五入。", "solution": "该问题陈述是自洽的、数学上合理的且适定的。它要求从第一性原理出发，推导欧几里得平面上径向函数的梯度，这是微分几何中的一个标准练习。所有术语都定义清晰，前提与已建立的数学理论一致。因此，该问题是有效的。\n\n我们首先在一个黎曼流形 $(M,g)$ 上，形式化地推导光滑函数 $f$ 的梯度 $\\nabla f$ 的表达式。梯度向量场 $\\nabla f$ 由以下关系唯一确定：\n$$\ng(\\nabla f, X) = df(X)\n$$\n对于 $M$ 上的每一个光滑向量场 $X$。\n\n我们所考虑的流形是具有标准欧几里得度量的 $\\mathbb{R}^{2}$，在笛卡尔坐标 $(x,y)$ 下，该度量由 $g = dx^2 + dy^2$ 给出。在此坐标系中，任意一点的切空间的局部基是 $\\{\\frac{\\partial}{\\partial x}, \\frac{\\partial}{\\partial y}\\}$。度量张量的分量为 $g_{xx} = 1$，$g_{yy} = 1$ 以及 $g_{xy} = g_{yx} = 0$。\n\n让我们用笛卡尔分量来表示梯度向量场 $\\nabla f$ 和一个任意的测试向量场 $X$：\n$$\n\\nabla f = (\\nabla f)^x \\frac{\\partial}{\\partial x} + (\\nabla f)^y \\frac{\\partial}{\\partial y}\n$$\n$$\nX = X^x \\frac{\\partial}{\\partial x} + X^y \\frac{\\partial}{\\partial y}\n$$\n定义恒等式的左边变为：\n$$\ng(\\nabla f, X) = g\\left( (\\nabla f)^x \\frac{\\partial}{\\partial x} + (\\nabla f)^y \\frac{\\partial}{\\partial y}, X^x \\frac{\\partial}{\\partial x} + X^y \\frac{\\partial}{\\partial y} \\right)\n$$\n根据度量的双线性性质，并使用分量值 $g(\\frac{\\partial}{\\partial x}, \\frac{\\partial}{\\partial x}) = 1$, $g(\\frac{\\partial}{\\partial y}, \\frac{\\partial}{\\partial y}) = 1$ 以及 $g(\\frac{\\partial}{\\partial x}, \\frac{\\partial}{\\partial y}) = 0$，我们得到：\n$$\ng(\\nabla f, X) = (\\nabla f)^x X^x + (\\nabla f)^y X^y\n$$\n\n定义恒等式的右边涉及函数 $f$ 的微分 $df$。在笛卡尔坐标下，微分由下式给出：\n$$\ndf = \\frac{\\partial f}{\\partial x} dx + \\frac{\\partial f}{\\partial y} dy\n$$\n将 $df$ 应用于向量场 $X$ 得到：\n$$\ndf(X) = \\left( \\frac{\\partial f}{\\partial x} dx + \\frac{\\partial f}{\\partial y} dy \\right) \\left( X^x \\frac{\\partial}{\\partial x} + X^y \\frac{\\partial}{\\partial y} \\right) = \\frac{\\partial f}{\\partial x} X^x + \\frac{\\partial f}{\\partial y} X^y\n$$\n\n令 $g(\\nabla f, X)$ 和 $df(X)$ 的表达式相等：\n$$\n(\\nabla f)^x X^x + (\\nabla f)^y X^y = \\frac{\\partial f}{\\partial x} X^x + \\frac{\\partial f}{\\partial y} X^y\n$$\n这个恒等式必须对分量 $X^x$ 和 $X^y$ 的所有选择都成立。通过选择 $X = \\frac{\\partial}{\\partial x}$（即 $X^x=1, X^y=0$），然后选择 $X = \\frac{\\partial}{\\partial y}$（即 $X^x=0, X^y=1$），我们可以分别令系数相等：\n$$\n(\\nabla f)^x = \\frac{\\partial f}{\\partial x}\n$$\n$$\n(\\nabla f)^y = \\frac{\\partial f}{\\partial y}\n$$\n因此，对于笛卡尔坐标下的欧几里得度量，梯度向量场就是 $\\nabla f = \\frac{\\partial f}{\\partial x} \\frac{\\partial}{\\partial x} + \\frac{\\partial f}{\\partial y} \\frac{\\partial}{\\partial y}$。\n\n问题指明 $f$ 是一个光滑径向函数，这意味着 $f$ 仅取决于半径 $r = \\sqrt{x^2 + y^2}$。我们将其写为 $f(x,y) = f(r(x,y))$。我们用 $f'(r) = \\frac{df}{dr}$ 表示 $f$ 对其自变量 $r$ 的导数。为了求出 $\\nabla f$ 的笛卡尔分量，我们必须使用链式法则计算偏导数 $\\frac{\\partial f}{\\partial x}$ 和 $\\frac{\\partial f}{\\partial y}$。\n\n首先，我们计算 $r$ 的偏导数：\n$$\n\\frac{\\partial r}{\\partial x} = \\frac{\\partial}{\\partial x} (x^2 + y^2)^{1/2} = \\frac{1}{2}(x^2 + y^2)^{-1/2}(2x) = \\frac{x}{\\sqrt{x^2+y^2}} = \\frac{x}{r}\n$$\n$$\n\\frac{\\partial r}{\\partial y} = \\frac{\\partial}{\\partial y} (x^2 + y^2)^{1/2} = \\frac{1}{2}(x^2 + y^2)^{-1/2}(2y) = \\frac{y}{\\sqrt{x^2+y^2}} = \\frac{y}{r}\n$$\n注意，这些表达式在定义域 $\\mathbb{R}^2\\setminus\\{0\\}$ 上是良定义的，其中 $r > 0$。\n\n现在，对 $f$ 应用链式法则：\n$$\n(\\nabla f)^x = \\frac{\\partial f}{\\partial x} = \\frac{df}{dr} \\frac{\\partial r}{\\partial x} = f'(r) \\frac{x}{r}\n$$\n$$\n(\\nabla f)^y = \\frac{\\partial f}{\\partial y} = \\frac{df}{dr} \\frac{\\partial r}{\\partial y} = f'(r) \\frac{y}{r}\n$$\n因此，梯度向量场可以写为：\n$$\n\\nabla f = \\left(f'(r) \\frac{x}{r}\\right) \\frac{\\partial}{\\partial x} + \\left(f'(r) \\frac{y}{r}\\right) \\frac{\\partial}{\\partial y} = \\frac{f'(r)}{r} \\left(x \\frac{\\partial}{\\partial x} + y \\frac{\\partial}{\\partial y}\\right)\n$$\n代入 $r=\\sqrt{x^2+y^2}$，得到纯粹用 $x$ 和 $y$ 表示的分量：\n$$\n(\\nabla f)^x = \\frac{f'(\\sqrt{x^2+y^2})}{\\sqrt{x^2+y^2}} x\n$$\n$$\n(\\nabla f)^y = \\frac{f'(\\sqrt{x^2+y^2})}{\\sqrt{x^2+y^2}} y\n$$\n这就是 $\\nabla f$ 在笛卡尔坐标下的显式表达式。\n\n接下来，我们证明 $\\nabla f$ 是沿着径向方向的。$\\nabla f$ 的向量部分是 $x \\frac{\\partial}{\\partial x} + y \\frac{\\partial}{\\partial y}$。在点 $p=(x,y)$ 处，这个向量对应于元组 $(x,y)$，也就是点 $p$ 相对于原点的位置向量。根据定义，位置向量的方向就是径向方向。由于 $\\nabla f$ 是这个径向向量场的标量倍数，即 $\\frac{f'(r)}{r}$ 倍，$\\nabla f$ 本身在每一点都沿着径向方向。\n\n最后，我们确定 $\\nabla f$ 的大小（或模长），记为 $\\|\\nabla f\\|_g$。其大小的平方由 $\\|\\nabla f\\|_g^2 = g(\\nabla f, \\nabla f)$ 给出。使用我们推导出的笛卡尔分量：\n$$\n\\|\\nabla f\\|_g^2 = \\left(f'(r) \\frac{x}{r}\\right)^2 + \\left(f'(r) \\frac{y}{r}\\right)^2 = \\frac{(f'(r))^2}{r^2} (x^2 + y^2)\n$$\n因为 $r^2 = x^2 + y^2$，表达式简化为：\n$$\n\\|\\nabla f\\|_g^2 = \\frac{(f'(r))^2}{r^2} (r^2) = (f'(r))^2\n$$\n梯度的模长是该值的平方根：\n$$\n\\|\\nabla f\\|_g = \\sqrt{(f'(r))^2} = |f'(r)|\n$$\n这表明，径向函数的梯度的模长仅取决于函数关于半径的变化率。", "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{f'(\\sqrt{x^2+y^2})}{\\sqrt{x^2+y^2}} x  \\frac{f'(\\sqrt{x^2+y^2})}{\\sqrt{x^2+y^2}} y \\end{pmatrix}}\n$$", "id": "3071952"}, {"introduction": "黎曼几何中的一个关键洞见是，“最速上升”的概念是由度量决定的。本练习将这一抽象概念具体化，要求您计算同一个线性函数在两种不同度量（标准欧氏度量和一种各向异性度量）下的梯度。您将亲眼看到，改变底层的几何结构会如何改变梯度向量的方向 [@problem_id:3071958]。", "problem": "设 $\\mathbb{R}^{2}$ 上赋有两个黎曼度量：一个是由通常的点积给出的标准欧几里得度量 $g_{0}$，另一个是在每一点上由常数正定双线性形式定义的各向异性度量 $g$，其在标准坐标下的矩阵为\n$$\nA = \\begin{pmatrix} 1  0 \\\\\n\\\\[4pt] 0  4 \\end{pmatrix}\n$$\n考虑光滑函数 $f:\\mathbb{R}^{2}\\to\\mathbb{R}$，由 $f(x,y)=x+2y$ 给出。请仅使用梯度相对于黎曼度量的定义性质——即对于任意向量场 $X$，梯度 $\\nabla^{g} f$ 是满足 $g(\\nabla^{g} f, X)=df(X)$ 的唯一向量场——完成以下任务：\n\n- 计算相对于欧几里得度量 $g_{0}$ 的梯度 $\\nabla^{g_{0}} f$。\n- 计算相对于各向异性度量 $g$ 的梯度 $\\nabla^{g} f$。\n- 使用 $\\mathbb{R}^{2}$ 中标准的欧几里得角度概念，计算向量 $\\nabla^{g_{0}} f$ 和 $\\nabla^{g} f$ 之间的夹角 $\\theta$（以弧度为单位）。\n\n将最终答案表示为 $\\theta$ 的单个精确解析表达式，单位为弧度（不要近似或四舍五入）。此题的目的是明确展示，对于这个固定的函数 $f$，将度量更改为各向异性度量会改变 $\\nabla f$ 的方向。", "solution": "本题要求计算一个光滑函数在 $\\mathbb{R}^{2}$ 上关于两个不同黎曼度量的梯度，以及所得梯度向量之间的夹角。问题的核心是使用梯度向量场的基本定义。\n\n设 $f: \\mathbb{R}^{2} \\to \\mathbb{R}$ 是一个光滑函数，$g$ 是 $\\mathbb{R}^{2}$ 上的一个黎曼度量。$f$ 相对于 $g$ 的梯度，记作 $\\nabla^{g} f$，是满足关系式\n$$g(\\nabla^{g} f, X) = df(X)$$\n的唯一向量场，其中 $X$ 是 $\\mathbb{R}^{2}$ 上的任意向量场。这里，$df$ 是 $f$ 的微分，它是一个 1-形式。\n\n给定的函数是 $f(x,y) = x+2y$。其微分为\n$$df = \\frac{\\partial f}{\\partial x} dx + \\frac{\\partial f}{\\partial y} dy = 1 \\cdot dx + 2 \\cdot dy$$\n让我们考虑 $\\mathbb{R}^{2}$ 上的一个一般向量场 $X$。在标准坐标基 $\\{\\partial_x, \\partial_y\\}$ 中，我们可以将 $X$ 写为 $X = X^1 \\partial_x + X^2 \\partial_y$。1-形式 $df$ 在 $X$ 上的作用为\n$$df(X) = (dx + 2dy)(X^1 \\partial_x + X^2 \\partial_y) = X^1 dx(\\partial_x) + X^2 dx(\\partial_y) + 2X^1 dy(\\partial_x) + 2X^2 dy(\\partial_y)$$\n使用性质 $dx^i(\\partial_j) = \\delta^i_j$（其中 $x^1=x, x^2=y$），我们得到\n$$df(X) = X^1(1) + X^2(0) + 2X^1(0) + 2X^2(1) = X^1 + 2X^2$$\n\n首先，我们计算相对于标准欧几里得度量 $g_{0}$ 的梯度 $\\nabla^{g_{0}} f$。\n度量 $g_{0}$ 在标准基中由单位矩阵 $I = \\begin{pmatrix} 1   0 \\\\ 0   1 \\end{pmatrix}$ 表示。这意味着 $g_{0}(\\partial_x, \\partial_x) = 1$，$g_{0}(\\partial_y, \\partial_y) = 1$ 且 $g_{0}(\\partial_x, \\partial_y) = 0$。\n设梯度向量场在坐标中写作 $\\nabla^{g_{0}} f = G_0^1 \\partial_x + G_0^2 \\partial_y$。我们必须求出分量 $G_0^1$ 和 $G_0^2$。使用定义性质：\n$$g_{0}(\\nabla^{g_{0}} f, X) = g_{0}(G_0^1 \\partial_x + G_0^2 \\partial_y, X^1 \\partial_x + X^2 \\partial_y)$$\n根据度量的双线性性质，上式展开为：\n$$g_{0}(\\nabla^{g_{0}} f, X) = G_0^1 X^1 g_{0}(\\partial_x, \\partial_x) + G_0^1 X^2 g_{0}(\\partial_x, \\partial_y) + G_0^2 X^1 g_{0}(\\partial_y, \\partial_x) + G_0^2 X^2 g_{0}(\\partial_y, \\partial_y)$$\n$$g_{0}(\\nabla^{g_{0}} f, X) = G_0^1 X^1 (1) + G_0^1 X^2 (0) + G_0^2 X^1 (0) + G_0^2 X^2 (1) = G_0^1 X^1 + G_0^2 X^2$$\n将此结果与 $df(X)$ 相等，我们有：\n$$G_0^1 X^1 + G_0^2 X^2 = X^1 + 2X^2$$\n由于该等式必须对所有 $X^1$ 和 $X^2$ 的选择都成立，我们可以令系数相等：\n$$G_0^1 = 1 \\quad \\text{且} \\quad G_0^2 = 2$$\n因此，相对于欧几里得度量的梯度是 $\\nabla^{g_{0}} f = 1 \\cdot \\partial_x + 2 \\cdot \\partial_y$。作为 $\\mathbb{R}^{2}$ 中的一个向量，它是 $(1, 2)$。\n\n接下来，我们计算相对于各向异性度量 $g$ 的梯度 $\\nabla^{g} f$。\n度量 $g$ 在标准基中由矩阵 $A = \\begin{pmatrix} 1  0 \\\\ 0  4 \\end{pmatrix}$ 表示。这意味着 $g(\\partial_x, \\partial_x) = 1$，$g(\\partial_y, \\partial_y) = 4$ 且 $g(\\partial_x, \\partial_y) = 0$。\n设梯度向量场为 $\\nabla^{g} f = G^1 \\partial_x + G^2 \\partial_y$。使用定义性质：\n$$g(\\nabla^{g} f, X) = g(G^1 \\partial_x + G^2 \\partial_y, X^1 \\partial_x + X^2 \\partial_y)$$\n$$g(\\nabla^{g} f, X) = G^1 X^1 g(\\partial_x, \\partial_x) + G^1 X^2 g(\\partial_x, \\partial_y) + G^2 X^1 g(\\partial_y, \\partial_x) + G^2 X^2 g(\\partial_y, \\partial_y)$$\n$$g(\\nabla^{g} f, X) = G^1 X^1 (1) + G^1 X^2 (0) + G^2 X^1 (0) + G^2 X^2 (4) = G^1 X^1 + 4G^2 X^2$$\n将此结果与 $df(X)$ 相等，我们有：\n$$G^1 X^1 + 4G^2 X^2 = X^1 + 2X^2$$\n由于该等式必须对所有 $X^1$ 和 $X^2$ 都成立，我们令系数相等：\n$$G^1 = 1 \\quad \\text{且} \\quad 4G^2 = 2 \\implies G^2 = \\frac{1}{2}$$\n因此，相对于各向异性度量的梯度是 $\\nabla^{g} f = 1 \\cdot \\partial_x + \\frac{1}{2} \\cdot \\partial_y$。作为 $\\mathbb{R}^{2}$ 中的一个向量，它是 $(1, \\frac{1}{2})$。\n\n最后，我们计算两个梯度向量 $\\nabla^{g_{0}} f$ 和 $\\nabla^{g} f$ 之间的夹角 $\\theta$。题目指定使用标准的欧几里得角度概念，这对应于 $\\mathbb{R}^2$ 的点积（即度量 $g_0$）。\n设 $V_0 = \\nabla^{g_{0}} f = (1, 2)$ 和 $V = \\nabla^{g} f = (1, \\frac{1}{2})$。\n在欧几里得空间中，两个向量 $V_0$ 和 $V$ 之间的夹角 $\\theta$ 由以下公式给出：\n$$\\cos(\\theta) = \\frac{V_0 \\cdot V}{\\|V_0\\|_{g_0} \\|V\\|_{g_0}}$$\n其中 $\\cdot$ 表示标准点积，$\\| \\cdot \\|_{g_0}$ 是标准欧几里得范数。\n点积为：\n$$V_0 \\cdot V = (1)(1) + (2)\\left(\\frac{1}{2}\\right) = 1 + 1 = 2$$\n欧几里得范数为：\n$$\\|V_0\\|_{g_0} = \\sqrt{1^2 + 2^2} = \\sqrt{1+4} = \\sqrt{5}$$\n$$\\|V\\|_{g_0} = \\sqrt{1^2 + \\left(\\frac{1}{2}\\right)^2} = \\sqrt{1+\\frac{1}{4}} = \\sqrt{\\frac{5}{4}} = \\frac{\\sqrt{5}}{2}$$\n现在，我们计算 $\\cos(\\theta)$：\n$$\\cos(\\theta) = \\frac{2}{\\sqrt{5} \\cdot \\frac{\\sqrt{5}}{2}} = \\frac{2}{\\frac{5}{2}} = \\frac{4}{5}$$\n夹角 $\\theta$ 是该结果的反余弦主值。\n$$\\theta = \\arccos\\left(\\frac{4}{5}\\right)$$\n这是一个以弧度为单位的精确解析表达式。", "answer": "$$\\boxed{\\arccos\\left(\\frac{4}{5}\\right)}$$", "id": "3071958"}, {"introduction": "在建立了直观理解之后，是时候通过一个更复杂的例子来检验您的计算能力了。本练习要求您在一个非平凡的度量下，运用梯度的范数平方的一般坐标公式 $|\\nabla f|^2 = g^{ij}\\partial_i f \\partial_j f$ 进行完整计算。这个实践将巩固您在任意坐标系下处理梯度问题的能力 [@problem_id:3071960]。", "problem": "设 $M=\\mathbb{R}^{2}$，其全局坐标为 $(x,y)$，并赋有一个黎曼度量 $g$，其坐标分量为\n$$\ng_{11}(x,y)=1+x^{2},\\quad g_{12}(x,y)=g_{21}(x,y)=x\\,y,\\quad g_{22}(x,y)=1+y^{2}.\n$$\n考虑光滑函数 $f:M\\to\\mathbb{R}$，其定义为\n$$\nf(x,y)=x^{3}y+\\ln(1+x^{2}+y^{2}).\n$$\n仅使用黎曼流形上梯度的定义性质，即梯度 $\\nabla f$ 是满足对所有向量场 $X$ 都有 $g(\\nabla f,X)=\\mathrm{d}f(X)$ 的唯一向量场，推导在给定度量和函数下，梯度范数的平方 $|\\nabla f|^{2}=g(\\nabla f,\\nabla f)$ 的坐标表达式。请明确计算逆度量分量和所需的导数，并将它们组合起来，以 $x$ 和 $y$ 的形式得到 $|\\nabla f|^{2}$。然后简要解释在此背景下 $|\\nabla f|^{2}$ 的几何意义。将最终答案表示为关于 $x$ 和 $y$ 的单个闭式解析表达式。无需四舍五入，不涉及单位。", "solution": "该问题要求在黎曼流形 $(M,g)$ 上推导给定函数 $f$ 的梯度范数的平方。\n\n首先，我们验证问题的有效性。流形是 $M=\\mathbb{R}^2$，全局坐标为 $(x,y)$。度量张量 $g$ 的分量由 $g_{11}=1+x^2$、$g_{12}=g_{21}=xy$ 和 $g_{22}=1+y^2$ 给出。我们构造度量矩阵 $G$：\n$$\nG = \\begin{pmatrix} g_{11}  g_{12} \\\\ g_{21}  g_{22} \\end{pmatrix} = \\begin{pmatrix} 1+x^2  xy \\\\ xy  1+y^2 \\end{pmatrix}\n$$\n度量张量必须是正定的。我们使用 Sylvester 准则来检验这一点。第一个主子式是 $g_{11}=1+x^2$，它对所有 $(x,y) \\in \\mathbb{R}^2$ 都严格大于 $0$。$G$ 的行列式是：\n$$\n\\det(G) = g_{11}g_{22} - g_{12}^2 = (1+x^2)(1+y^2) - (xy)^2 = 1+y^2+x^2+x^2y^2 - x^2y^2 = 1+x^2+y^2\n$$\n由于 $x^2 \\ge 0$ 且 $y^2 \\ge 0$，所以 $\\det(G) = 1+x^2+y^2 \\ge 1$。因此，行列式是严格正的。由于两个主子式都为正，度量 $g$ 确实在 $M$ 上的所有点都是正定的，是一个有效的黎曼度量。函数 $f(x,y)=x^3y+\\ln(1+x^2+y^2)$ 在 $M$ 上是光滑的，因为对数的参数 $1+x^2+y^2$ 始终大于或等于 $1$。因此，该问题在科学上是合理的、适定的，并且提供了所有必要的信息。\n\n我们现在开始求解。光滑函数 $f$ 的梯度，记作 $\\nabla f$，是满足关系式 $g(\\nabla f, X) = \\mathrm{d}f(X)$ 的唯一向量场，其中 $X$ 为任意向量场。在局部坐标系 $\\{x^i\\}$ 中，向量场 $X$ 写为 $X = X^i \\frac{\\partial}{\\partial x^i}$，梯度为 $\\nabla f = (\\nabla f)^j \\frac{\\partial}{\\partial x^j}$。微分 $\\mathrm{d}f$ 是 1-形式 $\\mathrm{d}f = \\frac{\\partial f}{\\partial x^k} \\mathrm{d}x^k$。定义关系在坐标中变为：\n$$\ng\\left( (\\nabla f)^j \\frac{\\partial}{\\partial x^j}, X^i \\frac{\\partial}{\\partial x^i} \\right) = \\left(\\frac{\\partial f}{\\partial x^k} \\mathrm{d}x^k\\right) \\left(X^i \\frac{\\partial}{\\partial x^i}\\right)\n$$\n$$\ng_{ji} (\\nabla f)^j X^i = \\frac{\\partial f}{\\partial x^k} X^k\n$$\n由于这对任意向量场 $X$ 都必须成立，因此分量 $X^i$ 是任意的。通过将求和指标 $k$ 重新标记为 $i$，我们可以令 $X^i$ 的系数相等：\n$$\ng_{ji} (\\nabla f)^j = \\frac{\\partial f}{\\partial x^i}\n$$\n为了求解梯度的分量 $(\\nabla f)^j$，我们乘以逆度量分量 $g^{ik}$：\n$$\ng^{ik} g_{ji} (\\nabla f)^j = g^{ik} \\frac{\\partial f}{\\partial x^i}\n$$\n利用性质 $g^{ik} g_{ji} = \\delta^k_j$（克罗内克 delta），我们得到：\n$$\n(\\nabla f)^k = g^{ki} \\frac{\\partial f}{\\partial x^i}\n$$\n梯度的范数平方是 $|\\nabla f|^2 = g(\\nabla f, \\nabla f)$。将定义性质应用于 $X = \\nabla f$，我们得到：\n$$\n|\\nabla f|^2 = g(\\nabla f, \\nabla f) = \\mathrm{d}f(\\nabla f) = \\left(\\frac{\\partial f}{\\partial x^k} \\mathrm{d}x^k\\right)\\left((\\nabla f)^j \\frac{\\partial}{\\partial x^j}\\right) = \\frac{\\partial f}{\\partial x^j} (\\nabla f)^j\n$$\n代入 $(\\nabla f)^j$ 的表达式：\n$$\n|\\nabla f|^2 = \\frac{\\partial f}{\\partial x^j} g^{ji} \\frac{\\partial f}{\\partial x^i}\n$$\n这就是梯度范数平方的一般坐标表达式。现在，我们计算此问题的具体量。坐标为 $(x^1, x^2) = (x,y)$。\n\n首先，我们计算逆度量分量 $g^{ij}$。$2 \\times 2$ 矩阵 $G = \\begin{pmatrix} a  b \\\\ c  d \\end{pmatrix}$ 的逆是 $G^{-1} = \\frac{1}{ad-bc} \\begin{pmatrix} d  -b \\\\ -c  a \\end{pmatrix}$。\n$$\nG^{-1} = \\frac{1}{1+x^2+y^2} \\begin{pmatrix} 1+y^2  -xy \\\\ -xy  1+x^2 \\end{pmatrix}\n$$\n所以，逆度量的分量是：\n$$\ng^{11} = \\frac{1+y^2}{1+x^2+y^2}, \\quad g^{12}=g^{21} = \\frac{-xy}{1+x^2+y^2}, \\quad g^{22} = \\frac{1+x^2}{1+x^2+y^2}\n$$\n接下来，我们计算 $f(x,y)=x^3y+\\ln(1+x^2+y^2)$ 的偏导数：\n$$\n\\frac{\\partial f}{\\partial x} = 3x^2y + \\frac{2x}{1+x^2+y^2}\n$$\n$$\n\\frac{\\partial f}{\\partial y} = x^3 + \\frac{2y}{1+x^2+y^2}\n$$\n我们现在将这些分量组合成 $|\\nabla f|^2 = g^{11}(\\frac{\\partial f}{\\partial x})^2 + 2g^{12}\\frac{\\partial f}{\\partial x}\\frac{\\partial f}{\\partial y} + g^{22}(\\frac{\\partial f}{\\partial y})^2$ 的表达式。\n为了处理代数复杂性，我们将 $f$ 分解为 $f=f_1+f_2$，其中 $f_1=x^3y$，$f_2=\\ln(1+x^2+y^2)$。梯度算子是线性的，所以 $\\nabla f = \\nabla f_1 + \\nabla f_2$。范数平方为：\n$$\n|\\nabla f|^2 = g(\\nabla f_1+\\nabla f_2, \\nabla f_1+\\nabla f_2) = g(\\nabla f_1, \\nabla f_1) + g(\\nabla f_2, \\nabla f_2) + 2g(\\nabla f_1, \\nabla f_2)\n$$\n$$\n|\\nabla f|^2 = |\\nabla f_1|^2 + |\\nabla f_2|^2 + 2g(\\nabla f_1, \\nabla f_2)\n$$\n我们分别计算每一项。设 $D=1+x^2+y^2$。一个有用的观察是，逆度量可以写成 $G^{-1} = I - \\frac{1}{D}\\mathbf{r}\\mathbf{r}^T$，其中 $I$ 是单位矩阵，$\\mathbf{r}=(x,y)^T$。函数 $h$ 的范数平方的公式变为：\n$$\n|\\nabla h|^2 = (\\mathrm{d}h)^T G^{-1} (\\mathrm{d}h) = (\\mathrm{d}h)^T \\left(I - \\frac{\\mathbf{r}\\mathbf{r}^T}{D}\\right) (\\mathrm{d}h) = |\\mathrm{d}h|^2_{\\text{euc}} - \\frac{(\\mathbf{r} \\cdot \\mathrm{d}h)^2}{D}\n$$\n其中 $|\\mathrm{d}h|^2_{\\text{euc}} = (\\frac{\\partial h}{\\partial x})^2 + (\\frac{\\partial h}{\\partial y})^2$，$\\mathbf{r} \\cdot \\mathrm{d}h = x\\frac{\\partial h}{\\partial x} + y\\frac{\\partial h}{\\partial y}$。\n\n第1项：$f_1=x^3y$ 的 $|\\nabla f_1|^2$。\n$\\frac{\\partial f_1}{\\partial x} = 3x^2y$, $\\frac{\\partial f_1}{\\partial y} = x^3$。\n$|\\mathrm{d}f_1|^2_{\\text{euc}} = (3x^2y)^2 + (x^3)^2 = 9x^4y^2 + x^6$。\n$\\mathbf{r} \\cdot \\mathrm{d}f_1 = x(3x^2y) + y(x^3) = 4x^3y$。\n$$\n|\\nabla f_1|^2 = (9x^4y^2+x^6) - \\frac{(4x^3y)^2}{D} = x^6+9x^4y^2 - \\frac{16x^6y^2}{1+x^2+y^2}\n$$\n合并为单个分数：\n$$\n|\\nabla f_1|^2 = \\frac{(x^6+9x^4y^2)(1+x^2+y^2) - 16x^6y^2}{1+x^2+y^2} = \\frac{x^6+x^8+x^6y^2 + 9x^4y^2+9x^6y^2+9x^4y^4 - 16x^6y^2}{1+x^2+y^2} = \\frac{x^8-6x^6y^2+x^6+9x^4y^4+9x^4y^2}{1+x^2+y^2}\n$$\n\n第2项：$f_2=\\ln(1+x^2+y^2)=\\ln(D)$ 的 $|\\nabla f_2|^2$。\n$\\frac{\\partial f_2}{\\partial x} = \\frac{2x}{D}$, $\\frac{\\partial f_2}{\\partial y} = \\frac{2y}{D}$。\n$|\\mathrm{d}f_2|^2_{\\text{euc}} = (\\frac{2x}{D})^2+(\\frac{2y}{D})^2 = \\frac{4(x^2+y^2)}{D^2}$。\n$\\mathbf{r} \\cdot \\mathrm{d}f_2 = x(\\frac{2x}{D}) + y(\\frac{2y}{D}) = \\frac{2(x^2+y^2)}{D}$。\n$$\n|\\nabla f_2|^2 = \\frac{4(x^2+y^2)}{D^2} - \\frac{1}{D}\\left(\\frac{2(x^2+y^2)}{D}\\right)^2 = \\frac{4(x^2+y^2)}{D^2} - \\frac{4(x^2+y^2)^2}{D^3}\n$$\n$$\n|\\nabla f_2|^2 = \\frac{4(x^2+y^2)D - 4(x^2+y^2)^2}{D^3} = \\frac{4(x^2+y^2)(D - (x^2+y^2))}{D^3} = \\frac{4(x^2+y^2)}{(1+x^2+y^2)^3}\n$$\n\n第3项：$2g(\\nabla f_1, \\nabla f_2)$。\n$g(\\nabla f_1, \\nabla f_2) = (\\mathrm{d}f_1)^T G^{-1} (\\mathrm{d}f_2) = (\\mathrm{d}f_1 \\cdot \\mathrm{d}f_2)_{\\text{euc}} - \\frac{(\\mathbf{r} \\cdot \\mathrm{d}f_1)(\\mathbf{r} \\cdot \\mathrm{d}f_2)}{D}$。\n$(\\mathrm{d}f_1 \\cdot \\mathrm{d}f_2)_{\\text{euc}} = (3x^2y)(\\frac{2x}{D}) + (x^3)(\\frac{2y}{D}) = \\frac{6x^3y+2x^3y}{D} = \\frac{8x^3y}{D}$。\n$$\ng(\\nabla f_1, \\nabla f_2) = \\frac{8x^3y}{D} - \\frac{(4x^3y)(2(x^2+y^2)/D)}{D} = \\frac{8x^3y}{D} - \\frac{8x^3y(x^2+y^2)}{D^2}\n$$\n$$\ng(\\nabla f_1, \\nabla f_2) = \\frac{8x^3yD - 8x^3y(x^2+y^2)}{D^2} = \\frac{8x^3y(D-(x^2+y^2))}{D^2} = \\frac{8x^3y}{(1+x^2+y^2)^2}\n$$\n所以，$2g(\\nabla f_1, \\nabla f_2) = \\frac{16x^3y}{(1+x^2+y^2)^2}$。\n\n将这三项相加得到 $|\\nabla f|^2$ 的最终表达式：\n$$\n|\\nabla f|^2 = \\frac{x^8-6x^6y^2+x^6+9x^4y^4+9x^4y^2}{1+x^2+y^2} + \\frac{16x^3y}{(1+x^2+y^2)^2} + \\frac{4(x^2+y^2)}{(1+x^2+y^2)^3}\n$$\n\n$|\\nabla f|^2$ 的几何意义：\n在黎曼流形 $(M,g)$ 上，点 $p \\in M$ 处的梯度向量 $\\nabla f$ 指向函数 $f$ 最陡峭上升的方向，其中方向和陡峭程度由度量 $g$ 衡量。梯度的范数 $|\\nabla f|_p = \\sqrt{g_p(\\nabla f, \\nabla f)}$ 表示函数 $f$ 在这个最陡峭上升方向上的变化率。因此，范数的平方 $|\\nabla f|^2$ 代表了这个最大变化率的平方。它是 $M$ 上的一个标量场，在每一点量化了 $f$ 的最大可能方向导数的平方，其中方向导数是相对于由度量 $g$ 决定的弧长来定义的。", "answer": "$$\n\\boxed{\\frac{x^8-6x^6y^2+x^6+9x^4y^4+9x^4y^2}{1+x^2+y^2} + \\frac{16x^3y}{(1+x^2+y^2)^2} + \\frac{4(x^2+y^2)}{(1+x^2+y^2)^3}}\n$$", "id": "3071960"}]}
{"hands_on_practices": [{"introduction": "控制收敛定理在概率论中有着基石般的作用，它为我们连接理论期望与实际可测量的、有界的结果提供了桥梁。这个练习 [@problem_id:1397182] 将通过一个金融风险管理的思想实验，帮助你理解如何在一个截断的随机变量序列上应用此定理。当截断的阈值趋于无穷时，其期望会收敛到原始变量的期望，前提是原始变量是可积的。", "problem": "在一个量化金融模型中，一个交易算法的每日利润被建模为一个随机变量 $X$，它定义在一个概率空间 $(\\Omega, \\mathcal{F}, P)$ 上。该算法被认为是稳定的，并且其期望绝对每日利润已知是有限的，这在数学上表示为 $E[|X|] < \\infty$。\n\n为了控制极端的损失或收益，实施了一个被称为“熔断机制”的风险管理系统。对于任意选定的正整数阈值 $n$，系统按如下方式记录每日利润：\n- 如果实际利润的绝对值 $|X|$ 小于或等于阈值 $n$，则记录的利润为实际利润 $X$。\n- 如果实际利润的绝对值 $|X|$ 超过阈值 $n$，则当日交易暂停，记录的利润被设为 $0$。\n\n设 $Y_n$ 为当阈值设为 $n$ 时代表记录的每日利润的随机变量。我们关心的是当这个风险管理约束被放宽时，期望记录利润的行为。\n\n确定极限 $\\lim_{n \\to \\infty} E[Y_n]$ 的值。用 $X$ 的期望来表示你的答案。", "solution": "问题要求解当 $n \\to \\infty$ 时，随机变量序列 $Y_n$ 的期望的极限。我们首先需要形式化 $Y_n$ 的定义，然后分析其性质来求这个极限。\n\n首先，我们根据题述来数学化地表达随机变量 $Y_n$。$Y_n$ 的值取决于 $X$ 的值。\n根据熔断机制的规则：\n$$\nY_n = \\begin{cases} X & \\text{if } |X| \\le n \\\\ 0 & \\text{if } |X| > n \\end{cases}\n$$\n这可以用示性函数更紧凑地写出。设 $\\mathbf{1}_{\\{|X| \\le n\\}}$ 为事件“$X$ 的绝对值小于或等于 $n$”的示性函数。那么，$Y_n$ 可以表示为：\n$$\nY_n = X \\cdot \\mathbf{1}_{\\{|X| \\le n\\}}\n$$\n\n接下来，我们要求解 $\\lim_{n \\to \\infty} E[Y_n]$。为了计算这个极限，我们可以考察控制收敛定理 (Dominated Convergence Theorem, DCT) 的适用性，该定理允许在某些条件下交换极限和期望的顺序。DCT 的条件是：\n1.  随机变量序列 $Y_n$ 必须逐点（或几乎处处）收敛到一个随机变量 $Y$。\n2.  必须存在一个可积的随机变量 $Z$（即 $E[|Z|] < \\infty$），该变量控制着序列，意味着对所有 $n$ 都有 $|Y_n| \\le Z$。\n\n我们来检验第一个条件：逐点收敛。对于任意固定的结果 $\\omega \\in \\Omega$，我们考虑当 $n \\to \\infty$ 时 $Y_n(\\omega)$ 的极限。设 $x = X(\\omega)$ 是随机变量 $X$ 对于此结果的取值。由于 $x$ 是一个有限实数，我们总能找到一个足够大的正整数 $N$，使得 $|x| \\le N$。对于任意 $n \\ge N$，条件 $|X(\\omega)| \\le n$ 都将为真。根据 $Y_n$ 的定义，这意味着对所有 $n \\ge N$，都有 $Y_n(\\omega) = X(\\omega)$。因此，当 $n \\to \\infty$ 时，值序列 $Y_n(\\omega)$ 收敛于 $X(\\omega)$。因为这对任意 $\\omega$ 都成立，所以我们有逐点收敛性：\n$$\n\\lim_{n \\to \\infty} Y_n = X\n$$\n\n现在，我们来检验第二个条件：控制性。我们需要找到一个可积的随机变量 $Z$，使得对所有 $n$ 都有 $|Y_n|$ 的界。我们来考察 $Y_n$ 的绝对值：\n$$\n|Y_n| = |X \\cdot \\mathbf{1}_{\\{|X| \\le n\\}}| = |X| \\cdot |\\mathbf{1}_{\\{|X| \\le n\\}}|\n$$\n示性函数 $\\mathbf{1}_{\\{|X| \\le n\\}}$ 只能取 0 或 1。因此，其绝对值总是小于或等于 1。这导出了以下不等式：\n$$\n|Y_n| = |X| \\cdot \\mathbf{1}_{\\{|X| \\le n\\}} \\le |X| \\cdot 1 = |X|\n$$\n这个不等式对所有 $n$ 均成立。所以，我们可以选择控制随机变量为 $Z = |X|$。题干指出，期望绝对每日利润是有限的，这正是条件 $E[|X|] < \\infty$。因此，我们的控制随机变量 $Z = |X|$ 是可积的。\n\n控制收敛定理的两个条件都已满足。我们现在可以应用该定理来交换极限与期望的运算顺序：\n$$\n\\lim_{n \\to \\infty} E[Y_n] = E\\left[\\lim_{n \\to \\infty} Y_n\\right]\n$$\n利用我们得到的 $Y_n$ 的逐点极限结果：\n$$\n\\lim_{n \\to \\infty} E[Y_n] = E[X]\n$$\n因此，当熔断机制的阈值被放宽至无穷大时，期望记录利润收敛于该交易算法的真实期望利润。", "answer": "$$\\boxed{E[X]}$$", "id": "1397182"}, {"introduction": "计算复杂积分的极限是数学分析中的一个常见挑战，而直接交换极限和积分的顺序需要严格的论证。这个练习 [@problem_id:1450533] 展示了如何通过寻找一个合适的“控制”函数来应用控制收敛定理。掌握使用不等式（如本题中的 $|\\sin y| \\leq |y|$）来构造可积控制函数是运用此定理解决实际问题的关键技巧。", "problem": "考虑定义在区间 $[0, \\infty)$ 上的实值函数序列 $\\{f_n\\}_{n=1}^\\infty$，其公式为：\n$$ f_n(x) = \\frac{n \\sin(x/n)}{1+x^3} $$\n你的任务是计算以下极限的值：\n$$ \\lim_{n \\to \\infty} \\int_0^\\infty f_n(x) \\, dx $$\n请以单个闭式解析表达式的形式给出该极限的精确值。", "solution": "我们分析被积函数的逐点极限，并通过控制收敛定理来证明极限和积分可以交换顺序。\n\n对于每个固定的 $x \\geq 0$，\n$$\n\\lim_{n \\to \\infty} n \\sin\\!\\left(\\frac{x}{n}\\right) = x,\n$$\n因为当 $y \\to 0$ 时，$\\sin y \\sim y$。因此，\n$$\n\\lim_{n \\to \\infty} f_{n}(x) = \\lim_{n \\to \\infty} \\frac{n \\sin(x/n)}{1+x^{3}} = \\frac{x}{1+x^{3}} \\coloneqq f(x).\n$$\n为证明可以将极限移到积分号内的合理性，我们使用不等式 $|\\sin y| \\leq |y|$，可得\n$$\n|f_{n}(x)| = \\left|\\frac{n \\sin(x/n)}{1+x^{3}}\\right| \\leq \\frac{x}{1+x^{3}} \\coloneqq g(x).\n$$\n我们证明 $g$ 在 $[0,\\infty)$ 上是可积的。事实上，\n$$\n\\int_{0}^{1} g(x)\\,dx \\leq \\int_{0}^{1} x\\,dx = \\frac{1}{2}, \\quad \\int_{1}^{\\infty} g(x)\\,dx \\leq \\int_{1}^{\\infty} \\frac{x}{x^{3}}\\,dx = \\int_{1}^{\\infty} \\frac{dx}{x^{2}} = 1.\n$$\n因此 $g \\in L^{1}([0,\\infty))$，且根据控制收敛定理，\n$$\n\\lim_{n \\to \\infty} \\int_{0}^{\\infty} f_{n}(x)\\,dx = \\int_{0}^{\\infty} \\lim_{n \\to \\infty} f_{n}(x)\\,dx = \\int_{0}^{\\infty} \\frac{x}{1+x^{3}}\\,dx.\n$$\n\n我们现在计算 $I \\coloneqq \\int_{0}^{\\infty} \\frac{x}{1+x^{3}}\\,dx$。使用 $1+x^{3}=(x+1)(x^{2}-x+1)$ 进行部分分式分解：\n$$\n\\frac{x}{1+x^{3}} = \\frac{Ax+B}{x^{2}-x+1} + \\frac{C}{x+1}.\n$$\n解出 $A,B,C$ 得 $A=\\frac{1}{3}$，$B=\\frac{1}{3}$，$C=-\\frac{1}{3}$，因此\n$$\n\\frac{x}{1+x^{3}} = \\frac{1}{3}\\,\\frac{x+1}{x^{2}-x+1} - \\frac{1}{3}\\,\\frac{1}{x+1}.\n$$\n逐项积分。对于第一项，将 $x^{2}-x+1$ 写成 $(x-\\frac{1}{2})^{2}+\\frac{3}{4}$ 并分解\n$$\n\\int \\frac{x+1}{x^{2}-x+1}\\,dx = \\frac{1}{2}\\int \\frac{2x-1}{x^{2}-x+1}\\,dx + \\frac{3}{2}\\int \\frac{dx}{x^{2}-x+1}.\n$$\n这得到\n$$\n\\int \\frac{x+1}{x^{2}-x+1}\\,dx = \\frac{1}{2}\\ln(x^{2}-x+1) + \\sqrt{3}\\,\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right) + C.\n$$\n另外，\n$$\n\\int \\frac{dx}{x+1} = \\ln(x+1) + C.\n$$\n因此，$\\frac{x}{1+x^{3}}$ 的一个原函数是\n$$\nF(x) = \\frac{1}{3}\\left[\\frac{1}{2}\\ln(x^{2}-x+1) + \\sqrt{3}\\,\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right)\\right] - \\frac{1}{3}\\ln(x+1),\n$$\n即\n$$\nF(x) = \\frac{1}{6}\\ln(x^{2}-x+1) - \\frac{1}{3}\\ln(x+1) + \\frac{\\sqrt{3}}{3}\\,\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right).\n$$\n计算从 $0$ 到 $\\infty$ 的定积分。当 $x \\to \\infty$ 时，对数组合满足\n$$\n\\frac{1}{6}\\ln(x^{2}-x+1) - \\frac{1}{3}\\ln(x+1) = \\frac{1}{6}\\ln\\!\\left(\\frac{x^{2}-x+1}{(x+1)^{2}}\\right) \\to \\frac{1}{6}\\ln(1)=0,\n$$\n并且 $\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right) \\to \\frac{\\pi}{2}$，所以\n$$\n\\lim_{x \\to \\infty} F(x) = \\frac{\\sqrt{3}}{3}\\cdot \\frac{\\pi}{2} = \\frac{\\sqrt{3}\\,\\pi}{6}.\n$$\n在 $x=0$ 处，\n$$\nF(0) = \\frac{1}{6}\\ln(1) - \\frac{1}{3}\\ln(1) + \\frac{\\sqrt{3}}{3}\\,\\arctan\\!\\left(-\\frac{1}{\\sqrt{3}}\\right) = -\\frac{\\sqrt{3}}{3}\\cdot \\frac{\\pi}{6} = -\\frac{\\sqrt{3}\\,\\pi}{18}.\n$$\n因此\n$$\nI = F(\\infty) - F(0) = \\frac{\\sqrt{3}\\,\\pi}{6} - \\left(-\\frac{\\sqrt{3}\\,\\pi}{18}\\right) = \\frac{4\\sqrt{3}\\,\\pi}{18} = \\frac{2\\sqrt{3}\\,\\pi}{9}.\n$$\n\n这个值可以写成 $\\frac{2\\pi}{3\\sqrt{3}}$。因此，\n$$\n\\lim_{n \\to \\infty} \\int_{0}^{\\infty} \\frac{n \\sin(x/n)}{1+x^{3}}\\,dx = \\int_{0}^{\\infty} \\frac{x}{1+x^{3}}\\,dx = \\frac{2\\pi}{3\\sqrt{3}}.\n$$", "answer": "$$\\boxed{\\frac{2\\pi}{3\\sqrt{3}}}$$", "id": "1450533"}, {"introduction": "控制收敛定理的强大之处在于，它甚至适用于被积函数序列的逐点极限不连续的情况。这个练习 [@problem_id:2322463] 提供了一个绝佳的例子，其中极限函数在某些点上是不连续的，但我们依然可以交换极限和积分的顺序。通过解决这个问题，你将体会到控制收敛定理相对于要求一致收敛等更强条件的定理的优越性。", "problem": "考虑在区间 $[0, \\infty)$ 上为 $n \\in \\{1, 2, 3, \\dots\\}$ 定义的实值函数序列 $f_n(x)$，其表达式为\n$$ f_n(x) = \\frac{\\arctan(x)}{1+x^n} $$\n计算当 $n$ 趋于无穷大时，该函数序列积分的极限。即，求下列表达式的值：\n$$ \\lim_{n \\to \\infty} \\int_0^\\infty \\frac{\\arctan(x)}{1+x^n} \\, dx $$\n请以单个闭式解析表达式的形式给出您的答案。", "solution": "我们分析 $f_{n}(x)=\\frac{\\arctan(x)}{1+x^{n}}$ 在 $[0,\\infty)$ 上的逐点极限。对于 $x\\in[0,1)$，当 $n\\to\\infty$ 时，我们有 $x^{n}\\to 0$，因此\n$$\n\\lim_{n\\to\\infty}f_{n}(x)=\\arctan(x).\n$$\n在 $x=1$ 处，对所有 $n$，$f_{n}(1)=\\frac{\\arctan(1)}{2}=\\frac{\\pi}{8}$，所以逐点极限等于 $\\frac{\\pi}{8}$。对于 $x>1$，$x^{n}\\to\\infty$，因此\n$$\n\\lim_{n\\to\\infty}f_{n}(x)=0.\n$$\n因此，逐点极限 $f(x)$ 由 $f(x)=\\arctan(x)$（对于 $0\\leq x<1$），$f(1)=\\frac{\\pi}{8}$，以及 $f(x)=0$（对于 $x>1$）给出。\n\n为了证明可以交换极限和积分的顺序，我们构造一个与 $n$ 无关的可积控制函数（对于所有 $n\\geq 2$）。对于 $x\\in(0,1)$，由于 $1+x^n > 1$，我们有\n$$\n0\\leq f_{n}(x)=\\frac{\\arctan(x)}{1+x^n}\\leq \\arctan(x).\n$$\n对于 $x\\geq 1$ 和 $n\\geq 2$，我们有 $1+x^{n}\\geq 1+x^{2}$，因此\n$$\n0\\leq f_{n}(x)=\\frac{\\arctan(x)}{1+x^n}\\leq \\frac{\\arctan(x)}{1+x^{2}}\\leq \\frac{\\pi/2}{1+x^{2}}.\n$$\n定义\n$$\ng(x)=\\begin{cases}\n\\arctan(x), & 0\\leq x<1,\\\\\n\\frac{\\pi/2}{1+x^2}, & x\\geq 1,\n\\end{cases}\n$$\n该函数在 $[0,\\infty)$ 上可积，并且对于所有 $x\\geq 0$ 和所有 $n\\geq 2$ 满足 $0\\leq f_{n}(x)\\leq g(x)$。根据应用于序列尾部 $\\{f_{n}\\}_{n\\geq 2}$ 的控制收敛定理，我们可以将极限移到积分号内：\n$$\n\\lim_{n\\to\\infty}\\int_{0}^{\\infty}f_{n}(x)\\,dx=\\int_{0}^{\\infty} \\lim_{n\\to\\infty} f_{n}(x)\\,dx=\\int_{0}^{\\infty} f(x)\\,dx.\n$$\n因为单点上的值不影响积分，所以上式等于\n$$\n\\int_{0}^{1}\\arctan(x)\\,dx.\n$$\n我们使用分部积分法计算该积分，令 $u=\\arctan(x)$，$dv=dx$，则 $du=\\frac{dx}{1+x^{2}}$ 且 $v=x$：\n$$\n\\int_{0}^{1}\\arctan(x)\\,dx=\\left[x\\,\\arctan(x)\\right]_{0}^{1}-\\int_{0}^{1}\\frac{x}{1+x^{2}}\\,dx.\n$$\n剩下的积分计算如下：\n$$\n\\int_{0}^{1}\\frac{x}{1+x^{2}}\\,dx=\\frac{1}{2}\\int_{0}^{1}\\frac{2x}{1+x^{2}}\\,dx=\\frac{1}{2}\\left[\\ln(1+x^{2})\\right]_{0}^{1}=\\frac{1}{2}\\ln 2.\n$$\n另外，$\\left[x\\,\\arctan(x)\\right]_{0}^{1}=1\\cdot\\frac{\\pi}{4}-0=\\frac{\\pi}{4}$。因此，\n$$\n\\int_{0}^{1}\\arctan(x)\\,dx=\\frac{\\pi}{4}-\\frac{1}{2}\\ln 2.\n$$\n因此，\n$$\n\\lim_{n\\to\\infty}\\int_{0}^{\\infty}\\frac{\\arctan(x)}{1+x^{n}}\\,dx=\\frac{\\pi}{4}-\\frac{1}{2}\\ln 2.\n$$", "answer": "$$\\boxed{\\frac{\\pi}{4}-\\frac{1}{2}\\ln 2}$$", "id": "2322463"}]}
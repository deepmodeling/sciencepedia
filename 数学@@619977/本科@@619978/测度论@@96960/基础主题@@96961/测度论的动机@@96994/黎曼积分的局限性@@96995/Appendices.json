{"hands_on_practices": [{"introduction": "黎曼积分在处理高度不连续函数时会遇到困难。本练习 [@problem_id:1429259] 通过一个在稠密的二进有理数点集上取值为1，在其他点上取值为0的函数，来具体展示这一局限。通过计算其上积分和下积分，你将直面黎曼积分失效的一个经典案例，并理解为何需要更强大的积分理论。", "problem": "在实分析中，黎曼积分是通过上和与下和来定义的。在处理高度不连续的函数时，其局限性就显现出来了。考虑一个这样的函数 $f: [0, 1] \\to \\mathbb{R}$，它是基于二进有理数集构造的。\n\n如果一个数 $x$ 可以表示为 $\\frac{k}{2^n}$ 的形式，其中 $k$ 是整数，$n$ 是非负整数，则称 $x$ 为**二进有理数**。\n\n函数 $f(x)$ 在区间 $[0, 1]$ 上的定义如下：\n$$\nf(x) = \\begin{cases} \n1 & \\text{如果 } x \\text{ 是二进有理数} \\\\\n0 & \\text{如果 } x \\text{ 不是二进有理数} \n\\end{cases}\n$$\n\n令 $L = \\underline{\\int_0^1} f(x) \\, dx$ 表示 $f$ 在区间 $[0,1]$ 上的黎曼下积分，$U = \\overline{\\int_0^1} f(x) \\, dx$ 表示其黎曼上积分。\n\n计算黎曼下积分和上积分的值。将你的答案表示为行矩阵 $\\begin{pmatrix} L & U \\end{pmatrix}$。", "solution": "定义二进有理数集为 $D=\\{x\\in[0,1]: x=\\frac{k}{2^{n}}\\text{，对于某些整数 }k,n\\text{ 且 }n\\geq 0\\}$。该函数为 $f(x)=1$ 如果 $x\\in D$，$f(x)=0$ 如果 $x\\notin D$。\n\n首先，证明 $D$ 在 $[0,1]$ 中是稠密的。设 $(a,b)\\subset[0,1]$ 且 $a<b$。选择 $n\\in\\mathbb{N}$ 使得 $(b-a)2^{n}>1$。根据阿基米德性质，存在一个整数 $k$ 使得 $a2^{n}<k<b2^{n}$。两边除以 $2^{n}$ 得 $a<\\frac{k}{2^{n}}<b$，因此 $(a,b)\\cap D\\neq\\varnothing$。\n\n接下来，证明 $[0,1]\\setminus D$ 与每个非退化区间都有交集。因为 $D$ 是可数的，而 $[0,1]$ 中的每个区间都是不可数的，所以对于任何 $(a,b)\\subset[0,1]$ 且 $a<b$，都存在 $x\\in(a,b)$ 使得 $x\\notin D$。因此 $(a,b)\\cap([0,1]\\setminus D)\\neq\\varnothing$。\n\n考虑任意分割 $P:\\ 0=x_{0}<x_{1}<\\cdots<x_{n}=1$。对于每个长度为正的子区间 $[x_{i-1},x_{i}]$，根据 $D$ 的稠密性，其中存在一个点使得 $f=1$，所以\n$$\n\\sup\\{f(x):x\\in[x_{i-1},x_{i}]\\}=1.\n$$\n根据 $[0,1]\\setminus D$ 与每个区间都有交集这一事实，也存在一个点使得 $f=0$，所以\n$$\n\\inf\\{f(x):x\\in[x_{i-1},x_{i}]\\}=0.\n$$\n因此，对于分割 $P$ 的达布下和为\n$$\nL(P,f)=\\sum_{i=1}^{n}\\left(\\inf_{x\\in[x_{i-1},x_{i}]}f(x)\\right)(x_{i}-x_{i-1})=\\sum_{i=1}^{n}0\\cdot(x_{i}-x_{i-1})=0,\n$$\n其达布上和为\n$$\nU(P, f)=\\sum_{i=1}^{n}\\left(\\sup_{x\\in[x_{i-1},x_{i}]}f(x)\\right)(x_{i}-x_{i-1})=\\sum_{i=1}^{n}1\\cdot(x_{i}-x_{i-1})=\\sum_{i=1}^{n}(x_{i}-x_{i-1})=1.\n$$\n黎曼下积分是所有分割的下和的上确界，因此\n$$\nL=\\underline{\\int_{0}^{1}}f(x)\\,dx=\\sup_{P}L(P,f)=0.\n$$\n黎曼上积分是所有分割的上和的下确界，因此\n$$\nU=\\overline{\\int_{0}^{1}}f(x)\\,dx=\\inf_{P}U(P,f)=1.\n$$\n因此，所求的行矩阵是 $\\begin{pmatrix}0 & 1\\end{pmatrix}$。", "answer": "$$\\boxed{\\begin{pmatrix} 0 & 1 \\end{pmatrix}}$$", "id": "1429259"}, {"introduction": "一个函数在稠密点集上不连续，是否就一定意味着它不可积？本练习 [@problem_id:1308067] 将通过著名的托马函数（Thomae's function）挑战这一直觉。你将发现，尽管该函数在所有有理点上都不连续，但其黎曼积分却存在，这揭示了不连续点的“大小”而非仅仅其“密度”对可积性的关键作用。", "problem": "设函数 $H(x)$ 定义在区间 $[0, 1]$ 上。该函数是一个连续函数与另一个函数的和，后者在除 $x=0$ 外的所有有理点上都不连续。\n该函数的定义为 $H(x) = \\cos(\\frac{\\pi x}{2}) + R(x)$，其中 $R(x)$ 是“有理数高度函数”，其定义如下：\n$$\nR(x) = \\begin{cases}\n1/q, & \\text{如果 } x = p/q \\text{ 是 } (0, 1] \\text{ 中的一个有理数，且为最简分数形式，其中 } p,q \\in \\mathbb{Z}^+ \\\\\n0, & \\text{如果 } x=0 \\text{ 或 } x \\text{ 是 } [0, 1] \\text{ 中的一个无理数}\n\\end{cases}\n$$\n计算黎曼积分 $\\int_0^1 H(x) dx$ 的值。最终答案应为一个单一的封闭形式解析表达式。", "solution": "我们利用黎曼积分的线性性质将积分分成两部分：\n$$\n\\int_{0}^{1} H(x)\\,dx \\;=\\; \\int_{0}^{1} \\cos\\!\\left(\\frac{\\pi x}{2}\\right)\\,dx \\;+\\; \\int_{0}^{1} R(x)\\,dx.\n$$\n首先，我们利用微积分基本定理和反导数法则 $\\int \\cos(ax)\\,dx = \\frac{1}{a}\\sin(ax)$ 来计算连续部分：\n$$\n\\int_{0}^{1} \\cos\\!\\left(\\frac{\\pi x}{2}\\right)\\,dx\n= \\left.\\frac{2}{\\pi}\\,\\sin\\!\\left(\\frac{\\pi x}{2}\\right)\\right|_{0}^{1}\n= \\frac{2}{\\pi}\\left(\\sin\\!\\left(\\frac{\\pi}{2}\\right) - \\sin(0)\\right)\n= \\frac{2}{\\pi}.\n$$\n接着，计算有理数高度函数（Thomae函数）的积分 $\\int_{0}^{1} R(x)\\,dx$。函数 $R$ 是有界的，满足 $0 \\leq R(x) \\leq 1$。$[0,1]$ 的每个子区间都包含一个无理数，在这些点上 $R$ 的值为 $0$，因此 $R$ 在任何子区间上的下确界都是 $0$。因此，所有的下和都为 $0$，这意味着黎曼下积分为 $0$。\n\n为了证明黎曼上积分为 $0$，固定 $\\varepsilon>0$。选择 $N\\in\\mathbb{N}$ 使得 $\\frac{1}{N}<\\frac{\\varepsilon}{2}$。令 $S_{N}$ 为 $[0,1]$ 中，其最简分母至多为 $N$ 的有理数组成的有限集。构建一个划分，将 $S_{N}$ 中的每个点都隔离在各自的子区间内，并选择这些子区间，使其长度之和小于 $\\frac{\\varepsilon}{2}$。在其余的子区间上，任何有理数的最简分母都大于 $N$，因此在这些点上 $R(x)\\leq \\frac{1}{N}$，并且 $R$ 在每个这样的子区间上的上确界至多为 $\\frac{1}{N}$。因此，这些剩余子区间对上和的贡献至多为 $\\frac{1}{N}\\cdot 1<\\frac{\\varepsilon}{2}$。被隔离的子区间的贡献至多是它们的总长度乘以界限 $1$，该值小于 $\\frac{\\varepsilon}{2}$。因此上和小于 $\\varepsilon$，又因为 $\\varepsilon>0$ 是任意的，所以黎曼上积分为 $0$。因此，\n$$\n\\int_{0}^{1} R(x)\\,dx = 0.\n$$\n将两部分结合起来得到\n$$\n\\int_{0}^{1} H(x)\\,dx \\;=\\; \\frac{2}{\\pi} + 0 \\;=\\; \\frac{2}{\\pi}.\n$$", "answer": "$$\\boxed{\\frac{2}{\\pi}}$$", "id": "1308067"}, {"introduction": "我们已经看到，函数的黎曼可积性取决于其不连续点的精细结构。本练习 [@problem_id:1429261] 对托马函数进行了一个微小但关键的修改：将它在无理数点上的值从0改为一个非零常数。通过分析这一改动如何破坏其可积性，你将深刻理解为何改变一个在“测度为1”的集合上的函数值，会对黎曼积分产生致命影响。", "problem": "在信号处理的研究中，一些理论模型会表现出病态行为。考虑一个这样的信号模型 $f(t)$，它定义在时间区间 $t \\in [0, 1]$ 上。信号的值取决于时间点 $t$ 是有理数还是无理数。\n\n函数 $f: [0, 1] \\to \\mathbb{R}$ 定义如下：\n$$\nf(t) = \\begin{cases}\n\\frac{1}{3} & \\text{若 } t \\text{ 是无理数} \\\\\n\\frac{1}{q} & \\text{若 } t = \\frac{p}{q} \\text{ 是最简有理数，其中 } p, q \\text{ 为整数且 } q > 0\n\\end{cases}\n$$\n例如，$f(\\sqrt{2}/2) = 1/3$，$f(3/4) = 1/4$，以及 $f(0) = f(0/1) = 1$。\n\n你的任务是确定该函数 $f$ 在区间 $[0, 1]$ 上的黎曼下积分和黎曼上积分的值。请将你的答案表示为形如 $\\begin{pmatrix} L & U \\end{pmatrix}$ 的单行矩阵，其中 $L$ 是黎曼下积分的值，$U$ 是黎曼上积分的值。", "solution": "我们通过达布和来分析黎曼下积分和上积分。对于 $[0,1]$ 的一个分割 $P=\\{x_{0},x_{1},\\dots,x_{n}\\}$，其中 $x_{0}=0<x_{1}<\\dots<x_{n}=1$，对每个子区间 $I_{i}=[x_{i-1},x_{i}]$ 定义达布下和与上和为\n$$\nL(f,P)=\\sum_{i=1}^{n} m_{i}\\,(x_{i}-x_{i-1}),\\quad m_{i}=\\inf_{x\\in I_{i}} f(x),\n$$\n$$\nU(f,P)=\\sum_{i=1}^{n} M_{i}\\,(x_{i}-x_{i-1}),\\quad M_{i}=\\sup_{x\\in I_{i}} f(x).\n$$\n黎曼下积分是 $L=\\sup_{P}L(f,P)$，黎曼上积分是 $U=\\inf_{P}U(f,P)$。\n\n首先，我们证明在任何非退化区间 $I\\subset[0,1]$ 上，$\\inf_{x\\in I} f(x)=0$。令 $I=(a,b)$ 且 $b-a>0$。固定 $N\\in\\mathbb{N}$。选择一个素数 $p$ 使得 $p>\\max\\{N,3/(b-a)\\}$。那么开区间 $(ap,bp)$ 至少包含 $p(b-a)-1>2$ 个整数。在这些整数中，至多有一个是 $p$ 的倍数，因此存在一个整数 $k$ 使得 $a<k/p<b$ 且 $\\gcd(k,p)=1$。因此 $x=k/p\\in I$ 是一个分母为 $p$ 的最简有理数，所以 $f(x)=1/p<1/N$。由于 $N$ 是任意的，我们得到 $\\inf_{x\\in I} f(x)=0$。因此，对于任何分割 $P$，每个子区间 $I_{i}$ 的长度都为正，故 $m_{i}=0$，所以 $L(f,P)=0$。对所有分割取上确界可得\n$$\nL=\\sup_{P}L(f,P)=0.\n$$\n\n接下来，我们对黎曼上积分进行界定。注意到对于任何区间 $I\\subset[0,1]$，由于无理数是稠密的并且对于所有无理数 $x$ 有 $f(x)=\\frac{1}{3}$，我们对于每个子区间 $I_i$ 都有 $M_{i}\\geq\\frac{1}{3}$，因此对于任何分割 $P$：\n$$\nU(f,P)=\\sum_{i=1}^{n} M_{i}\\,(x_{i}-x_{i-1})\\geq \\frac{1}{3}\\sum_{i=1}^{n}(x_{i}-x_{i-1})=\\frac{1}{3}.\n$$\n因此 $U\\geq \\frac{1}{3}$。\n\n为了证明 $U\\leq \\frac{1}{3}$，固定 $\\varepsilon>0$ 并选择一个足够小的 $\\delta>0$ 以使得 $\\frac{5}{3}\\delta<\\varepsilon$ 且 $0<\\delta<\\frac{1}{4}$。考虑包含点 $0,\\delta,\\frac{1}{2}-\\delta,\\frac{1}{2}+\\delta,1-\\delta,1$ 的分割（并可选择性地进一步细分其余部分）。将五个连续的子区间表示为\n$$\nI_{1}=[0,\\delta],\\quad I_{2}=[\\delta,\\tfrac{1}{2}-\\delta],\\quad I_{3}=[\\tfrac{1}{2}-\\delta,\\tfrac{1}{2}+\\delta],\\quad I_{4}=[\\tfrac{1}{2}+\\delta,1-\\delta],\\quad I_{5}=[1-\\delta,1].\n$$\n在 $I_{1}$ 和 $I_{5}$ 上，每个区间都包含一个 $q=1$ 的点（即 $0$ 和 $1$），所以 $M_{1}=M_{5}=1$。在 $I_{3}$ 上，点 $\\tfrac{1}{2}$ 给出 $q=2$，所以 $M_{3}=\\frac{1}{2}$。在 $I_{2}$ 和 $I_{4}$ 上，没有 $q=1$ 或 $q=2$ 的点，所以所有有理数值都满足 $f(x)\\leq \\frac{1}{3}$，而无理数给出 $f(x)=\\frac{1}{3}$；因此 $M_{2}=M_{4}=\\frac{1}{3}$。因此，对于这个分割，\n$$\nU(f,P)\\leq 1\\cdot|I_{1}|+\\frac{1}{3}\\cdot|I_{2}|+\\frac{1}{2}\\cdot|I_{3}|+\\frac{1}{3}\\cdot|I_{4}|+1\\cdot|I_{5}|.\n$$\n使用 $|I_{1}|=\\delta$，$|I_{2}|=\\frac{1}{2}-2\\delta$，$|I_{3}|=2\\delta$，$|I_{4}|=\\frac{1}{2}-2\\delta$，$|I_{5}|=\\delta$，我们计算\n$$\nU(f,P)\\leq \\delta+\\frac{1}{3}\\Big(\\frac{1}{2}-2\\delta\\Big)+\\frac{1}{2}(2\\delta)+\\frac{1}{3}\\Big(\\frac{1}{2}-2\\delta\\Big)+\\delta\n= \\frac{1}{3}+\\frac{5}{3}\\delta.\n$$\n根据 $\\delta$ 的选择，这个值小于 $\\frac{1}{3}+\\varepsilon$。由于 $\\varepsilon>0$ 是任意的，因此可得 $U\\leq \\frac{1}{3}$。结合 $U\\geq \\frac{1}{3}$，我们得出结论\n$$\nU=\\frac{1}{3}.\n$$\n\n因此，黎曼下积分和上积分分别为 $L=0$ 和 $U=\\frac{1}{3}$。", "answer": "$$\\boxed{\\begin{pmatrix} 0 & \\frac{1}{3} \\end{pmatrix}}$$", "id": "1429261"}]}
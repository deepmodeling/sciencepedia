{"hands_on_practices": [{"introduction": "我们从一个最直观的情景开始：信息以简单的“是/否”形式出现。这个练习利用一系列伯努利试验来演示条件期望如何根据第一次试验的结果给出最佳猜测。这个例子将巩固基于信息 $\\sigma$-代数的原子集来分解问题的思想。[@problem_id:1410778]", "problem": "考虑一系列独立的伯努利试验，其中任何一次试验成功的概率为常数 $p$，且 $0 < p < 1$。令随机变量 $X$ 表示首次成功发生的试验次数。令 $Y_1$ 为一个随机变量，表示第一次试验的结果，若第一次试验成功，则 $Y_1=1$，若失败，则 $Y_1=0$。此外，令 $\\mathcal{G} = \\sigma(Y_1)$ 是由随机变量 $Y_1$ 生成的σ-代数。\n\n求条件期望 $E[X|\\mathcal{G}]$。你的答案应为一个关于 $p$ 和 $Y_1$ 的单一闭式解析表达式。", "solution": "设 $\\{Y_{n}\\}_{n\\geq 1}$ 为成功概率为 $p$ 的独立同分布伯努利试验序列，并设 $X$ 为首次成功的试验次数，因此 $X$ 服从 $\\{1,2,\\dots\\}$ 上参数为 $p$ 的几何分布。σ-代数 $\\mathcal{G}=\\sigma(Y_{1})$ 有两个原子 $\\{Y_{1}=1\\}$ 和 $\\{Y_{1}=0\\}$，且 $E[X|\\mathcal{G}]$ 必须是 $Y_{1}$ 的函数。\n\n根据在原子上的条件期望的定义，\n$$\nE[X|\\mathcal{G}] = E[X\\,|\\,Y_{1}=1]\\cdot \\mathbf{1}_{\\{Y_{1}=1\\}} + E[X\\,|\\,Y_{1}=0]\\cdot \\mathbf{1}_{\\{Y_{1}=0\\}}.\n$$\n在 $\\{Y_{1}=1\\}$ 上，第一次试验成功，因此几乎必然有 $X=1$，所以\n$$\nE[X\\,|\\,Y_{1}=1]=1.\n$$\n在 $\\{Y_{1}=0\\}$ 上，第一次试验失败，根据试验的独立性和平稳性，从第二次试验开始的等待时间服从参数为 $p$ 的几何分布，且与 $Y_{1}$ 独立。因此\n$$\nX \\,\\big|\\, \\{Y_{1}=0\\} \\stackrel{d}{=} 1 + Z,\n$$\n其中 $Z$ 在 $\\{1,2,\\dots\\}$ 上服从参数为 $p$ 的几何分布。所以，\n$$\nE[X\\,|\\,Y_{1}=0]=1+E[Z].\n$$\n为了计算 $E[Z]$，使用级数表示\n$$\nE[Z]=\\sum_{k=1}^{\\infty} k\\,(1-p)^{k-1} p = p \\sum_{k=1}^{\\infty} k r^{k-1} \\quad \\text{其中 } r=1-p,\n$$\n以及恒等式 $\\sum_{k=1}^{\\infty} k r^{k-1} = \\frac{1}{(1-r)^{2}}$（对于 $|r|<1$），可得\n$$\nE[Z]= p \\cdot \\frac{1}{(1-(1-p))^{2}} = p \\cdot \\frac{1}{p^{2}} = \\frac{1}{p}.\n$$\n因此，\n$$\nE[X\\,|\\,Y_{1}=0]=1+\\frac{1}{p}.\n$$\n\n因为 $Y_{1}\\in\\{0,1\\}$，我们可以将条件期望写成一个关于 $Y_{1}$ 的单一函数：\n$$\nE[X|\\mathcal{G}] = 1\\cdot Y_{1} + \\left(1+\\frac{1}{p}\\right)(1-Y_{1}) = 1 + \\frac{1 - Y_{1}}{p}.\n$$\n该表达式关于 $\\sigma(Y_{1})$ 是可测的，并且与在原子上的条件期望一致，因此它就是所求的条件期望。", "answer": "$$\\boxed{1+\\frac{1-Y_{1}}{p}}$$", "id": "1410778"}, {"introduction": "在第一个练习的基础上，我们现在考虑的信息不再是简单的二元结果，而是一个可以取多个值的变量。这个关于两次掷骰子的问题，要求我们计算在已知一次掷骰结果的条件下的条件期望。它完美地阐释了 $E[Z|\\sigma(X)]$ 是随机变量 $X$ 的一个函数这一关键结论。[@problem_id:1410798]", "problem": "考虑一个概率空间 $(\\Omega, \\mathcal{F}, P)$，它为两次独立投掷一个公正的六面骰子的结果建模。设随机变量 $X: \\Omega \\to \\{1, 2, 3, 4, 5, 6\\}$ 代表第一次投掷的结果，随机变量 $Y: \\Omega \\to \\{1, 2, 3, 4, 5, 6\\}$ 代表第二次投掷的结果。随机变量 $X$ 和 $Y$ 独立同分布，对于每个 $k \\in \\{1, 2, 3, 4, 5, 6\\}$，都有 $P(X=k) = P(Y=k) = 1/6$。\n\n设 $\\sigma(X)$ 是由随机变量 $X$ 生成的σ-代数。求随机变量 $Z = \\max(X, Y)$ 关于 $\\sigma(X)$ 的条件期望，记作 $E[\\max(X,Y) | \\sigma(X)]$。\n\n将答案表示为关于随机变量 $X$ 的闭式解析表达式。", "solution": "我们要求 $Z=\\max(X,Y)$ 关于 $\\sigma(X)$ 的条件期望，其中 $X$ 和 $Y$ 在 $\\{1,2,3,4,5,6\\}$ 上独立且均匀分布。因为 $\\sigma(X)$ 是由 $X$ 生成的，所以条件期望 $E[\\max(X,Y)\\mid\\sigma(X)]$ 必须是一个 $X$-可测函数。根据关于 $\\sigma(X)$ 的条件期望的定义并利用独立性，存在一个函数 $g$ 使得\n$$\nE[\\max(X,Y)\\mid\\sigma(X)] = g(X), \\quad \\text{with } g(x) = E[\\max(x,Y)] \\text{ for each } x\\in\\{1,\\ldots,6\\}.\n$$\n固定 $x\\in\\{1,\\ldots,6\\}$。因为 $Y$ 在 $\\{1,\\ldots,6\\}$ 上均匀分布且独立于 $X$，\n$$\ng(x) = \\sum_{y=1}^{6} \\max(x,y) P(Y=y) = \\frac{1}{6}\\left(\\sum_{y=1}^{x} x \\;+\\; \\sum_{y=x+1}^{6} y\\right).\n$$\n第一个和式为 $x$ 个 $x$ 之和，而第二个和式则对 $y>x$ 的 $y$ 求和。因此，\n$$\ng(x) = \\frac{1}{6}\\left( x\\cdot x \\;+\\; \\sum_{y=1}^{6} y \\;-\\; \\sum_{y=1}^{x} y \\right).\n$$\n使用恒等式 $\\sum_{y=1}^{n} y = \\frac{n(n+1)}{2}$，我们有 $\\sum_{y=1}^{6} y = \\frac{6\\cdot 7}{2} = 21$ 以及 $\\sum_{y=1}^{x} y = \\frac{x(x+1)}{2}$。因此，\n$$\ng(x) = \\frac{1}{6}\\left( x^{2} + 21 - \\frac{x(x+1)}{2} \\right)\n= \\frac{1}{6}\\left(21 + \\frac{x^{2}-x}{2}\\right)\n= \\frac{x^{2} - x + 42}{12}.\n$$\n故，\n$$\nE[\\max(X,Y)\\mid \\sigma(X)] = g(X) = \\frac{X^{2} - X + 42}{12}.\n$$\n这是一个 $X$-可测（因此也是 $\\sigma(X)$-可测）的函数，并且根据其构造，它满足条件期望的定义性质。", "answer": "$$\\boxed{\\frac{X^{2}-X+42}{12}}$$", "id": "1410798"}, {"introduction": "最后，我们从离散随机变量过渡到连续随机变量。这个练习使用一个直观的几何设置——从一个三角形区域中均匀选取一个点——来探讨当信息本身也是一个连续变量时的条件期望。它引入了强大的“切片”方法，通过对联合分布进行切片来寻找条件分布，为平均过程提供了几何解释。[@problem_id:1410812]", "problem": "在平面上的一个三角形区域 $T$ 中随机选取一个点，其坐标为 $(X,Y)$。该三角形的顶点位于 $(0,0)$、$(2,0)$ 和 $(2,1)$。点的选取遵循该区域面积上的均匀概率分布。令 $X$ 和 $Y$ 为所选点坐标对应的随机变量。\n\n您的任务是求随机变量 $X$ 关于由随机变量 $Y$ 生成的σ-代数的条件期望，记为 $E[X|\\sigma(Y)]$。最终答案应表示为随机变量 $Y$ 的函数。", "solution": "令 $T$ 为顶点是 $(0,0)$、$(2,0)$ 和 $(2,1)$ 的三角形。其区域可以由不等式 $0 \\leq x \\leq 2$ 和 $0 \\leq y \\leq \\frac{x}{2}$ 描述。在 $T$ 上的均匀分布其联合密度函数为：当 $(x,y)\\in T$ 时，$f_{X,Y}(x,y)=c$；否则 $f_{X,Y}(x,y)=0$，其中 $c$ 是归一化常数。我们不需要 $c$ 的具体值，因为它在计算条件密度时会被消去。\n\n$Y$ 的支撑集由 $T$ 的几何形状决定：对于一个固定的 $y$，允许的 $x$ 满足 $x \\geq 2y$ 和 $x \\leq 2$，因此 $Y$ 在 $[0,1]$ 中取值。$Y$ 的边际密度函数是\n$$\nf_{Y}(y)=\\int_{-\\infty}^{\\infty} f_{X,Y}(x,y)\\,dx=\\int_{2y}^{2} c\\,dx=c\\,(2-2y), \\quad 0 \\leq y \\leq 1.\n$$\n因此，在给定 $Y=y$ 的条件下，$X$ 的条件密度函数是\n$$\nf_{X|Y}(x|y)=\\frac{f_{X,Y}(x,y)}{f_{Y}(y)}=\\frac{c}{c\\,(2-2y)}=\\frac{1}{2-2y}, \\quad 2y \\leq x \\leq 2.\n$$\n因此，对于 $0 \\leq y \\leq 1$，$X|Y=y$ 在 $[2y,2]$ 上服从均匀分布，其条件期望是该区间的中点：\n$$\nE[X \\mid Y=y]=\\int_{2y}^{2} x \\,\\frac{1}{2-2y}\\,dx=\\frac{1}{2-2y}\\left[\\frac{x^{2}}{2}\\right]_{x=2y}^{x=2}\n=\\frac{1}{2-2y}\\cdot \\frac{4-(2y)^{2}}{2}\n=\\frac{2-2y^{2}}{2-2y}\n=1+y.\n$$\n根据关于 $\\sigma(Y)$ 的条件期望的定义，存在一个波莱尔可测函数 $g$，使得 $E[X \\mid \\sigma(Y)]=g(Y)$ 几乎必然成立，其中 $g(y)=E[X \\mid Y=y]$。因此，\n$$\nE[X \\mid \\sigma(Y)]=1+Y \\quad \\text{almost surely}.\n$$", "answer": "$$\\boxed{1+Y}$$", "id": "1410812"}]}
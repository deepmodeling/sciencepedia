{"hands_on_practices": [{"introduction": "理论学习之后，最好的入门方法莫过于通过一个具体的例子亲手验证。本练习 [@problem_id:1425915] 提供了一个简单的、基于有限样本空间的概率模型。你的任务是从第一性原理出发，显式地计算琴生不等式 $E[\\phi(X)|\\mathcal{G}] \\ge \\phi(E[X|\\mathcal{G}])$ 的两边，从而直观地理解其含义并验证其成立。", "problem": "考虑一个具有有限个状态的系统的简单概率模型。样本空间为 $\\Omega = \\{\\omega_1, \\omega_2, \\omega_3, \\omega_4\\}$。$\\Omega$ 的幂集上的概率测度 $P$ 由基本事件的概率定义如下：$P(\\{\\omega_1\\}) = \\frac{1}{8}$，$P(\\{\\omega_2\\}) = \\frac{1}{8}$，$P(\\{\\omega_3\\}) = \\frac{1}{4}$ 以及 $P(\\{\\omega_4\\}) = \\frac{1}{2}$。\n\n在此空间上定义了一个实值随机变量 $X$ 如下：$X(\\omega_1) = 1$，$X(\\omega_2) = 2$，$X(\\omega_3) = 3$ 以及 $X(\\omega_4) = 4$。\n\n关于系统的信息是粗粒度的，我们只观察两个不相交事件中的哪一个发生了：$A_1 = \\{\\omega_1, \\omega_2\\}$ 或 $A_2 = \\{\\omega_3, \\omega_4\\}$。这个观测结构由子$\\sigma$-代数 $\\mathcal{G} = \\{\\emptyset, A_1, A_2, \\Omega\\}$ 所捕捉，该代数由划分 $\\{A_1, A_2\\}$ 生成。\n\n我们关心两个派生的随机变量。第一个是 $Y_1 = E[e^X|\\mathcal{G}]$，即在给定 $\\mathcal{G}$ 的条件下 $e^X$ 的条件期望。第二个是 $Y_2 = e^{E[X|\\mathcal{G}]}$，即在给定 $\\mathcal{G}$ 的条件下 $X$ 的条件期望的指数。\n\n确定随机变量 $D = Y_1 - Y_2$ 对于事件集 $A_2$ 中的任意结果的值。", "solution": "我们有一个有限概率空间 $\\Omega=\\{\\omega_{1},\\omega_{2},\\omega_{3},\\omega_{4}\\}$，其概率为\n$$\nP(\\{\\omega_{1}\\})=\\frac{1}{8},\\quad P(\\{\\omega_{2}\\})=\\frac{1}{8},\\quad P(\\{\\omega_{3}\\})=\\frac{1}{4},\\quad P(\\{\\omega_{4}\\})=\\frac{1}{2}.\n$$\n定义 $A_{1}=\\{\\omega_{1},\\omega_{2}\\}$ 和 $A_{2}=\\{\\omega_{3},\\omega_{4}\\}$，因此子$\\sigma$-代数 $\\mathcal{G}$ 由 $\\{A_{1},A_{2}\\}$ 生成。随机变量 $X$ 满足\n$$\nX(\\omega_{1})=1,\\quad X(\\omega_{2})=2,\\quad X(\\omega_{3})=3,\\quad X(\\omega_{4})=4.\n$$\n首先计算划分元素的概率：\n$$\nP(A_{1})=P(\\{\\omega_{1}\\})+P(\\{\\omega_{2}\\})=\\frac{1}{8}+\\frac{1}{8}=\\frac{1}{4},\\qquad P(A_{2})=P(\\{\\omega_{3}\\})+P(\\{\\omega_{4}\\})=\\frac{1}{4}+\\frac{1}{2}=\\frac{3}{4}.\n$$\n根据在有限划分上的条件期望的定义，对于任意 $\\omega\\in A_{2}$，\n$$\nY_{1}(\\omega)=E[\\exp(X)\\mid\\mathcal{G}](\\omega)=E[\\exp(X)\\mid A_{2}]\n=\\frac{\\sum_{\\omega'\\in A_{2}}\\exp(X(\\omega'))\\,P(\\{\\omega'\\})}{P(A_{2})}.\n$$\n代入在 $A_2$ 上的值：\n$$\n\\sum_{\\omega'\\in A_{2}}\\exp(X(\\omega'))\\,P(\\{\\omega'\\})\n=\\exp(3)\\cdot\\frac{1}{4}+\\exp(4)\\cdot\\frac{1}{2}=\\frac{\\exp(3)}{4}+\\frac{\\exp(4)}{2}.\n$$\n因此，\n$$\nY_{1}(\\omega)=\\frac{\\frac{\\exp(3)}{4}+\\frac{\\exp(4)}{2}}{\\frac{3}{4}}\n=\\left(\\frac{\\exp(3)+2\\exp(4)}{4}\\right)\\cdot\\frac{4}{3}\n=\\frac{\\exp(3)+2\\exp(4)}{3},\\qquad \\omega\\in A_{2}.\n$$\n接下来，对于任意 $\\omega\\in A_2$，\n$$\nY_{2}(\\omega)=\\exp\\!\\left(E[X\\mid\\mathcal{G}](\\omega)\\right)=\\exp\\!\\left(E[X\\mid A_{2}]\\right)\n=\\exp\\!\\left(\\frac{\\sum_{\\omega'\\in A_{2}}X(\\omega')\\,P(\\{\\omega'\\})}{P(A_{2})}\\right).\n$$\n计算 $X$ 在 $A_2$ 上的条件均值：\n$$\n\\sum_{\\omega'\\in A_{2}}X(\\omega')\\,P(\\{\\omega'\\})\n=3\\cdot\\frac{1}{4}+4\\cdot\\frac{1}{2}=\\frac{3}{4}+2=\\frac{11}{4},\n$$\n因此\n$$\nE[X\\mid A_{2}]=\\frac{\\frac{11}{4}}{\\frac{3}{4}}=\\frac{11}{3},\n$$\n从而\n$$\nY_{2}(\\omega)=\\exp\\!\\left(\\frac{11}{3}\\right),\\qquad \\omega\\in A_{2}.\n$$\n最后，随机变量 $D=Y_{1}-Y_{2}$ 在 $A_2$ 上为常数，其值等于\n$$\nD(\\omega)=\\frac{\\exp(3)+2\\exp(4)}{3}-\\exp\\!\\left(\\frac{11}{3}\\right),\\qquad \\omega\\in A_{2}.\n$$\n作为一致性检验，由于 $\\exp$ 是凸函数，根据 Jensen 不等式可得，在 $A_2$ 上有 $Y_{1}\\geq Y_{2}$，因此 $D(\\omega)\\geq 0$。", "answer": "$$\\boxed{\\frac{\\exp(3)+2\\exp(4)}{3}-\\exp\\!\\left(\\frac{11}{3}\\right)}$$", "id": "1425915"}, {"introduction": "条件琴生不等式的一个最重要应用是应用于凸函数 $\\phi(x) = x^2$。这个练习 [@problem_id:1425924] 将引导你利用该不等式，建立条件二阶矩和条件均值的平方之间的基本关系。这个结果是定义条件方差的基石，在统计学和随机过程等领域中至关重要。", "problem": "设 $(\\Omega, \\mathcal{F}, P)$ 是一个概率空间， $X$ 是定义在该空间上的一个随机变量，其二阶矩有限，即 $E[X^2] < \\infty$。设 $\\mathcal{G}$ 是 $\\mathcal{F}$ 的一个子 $\\sigma$-代数。我们关心由 $X$ 导出的两个随机变量之间的关系：条件二阶矩 $E[X^2|\\mathcal{G}]$ 和条件均值的平方 $(E[X|\\mathcal{G}])^2$。\n\n对于任何这样的 $X$ 和 $\\mathcal{G}$，以下哪个陈述正确地描述了这两个量之间几乎必然成立的关系？\n\nA. $E[X^2|\\mathcal{G}] < (E[X|\\mathcal{G}])^2$\n\nB. $E[X^2|\\mathcal{G}] \\le (E[X|\\mathcal{G}])^2$\n\nC. $E[X^2|\\mathcal{G}] = (E[X|\\mathcal{G}])^2$\n\nD. $E[X^2|\\mathcal{G}] \\ge (E[X|\\mathcal{G}])^2$\n\nE. 若无更多关于 $X$ 和 $\\mathcal{G}$ 的信息，则无法确定它们的关系。", "solution": "我们使用 $E[X^{2}]<\\infty$ 意味着 $X\\in L^{2}$，因此 $E[X\\mid\\mathcal{G}]$ 存在且属于 $L^{2}$，并且条件方差是良定义的。\n\n考虑条件方差\n$$\n\\operatorname{Var}(X\\mid\\mathcal{G}) \\equiv E\\big[(X-E[X\\mid\\mathcal{G}])^{2}\\mid\\mathcal{G}\\big].\n$$\n根据定义和条件期望的线性性，\n$$\n\\operatorname{Var}(X\\mid\\mathcal{G})\n=E[X^{2}\\mid\\mathcal{G}]-2\\,E\\big[X\\,E[X\\mid\\mathcal{G}]\\mid\\mathcal{G}\\big]+E\\big[(E[X\\mid\\mathcal{G}])^{2}\\mid\\mathcal{G}\\big].\n$$\n使用性质：如果 $Y$ 是 $\\mathcal{G}$-可测且可积的，则 $E[XY\\mid\\mathcal{G}]=Y\\,E[X\\mid\\mathcal{G}]$。取 $Y=E[X\\mid\\mathcal{G}]$，我们得到\n$$\nE\\big[X\\,E[X\\mid\\mathcal{G}]\\mid\\mathcal{G}\\big] = E[X\\mid\\mathcal{G}]\\,E[X\\mid\\mathcal{G}] = (E[X\\mid\\mathcal{G}])^{2}.\n$$\n因为 $E[X\\mid\\mathcal{G}]$ 是 $\\mathcal{G}$-可测的，我们还可得到\n$$\nE\\big[(E[X\\mid\\mathcal{G}])^{2}\\mid\\mathcal{G}\\big]=(E[X\\mid\\mathcal{G}])^{2}.\n$$\n因此，\n$$\n\\operatorname{Var}(X\\mid\\mathcal{G})=E[X^{2}\\mid\\mathcal{G}]-(E[X\\mid\\mathcal{G}])^{2}.\n$$\n根据定义，$\\operatorname{Var}(X\\mid\\mathcal{G})\\ge 0$ 几乎必然成立。因此，\n$$\nE[X^{2}\\mid\\mathcal{G}] \\ge (E[X\\mid\\mathcal{G}])^{2}\\quad\\text{almost surely}.\n$$\n等式几乎必然成立，当且仅当 $\\operatorname{Var}(X\\mid\\mathcal{G})=0$ 几乎必然成立，即当 $X=E[X\\mid\\mathcal{G}]$ 几乎必然成立时（例如，如果 $X$ 是 $\\mathcal{G}$-可测的）。这表明严格不等式不一定成立，等式可能出现，但不等号的方向总是 $\\ge$。等价地，这是凸函数 $t\\mapsto t^{2}$ 的条件Jensen不等式的一个实例：\n$$\n(E[X\\mid\\mathcal{G}])^{2} \\le E[X^{2}\\mid\\mathcal{G}] \\quad\\text{almost surely}.\n$$\n因此正确选项是 D。", "answer": "$$\\boxed{D}$$", "id": "1425924"}, {"introduction": "深刻理解一个不等式，不仅意味着知道它何时成立，也意味着理解它何时“取等”。这个进阶练习 [@problem_id:1425928] 旨在揭示不等式变为等式的确切条件。通过解决这个问题，你将发现等式成立的条件与随机变量相对于给定信息($\\mathcal{G}$)的可测性之间存在着深刻的联系。", "problem": "设 $(\\Omega, \\mathcal{F}, P)$ 为一个概率空间。考虑样本空间的一个可数划分 $\\{A_n\\}_{n=1}^{\\infty}$，其中每个 $A_n \\in \\mathcal{F}$ 且 $P(A_n) > 0$。令 $\\mathcal{G}$ 为由该划分生成的 sigma-代数，即 $\\mathcal{G} = \\sigma(\\{A_n\\}_{n=1}^{\\infty})$。\n\n令 $X$ 为该空间上的一个可积实值随机变量。令 $\\phi: \\mathbb{R} \\to \\mathbb{R}$ 为一个严格凸函数，并假设 $\\phi(X)$ 也是可积的。\n\n假设条件 Jensen 不等式的等号几乎必然成立，也就是说：\n$$\nE[\\phi(X) | \\mathcal{G}] = \\phi(E[X | \\mathcal{G}]) \\quad P\\text{-几乎必然。}\n$$\n\n下列哪个陈述最准确、最普遍地刻画了随机变量 $X$？\n\nA. 存在一个常数 $c \\in \\mathbb{R}$ 使得 $P(X=c)=1$。\n\nB. $X$ 与 sigma-代数 $\\mathcal{G}$ 独立。\n\nC. 存在一个 $\\mathcal{G}$-可测的随机变量 $Y$ 使得 $P(X=Y)=1$。\n\nD. 随机变量 $X$ 必须是一个离散随机变量，其取值仅来自一个可数集。\n\nE. 对于划分中的每个集合 $A_n$，$X$ 在 $A_n$ 上的条件期望为零。", "solution": "该问题要求刻画一个随机变量 $X$ 的性质，使得条件 Jensen 不等式 $E[\\phi(X) | \\mathcal{G}] = \\phi(E[X | \\mathcal{G}])$ 的等号成立，其中 $\\phi$ 是严格凸函数，$\\mathcal{G}$ 是由满足 $P(A_n)>0$ 的可数划分 $\\{A_n\\}_{n=1}^{\\infty}$ 生成的 sigma-代数。\n\n首先，我们来确定关于 sigma-代数 $\\mathcal{G} = \\sigma(\\{A_n\\}_{n=1}^{\\infty})$ 的条件期望的形式。对于任意可积随机变量 $Z$，条件期望 $E[Z|\\mathcal{G}]$ 是一个 $\\mathcal{G}$-可测的随机变量。一个随机变量是 $\\mathcal{G}$-可测的，当且仅当它在 $\\mathcal{G}$ 的每个原子上是常数。$\\mathcal{G}$ 的原子就是集合 $A_n$。因此，$E[Z|\\mathcal{G}]$ 必须是一个形式为 $\\sum_{n=1}^{\\infty} c_n \\mathbb{1}_{A_n}$ 的简单函数，其中 $\\mathbb{1}_{A_n}$ 是集合 $A_n$ 的指示函数。\n\n为了求出常数 $c_n$，我们使用条件期望的定义性质：对任意 $A \\in \\mathcal{G}$，有 $\\int_A E[Z|\\mathcal{G}] dP = \\int_A Z dP$。我们选择 $A = A_k$，其中 $k \\in \\mathbb{N}$。\n$$\n\\int_{A_k} E[Z|\\mathcal{G}] dP = \\int_{A_k} \\left(\\sum_{n=1}^{\\infty} c_n \\mathbb{1}_{A_n}\\right) dP = \\int_{A_k} c_k \\mathbb{1}_{A_k} dP = c_k P(A_k)\n$$\n并且\n$$\n\\int_{A_k} Z dP = E[Z \\mathbb{1}_{A_k}]\n$$\n令二者相等，得到 $c_k P(A_k) = E[Z \\mathbb{1}_{A_k}]$。由于 $P(A_k) > 0$，我们有 $c_k = \\frac{E[Z \\mathbb{1}_{A_k}]}{P(A_k)}$，这正是给定事件 $A_k$ 下 $Z$ 的条件期望的定义，记作 $E[Z|A_k]$。\n因此，条件期望可以写成：\n$$\nE[Z|\\mathcal{G}] = \\sum_{n=1}^{\\infty} E[Z|A_n] \\mathbb{1}_{A_n}\n$$\n\n现在，我们将此应用于给定的等式 $E[\\phi(X) | \\mathcal{G}] = \\phi(E[X | \\mathcal{G}])$。\n\n等式左边 (LHS) 是：\n$$\nE[\\phi(X)|\\mathcal{G}] = \\sum_{n=1}^{\\infty} E[\\phi(X)|A_n] \\mathbb{1}_{A_n}\n$$\n\n对于等式右边 (RHS)，我们首先求出 $E[X|\\mathcal{G}]$：\n$$\nE[X|\\mathcal{G}] = \\sum_{n=1}^{\\infty} E[X|A_n] \\mathbb{1}_{A_n}\n$$\n然后我们对其应用函数 $\\phi$。由于集合 $A_n$ 是不交的，对任意 $\\omega \\in \\Omega$，$\\omega$ 恰好属于一个 $A_k$。对于这样的 $\\omega$，$E[X|\\mathcal{G}](\\omega) = E[X|A_k]$。因此，$\\phi(E[X|\\mathcal{G}])(\\omega) = \\phi(E[X|A_k])$。这意味着我们可以将 RHS 写成：\n$$\n\\phi(E[X|\\mathcal{G}]) = \\sum_{n=1}^{\\infty} \\phi(E[X|A_n]) \\mathbb{1}_{A_n}\n$$\n\n等式 $E[\\phi(X) | \\mathcal{G}] = \\phi(E[X | \\mathcal{G}])$ 几乎必然成立，当且仅当对所有 $n$，指示函数 $\\mathbb{1}_{A_n}$ 的系数都相等。也就是说，对每个 $n \\in \\mathbb{N}$：\n$$\nE[\\phi(X)|A_n] = \\phi(E[X|A_n])\n$$\n我们对固定的 $n$ 分析这个条件。令 $P_n(\\cdot) = P(\\cdot | A_n)$ 为在 $A_n$ 上的条件概率测度。那么该方程可以用关于 $P_n$ 的期望重写为：\n$$\nE_{P_n}[\\phi(X)] = \\phi(E_{P_n}[X])\n$$\n这是在概率测度 $P_n$ 下，对随机变量 $X$ 的标准（无条件）Jensen 不等式的等号成立情况。对于一个严格凸函数 $\\phi$，等号成立当且仅当随机变量在所依据的概率测度下几乎必然是常数。\n在我们的情境中，这意味着对每个 $n$，$X$ 必须 $P_n$-几乎必然是常数。也就是说，对每个 $n$，存在一个常数 $c_n$ 使得 $P_n(X=c_n)=1$。\n根据条件概率的定义，$P(X=c_n | A_n) = 1$。这等价于 $P(\\{ \\omega \\in A_n : X(\\omega) \\neq c_n \\}) = 0$。\n\n令 $Y = \\sum_{n=1}^{\\infty} c_n \\mathbb{1}_{A_n}$。根据构造，$Y$ 是一个 $\\mathcal{G}$-可测的随机变量。我们已经证明，对每个 $n$，$X$ 在 $A_n$ 上几乎必然等于 $c_n$。\n$X$ 和 $Y$ 不相等的集合是 $S = \\{\\omega \\in \\Omega : X(\\omega) \\neq Y(\\omega)\\}$。我们可以将这个集合写成不交并：\n$$\nS = \\bigcup_{n=1}^{\\infty} \\{\\omega \\in A_n : X(\\omega) \\neq Y(\\omega)\\} = \\bigcup_{n=1}^{\\infty} \\{\\omega \\in A_n : X(\\omega) \\neq c_n\\}\n$$\n这个集合的概率是：\n$$\nP(S) = P\\left(\\bigcup_{n=1}^{\\infty} \\{\\omega \\in A_n : X(\\omega) \\neq c_n\\}\\right) = \\sum_{n=1}^{\\infty} P(\\{\\omega \\in A_n : X(\\omega) \\neq c_n\\})\n$$\n由于对每个 $n$ 都有 $P(\\{\\omega \\in A_n : X(\\omega) \\neq c_n\\}) = 0$，所以这个和也为 0。因此，$P(S)=0$，这意味着 $P(X=Y)=1$。\n\n这表明 $X$ 必须几乎必然地等于一个 $\\mathcal{G}$-可测的随机变量 $Y$。这正是选项 C 的陈述。\n\n我们来回顾一下其他选项：\nA. 存在某个常数 $c$ 使得 $P(X=c)=1$。这是我们结论中所有 $c_n$ 都相等的一种特殊情况。它不是最普遍的刻画。\nB. $X$ 与 $\\mathcal{G}$ 独立。这意味着 $E[X|\\mathcal{G}] = E[X]$（一个常数）。等式将变为 $E[\\phi(X)|\\mathcal{G}] = \\phi(E[X])$。根据我们的推导，这将意味着 $X$ 是 $\\mathcal{G}$-可测的，并且与 $\\mathcal{G}$ 独立，这意味着 $X$ 必须几乎必然是常数。这与 A 是同样受限的情况。\nD. $X$ 必须是一个离散随机变量。一个 $\\mathcal{G}$-可测变量 $Y = \\sum c_n \\mathbb{1}_{A_n}$ 是离散的（它从可数集 $\\{c_n\\}$ 中取值）。由于 $X=Y$ 几乎必然成立，$X$ 的值域除去一个测度为零的集合外也将是可数的。但是，选项 C 是一个基于可测性的更直接、更基本的刻画。离散性是一个推论。更重要的是，选项 C 正是“几乎必然 $\\mathcal{G}$-可测”的定义，而这正是本题考察的核心概念。\nE. 对每个 $n$，$E[X|A_n] = 0$。这将意味着 $E[X|\\mathcal{G}]=0$ 几乎必然成立。等式变为 $E[\\phi(X)|\\mathcal{G}] = \\phi(0)$。这是一个关于 $X$ 取值的非常特殊条件，并非 Jensen 不等式等号成立的一般性刻画。\n\n因此，最准确和最普遍的刻画是，$X$ 几乎必然地等于一个 $\\mathcal{G}$-可测的随机变量。", "answer": "$$\\boxed{C}$$", "id": "1425928"}]}
{"hands_on_practices": [{"introduction": "第一个练习旨在直观、具体地阐明塔性质的核心机制。我们将通过两种方式计算一个期望值：直接计算，以及先利用条件期望基于部分信息对随机变量进行“平滑”处理。这个练习有助于巩固一个核心思想：对这些平滑后的、或称条件化的值求平均，最终会得到原始的、总体的平均值。[@problem_id:1461118]", "problem": "某个生产过程生产一种部件，其质量特性 $U$ 是一个在区间 $[0, 1]$ 上均匀分布的随机变量。初步的质量控制检查将部件分到两个箱子中。箱子 A 用于存放 $U \\in [0, 1/2)$ 的部件，箱子 B 用于存放 $U \\in [1/2, 1]$ 的部件。\n\n一位工程师对质量特性的平方 $X = U^2$ 的期望值感兴趣。工程师唯一可用的信息是部件属于哪个箱子。该信息由 $\\sigma$-代数 $\\mathcal{G} = \\{\\emptyset, [0, 1/2), [1/2, 1], [0, 1]\\}$ 表示，这个 $\\sigma$-代数是由样本空间 $\\Omega = [0, 1]$ 划分为两个箱子而生成的。\n\n工程师定义了一个新的随机变量 $Y$，作为在给定质量检查信息的条件下 $X$ 的条件期望，即 $Y = E[X | \\mathcal{G}]$。\n\n计算这个新随机变量的期望值 $E[Y]$。", "solution": "设 $U$ 在 $[0,1]$ 上均匀分布，因此其密度函数为 $f_{U}(u)=1$（对于 $u \\in [0,1]$）且在其他情况下为 $0$。定义 $X=U^{2}$，并设 $\\mathcal{G}$ 是由划分 $[0,1/2)$ 和 $[1/2,1]$ 生成的 $\\sigma$-代数。我们所关心的随机变量是 $Y=E[X \\mid \\mathcal{G}]$。\n\n根据重期望定律（塔性质），对于任意可积随机变量 $X$ 和子 $\\sigma$-代数 $\\mathcal{G}$，\n$$\nE[E[X \\mid \\mathcal{G}]]=E[X].\n$$\n将此应用于 $X=U^{2}$ 得到\n$$\nE[Y]=E[E[U^{2} \\mid \\mathcal{G}]]=E[U^{2}].\n$$\n\n我们直接根据具有密度函数 $f_{U}$ 的连续随机变量的期望定义来计算 $E[U^{2}]$：\n$$\nE[U^{2}]=\\int_{0}^{1} u^{2} f_{U}(u)\\,du=\\int_{0}^{1} u^{2}\\,du=\\left.\\frac{u^{3}}{3}\\right|_{0}^{1}=\\frac{1}{3}.\n$$\n\n为了完整起见，可以通过在每个箱子上显式计算 $Y$ 来验证这一点。在 $A=[0,1/2)$ 上，\n$$\nE[U^{2} \\mid A]=\\frac{1}{P(A)}\\int_{0}^{1/2} u^{2}\\,du=2 \\int_{0}^{1/2} u^{2}\\,du=2 \\cdot \\frac{1}{24}=\\frac{1}{12}.\n$$\n在 $B=[1/2,1]$ 上，\n$$\nE[U^{2} \\mid B]=\\frac{1}{P(B)}\\int_{1/2}^{1} u^{2}\\,du=2 \\int_{1/2}^{1} u^{2}\\,du=2 \\cdot \\frac{7}{24}=\\frac{7}{12}.\n$$\n因此，$Y=\\frac{1}{12}$ 在 $A$ 上，$Y=\\frac{7}{12}$ 在 $B$ 上，并且使用 $P(A)=P(B)=\\frac{1}{2}$，\n$$\nE[Y]=\\frac{1}{2}\\cdot \\frac{1}{12}+\\frac{1}{2}\\cdot \\frac{7}{12}=\\frac{1}{3},\n$$\n这与使用塔性质得到的结果相符。", "answer": "$$\\boxed{\\frac{1}{3}}$$", "id": "1461118"}, {"introduction": "现在我们来解决著名的蒙提霍尔问题，这是一个经常与直觉相悖的经典脑筋急转弯。通过将问题用条件期望和一系列不断扩展的信息（$\\sigma$-代数）的形式化结构来构建，塔性质为我们提供了一条通往正确答案的严谨而清晰的路径。这个练习展示了这一数学工具如何将一个令人困惑的谜题转变为一步步的方法性计算，从而彰显其在构建逻辑论证方面的力量。[@problem_id:1461166]", "problem": "考虑一个游戏节目，我们将在一个概率空间 $(\\Omega, \\mathcal{F}, P)$ 上对其进行建模。在这个游戏中，有三扇相同的门，分别标记为 1、2 和 3。一扇门后是一辆汽车，另外两扇门后是山羊。汽车的位置是随机的。一名参赛者参与以下过程：\n\n1.  汽车的位置由一个随机变量 $C$ 决定，它在集合 $\\{1, 2, 3\\}$ 上均匀分布。\n2.  参赛者做出门的初始选择。这个选择由一个随机变量 $P_0$ 表示，它也在集合 $\\{1, 2, 3\\}$ 上均匀分布，并且与 $C$ 独立。\n3.  主持人知道汽车的位置（$C$）和参赛者的选择（$P_0$），他会打开另外一扇门，露出一只山羊。主持人打开的门是一个随机变量 $H$。主持人的选择遵循以下规则：\n    - 主持人绝不会打开参赛者选择的门（$H \\neq P_0$），也绝不会打开有汽车的门（$H \\neq C$）。\n    - 如果参赛者的初始选择 $P_0$ 是有汽车的门（$C=P_0$），主持人将从两扇藏有山羊的门中随机选择一扇打开，每种选择的概率为 $1/2$。\n    - 如果参赛者的初始选择不是有汽车的门（$C \\neq P_0$），主持人只有一扇门可以打开（即不是 $P_0$ 也不是 $C$ 的那扇门），并且他以概率 1 打开这扇门。\n4.  然后，参赛者可以选择换到剩下的那扇未打开的门。令 $S$ 表示如果参赛者决定换门时会选择的门。$S$ 是集合 $\\{1, 2, 3\\} \\setminus \\{P_0, H\\}$ 中的唯一一扇门。\n\n令 $X = \\mathbf{1}_{\\{C=S\\}}$ 为表示参赛者通过换门赢得汽车这一事件的示性随机变量。你的任务是计算通过换门获胜的概率，这个概率由期望 $E[X]$ 给出。\n\n为此，你必须明确使用条件期望的塔性质。定义 $\\mathcal{F}$ 的两个子 $\\sigma$-代数：$\\mathcal{G}_1 = \\sigma(C)$（汽车位置的信息）和 $\\mathcal{G}_2 = \\sigma(C, P_0)$（汽车位置和参赛者初始选择的信息）。\n\n通过遵循以下规定步骤计算 $E[X]$：\na) 首先，计算条件期望 $Y = E[X|\\mathcal{G}_2]$。你的结果应该是一个用随机变量 $C$ 和 $P_0$ 表示的表达式。\nb) 其次，使用你对 $Y$ 的结果来计算 $Z = E[Y|\\mathcal{G}_1]$。\nc) 最后，计算 $E[Z]$ 来求得 $E[X]$ 的值。\n\n将你的最终答案表示为最简分数形式。", "solution": "令 $X=\\mathbf{1}_{\\{C=S\\}}$。我们利用塔性质以及 $\\mathcal{G}_{1}=\\sigma(C)$ 和 $\\mathcal{G}_{2}=\\sigma(C,P_{0})$ 来计算 $E[X]$。\n\n首先，计算 $Y=E[X\\mid\\mathcal{G}_{2}] = E[\\mathbf{1}_{\\{C=S\\}}\\mid C,P_{0}]$。在给定 $(C,P_{0})$ 的条件下，唯一剩下的随机性是主持人的选择 $H$，它由所述规则支配。如果 $C=P_{0}$，那么主持人会在两扇有山羊的门之间均匀选择，而换到的门 $S$ 是另一扇有山羊的门，因此 $S\\neq C$，故 $X=0$ 几乎必然成立。如果 $C\\neq P_{0}$，那么主持人确定性地打开唯一的山羊门 $H\\notin\\{C,P_{0}\\}$，剩下的未开的门就是 $S=C$，故 $X=1$ 几乎必然成立。因此，\n$$\nY=E[X\\mid C,P_{0}]\n=\\begin{cases}\n0, & C=P_{0},\\\\\n1, & C\\neq P_{0},\n\\end{cases}\n=\\mathbf{1}_{\\{C\\neq P_{0}\\}}.\n$$\n\n其次，计算 $Z=E[Y\\mid\\mathcal{G}_{1}]=E[\\mathbf{1}_{\\{C\\neq P_{0}\\}}\\mid C]$。利用 $P_{0}$ 和 $C$ 的独立性以及 $P_{0}$ 在 $\\{1,2,3\\}$ 上的均匀分布，我们有\n$$\nZ=E[\\mathbf{1}_{\\{C\\neq P_{0}\\}}\\mid C]\n=1-P(P_{0}=C\\mid C)\n=1-P(P_{0}=C)\n=1-\\frac{1}{3}\n=\\frac{2}{3}.\n$$\n\n最后，根据塔性质，\n$$\nE[X]=E[E(X\\mid\\mathcal{G}_{2})]=E[E(Y\\mid\\mathcal{G}_{1})]=E[Z]=\\frac{2}{3}.\n$$\n因此，通过换门获胜的概率是 $\\frac{2}{3}$。", "answer": "$$\\boxed{\\frac{2}{3}}$$", "id": "1461166"}, {"introduction": "作为我们实践的结尾，我们将把塔性质应用到一个不同领域的问题上：算法分析。我们将计算随机快速排序算法（计算机科学的基石之一）所需比较次数的期望值。这个问题阐明了全期望定律（即塔性质）是如何通过在每个阶段根据随机选择的结果来分解总体期望，从而成为分析递归和随机过程的基本原则。[@problem_id:1461125]", "problem": "考虑一个包含三个不同数字的集合。我们希望使用随机化快速排序算法对这些数字进行排序。该算法的步骤如下：\n1.  从当前待排序的数字列表中，均匀随机地选择一个数字作为主元。\n2.  将主元与列表中的所有其他数字进行比较，将它们划分为两个子列表：一个包含所有小于主元的数字，另一个包含所有大于主元的数字。\n3.  然后对所有非空的子列表递归地应用此算法。当一个列表包含一个或零个元素时，递归终止，因为这样的列表已经是有序的。\n\n令 $C$ 为对最初的三个数字列表进行完全排序所执行的成对比较的总次数。计算 $C$ 的期望值。\n\n请用最简分数形式表示你的答案。", "solution": "将这三个不同的数字按升序标记为 $x_{1}<x_{2}<x_{3}$。在每次对大小为 $m$ 的子列表进行递归调用时，算法会将主元与该子列表中的所有其他元素进行比较，这会执行恰好 $m-1$ 次比较，然后对形成的（最多两个）子列表独立地进行递归。对于大小至多为 $1$ 的子列表，递归停止，它们贡献 $0$ 次比较。\n\n对于初始的大小为 $3$ 的列表，第一步划分总是执行 $2$ 次比较。主元是从 $\\{x_{1},x_{2},x_{3}\\}$ 中均匀随机选择的。\n\n- 如果主元是中位数 $x_{2}$（概率为 $\\frac{1}{3}$），划分将产生两个大小为 $1$ 和 $1$ 的子列表。这些子列表不需要进一步的比较，所以总比较次数为 $2$。\n- 如果主元是极端值 $x_{1}$ 或 $x_{3}$（概率为 $\\frac{2}{3}$），划分将产生一个空子列表和一个大小为 $2$ 的子列表。对一个大小为 $2$ 的列表进行排序恰好需要 $1$ 次比较（主元与另一个元素比较），因此总比较次数为 $2+1=3$。\n\n根据全期望定律，\n$$\nE[C]=\\frac{1}{3}\\cdot 2+\\frac{2}{3}\\cdot 3=\\frac{2}{3}+2=\\frac{8}{3}.\n$$\n因此，成对比较的总次数的期望值为 $\\frac{8}{3}$。", "answer": "$$\\boxed{\\frac{8}{3}}$$", "id": "1461125"}]}
{"hands_on_practices": [{"introduction": "这个练习探讨了概率论中的一个经典问题——赌徒破产问题。虽然这个问题可以用差分方程求解，但通过构造一个精巧的鞅并应用可选停止定理，我们可以找到一种更简洁、更强大的解法。这个实践旨在让你掌握使用鞅来计算离散时间随机游走中的命中概率的核心技巧。[@problem_id:849549]", "problem": "考虑一个一维有偏随机游走 $S_n = \\sum_{i=1}^n X_i$，其从 $S_0 = 0$ 开始。\n\n步长 $X_i$ 是独立同分布的随机变量，满足 $P(X_i = 1) = p$ 和 $P(X_i = -1) = q = 1-p$，其中 $p \\neq 1/2$。\n\n对于此随机游走，过程 $M_n = (q/p)^{S_n}$ 是一个关于自然信息流 $\\mathcal{F}_n = \\sigma(X_1, \\dots, X_n)$ 的鞅。\n\n设 $a$ 和 $b$ 为代表吸收壁的正整数。将停时 $T$ 定义为游走首次到达水平 $a$ 或水平 $-b$ 的时刻：\n$$T = \\inf\\{ n \\ge 1 : S_n = a \\text{ or } S_n = -b \\}$$\n\n使用可选停止定理于鞅 $M_n$，推导出该游走在到达水平 $-b$ 之前先到达水平 $a$ 的概率的闭式表达式。此概率记为 $P(S_T = a)$。请用 $p, q, a,$ 和 $b$ 来表示你的答案。", "solution": "1. 回顾 $M_n = \\bigl(\\tfrac{q}{p}\\bigr)^{S_n}$ 是一个鞅，且 $T=\\inf\\{n\\ge1:S_n=a\\text{ or }S_n=-b\\}$ 是一个几乎必然有限的停时。\n2. 根据可选停止定理，\n   $$\\mathbb{E}[M_T]=\\mathbb{E}[M_0]=\\bigl(\\tfrac{q}{p}\\bigr)^0=1\\,. $$\n3. 在时刻 $T$，$S_T$ 的值为 $a$ 或 $-b$。令 $\\alpha=P(S_T=a)$。则\n   $$\\mathbb{E}[M_T]\n     =\\alpha\\bigl(\\tfrac{q}{p}\\bigr)^a+(1-\\alpha)\\bigl(\\tfrac{q}{p}\\bigr)^{-b}\n     =1\\,. $$\n4. 记 $r=\\tfrac{q}{p}$。则\n   $$\\alpha\\,r^a+(1-\\alpha)\\,r^{-b}=1\n     \\quad\\Longrightarrow\\quad\n     \\alpha\\,(r^a-r^{-b})=1-r^{-b}\n     \\quad\\Longrightarrow\\quad\n     \\alpha=\\frac{1-r^{-b}}{\\,r^a-r^{-b}\\,}\\,. $$\n5. 对上一步的结果进行代数运算可得：\n   $$\\alpha=\\frac{1-(q/p)^b}{1-(q/p)^{a+b}}\\,. $$\n因此，在到达 $-b$ 之前到达 $a$ 的概率是 $\\displaystyle\\frac{1-(q/p)^b}{1-(q/p)^{a+b}}$。", "answer": "$$\\boxed{\\frac{1 - (q/p)^b}{1 - (q/p)^{a+b}}}$$", "id": "849549"}, {"introduction": "现在，我们将把停止时间的概念应用到金融领域的一个实际场景中。股票价格通常被建模为几何布朗运动，而设置止盈和止损点的交易策略天然地构成了停止时间问题。这个练习将帮助你把从离散随机游走中学到的知识，推广到连续时间的随机过程，并体会其在量化金融等复杂现实领域中的重要应用。[@problem_id:849541]", "problem": "一支不支付股息的股票在时间 $t$ 的价格 $S_t$ 由几何布朗运动 (GBM) 建模，其服从如下随机微分方程：\n$$\ndS_t = \\mu S_t dt + \\sigma S_t dB_t\n$$\n其中 $\\mu$ 是恒定的预期回报率，$\\sigma > 0$ 是恒定的波动率，$B_t$ 是标准一维布朗运动。一位投资者以初始价格 $S_0 > 0$ 购买该股票。该投资者采用一种策略，一旦股价达到上方目标价 $U = k_U S_0$ 或下方止损价 $L = k_L S_0$，便立即卖出股票，其中 $k_U > 1$ 和 $0 < k_L < 1$ 是固定的乘数因子。\n\n假设对数价格过程的有效漂移 $\\mu - \\frac{1}{2}\\sigma^2$ 非零。\n\n推导一个闭式表达式，表示投资者在上方目标价 $U$ 而非下方止损价 $L$ 卖出股票的概率。请用 $\\mu$、$\\sigma$、$k_U$ 和 $k_L$ 表示你的答案。", "solution": "定义对数价格过程\n$$X_t=\\ln\\frac{S_t}{S_0},$$ \n那么根据 Itô 引理 \n$$dX_t=\\Bigl(\\mu-\\tfrac12\\sigma^2\\Bigr)\\,dt+\\sigma\\,dB_t.$$\n令\n$$m=\\mu-\\tfrac12\\sigma^2,\\quad a=\\ln k_L<0,\\quad b=\\ln k_U>0,$$ \n并注意 $X_0=0$。 对于一个漂移为 $m$、扩散为 $\\sigma$ 的布朗运动，从 $x$ 开始，在到达 $a$ 之前先到达 $b$ 的概率是 \n$$P_x\\{\\,\\tau_b<\\tau_a\\}\n=\\frac{\\displaystyle\\int_a^x e^{-2m y/\\sigma^2}\\,dy}{\\displaystyle\\int_a^b e^{-2m y/\\sigma^2}\\,dy}.$$\n令 $x=0$ 可得\n$$P=\\frac{\\displaystyle\\int_a^0e^{-2m y/\\sigma^2}dy}{\\displaystyle\\int_a^b e^{-2m y/\\sigma^2}dy}\n=\\frac{e^{-2m a/\\sigma^2}-1}{e^{-2m a/\\sigma^2}-e^{-2m b/\\sigma^2}}.$$\n代入 $a=\\ln k_L$，$b=\\ln k_U$：\n$$e^{-2m a/\\sigma^2}=k_L^{-2m/\\sigma^2},\\quad e^{-2m b/\\sigma^2}=k_U^{-2m/\\sigma^2},$$\n所以\n$$P\n=\\frac{k_L^{-2m/\\sigma^2}-1}{k_L^{-2m/\\sigma^2}-k_U^{-2m/\\sigma^2}},\\quad m=\\mu-\\tfrac12\\sigma^2.$$", "answer": "$$\\boxed{\\frac{k_L^{-2(\\mu-\\sigma^2/2)/\\sigma^2}-1}{k_L^{-2(\\mu-\\sigma^2/2)/\\sigma^2}-k_U^{-2(\\mu-\\sigma^2/2)/\\sigma^2}}}$$", "id": "849541"}, {"introduction": "“优惠券收集问题”是另一个著名的概率谜题，它也可以用停止时间的语言来描述。这个练习的重点与前两者不同，我们不再计算命中概率，而是计算停止时间本身的一个矩（方差）。在此过程中，你将学习一种重要技巧——将一个复杂的停止时间分解为一系列更简单的独立随机变量之和，这在概率分析中是一种常见且有效的策略。[@problem_id:849585]", "problem": "在赠券收集问题中，一名收集者旨在集齐一套共 $N$ 种不同类型的赠券。在每次抽取中，会抽取一张赠券，抽到 $N$ 种类型中任意一种的概率均等，为 $1/N$。每次抽取都是独立的。令 $T_N$ 为一个随机变量，表示集齐全部 $N$ 种不同赠券所需的总抽取次数。\n\n当 $N$ 很大时，$T_N$ 的方差（记作 $\\text{Var}(T_N)$）随 $N$ 呈二次方增长。你的任务是推导出该二次增长项系数的精确值。具体而言，即计算以下极限：\n$$\nL = \\lim_{N\\to\\infty} \\frac{\\text{Var}(T_N)}{N^2}\n$$\n你可以使用巴塞尔问题的已知结论：$\\sum_{k=1}^{\\infty} \\frac{1}{k^2} = \\frac{\\pi^2}{6}$。", "solution": "我们将 $T_N$ 分解为\n$$T_N=\\sum_{k=0}^{N-1}X_k,$$\n其中 $X_k$ 是在已集齐 $k$ 种不同赠券后，为抽到一种新赠券所需的额外抽取次数。由于每次抽取能得到一张新赠券的概率为\n$$p_k=\\frac{N-k}{N},$$\n我们有\n1. \n$$\\mathbb{E}[X_k]=\\frac{1}{p_k}=\\frac{N}{\\,N-k\\,},$$\n2. \n$$\\mathrm{Var}(X_k)=\\frac{1-p_k}{p_k^2}\n=\\frac{k/N}{((N-k)/N)^2}\n=\\frac{k\\,N}{(N-k)^2}.$$\n因此\n$$\\mathrm{Var}(T_N)\n=\\sum_{k=0}^{N-1}\\mathrm{Var}(X_k)\n=\\sum_{k=0}^{N-1}\\frac{k\\,N}{(N-k)^2}\n=N\\sum_{j=1}^{N}\\frac{N-j}{j^2},$$\n这里我们令 $j=N-k$。由于 $j=N$ 对应的项为零，我们可以写成\n$$\\mathrm{Var}(T_N)\n=N\\Bigl(N\\sum_{j=1}^N\\frac{1}{j^2}-\\sum_{j=1}^N\\frac{1}{j}\\Bigr)\n=N^2\\sum_{j=1}^N\\frac{1}{j^2}-N\\,H_N.$$\n两边同除以 $N^2$ 并令 $N\\to\\infty$，再利用\n$$\\sum_{j=1}^\\infty\\frac{1}{j^2}=\\frac{\\pi^2}{6},\\qquad\n\\frac{H_N}{N}\\to0,$$\n可得\n$$L=\\lim_{N\\to\\infty}\\frac{\\mathrm{Var}(T_N)}{N^2}\n=\\frac{\\pi^2}{6}.$$", "answer": "$$\\boxed{\\frac{\\pi^2}{6}}$$", "id": "849585"}]}
{"hands_on_practices": [{"introduction": "这个练习将带你直接进入马尔可夫链的核心。通过一个生成音乐序列的有趣场景，你将学习如何使用状态转移概率来预测系统的未来状态。这个实践旨在帮助你掌握将一个系统的规则转化为一个转移矩阵，并用它来进行基本概率计算的关键技能。[@problem_id:1356270]", "problem": "一种实验性的音乐作曲算法会生成一个音符序列。可能的音符集合仅限于一个简单的三和弦：{C, E, G}。序列中每个后续音符的选择是一个概率过程，仅取决于其紧邻的前一个音符。\n\n该过程由乐曲的第一个音符开始，这个音符总是 C。\n\n控制从一个音符到下一个音符转换的概率定义如下：\n- 如果当前音符是 C，那么下一个音符是 C 的概率为 0.2，是 E 的概率为 0.3，是 G 的概率为 0.5。\n- 如果当前音符是 E，那么下一个音符是 C 的概率为 0.4，是 E 的概率为 0.1，是 G 的概率为 0.5。\n- 如果当前音符是 G，那么下一个音符是 C 的概率为 0.6，是 E 的概率为 0.2，是 G 的概率为 0.2。\n\n计算序列中第三个音符是 G 的确切概率。请用小数表示你的答案。", "solution": "我们将音符建模为一个马尔可夫链，其状态为 $\\{C,E,G\\}$，初始状态为 $C$ 的概率为 $1$。设第二个和第三个音符分别表示为 $N_{2}$ 和 $N_{3}$。根据全概率公式和马尔可夫性质，\n$$\n\\Pr(N_{3}=G)=\\Pr(N_{2}=C)\\Pr(G\\mid C)+\\Pr(N_{2}=E)\\Pr(G\\mid E)+\\Pr(N_{2}=G)\\Pr(G\\mid G).\n$$\n从以 $C$ 开始的转移概率，我们有\n$$\n\\Pr(N_{2}=C)=0.2,\\quad \\Pr(N_{2}=E)=0.3,\\quad \\Pr(N_{2}=G)=0.5.\n$$\n从转移到 $G$ 的概率，我们有\n$$\n\\Pr(G\\mid C)=0.5,\\quad \\Pr(G\\mid E)=0.5,\\quad \\Pr(G\\mid G)=0.2.\n$$\n代入得，\n$$\n\\Pr(N_{3}=G)=0.2\\cdot 0.5+0.3\\cdot 0.5+0.5\\cdot 0.2=0.1+0.15+0.1=0.35.\n$$\n因此，第三个音符是 $G$ 的确切概率是 $0.35$。", "answer": "$$\\boxed{0.35}$$", "id": "1356270"}, {"introduction": "现在，让我们将这些概念应用到一个更接近现实世界的模型中。这个关于网球发球得分过程的练习，展示了如何将一个多阶段的过程分解为不同的状态和转移路径。它不仅巩固了你对转移概率的理解，还引入了条件概率的重要概念，这对于分析依赖于先前结果的事件至关重要。[@problem_id:1389132]", "problem": "在一个简化的网球发球分模型中，一位球员的表现由四个关键概率来刻画。其第一次发球成功的概率（即非失误）用 $p_{1S}$ 表示。如果第一次发球成功，该球员以 $w_1$ 的概率赢得这一分。如果第一次发球失误，球员将获得第二次发球机会。这次第二次发球成功的概率（即非双发失误）为 $p_{2S}$。在第二次发球成功后，球员以 $w_2$ 的概率赢得这一分。如果球员第二次发球失败（双发失误），他们就输掉这一分。\n\n考虑一位球员，其表现统计数据如下：\n- $p_{1S} = 0.65$\n- $w_1 = 0.75$\n- $p_{2S} = 0.90$\n- $w_2 = 0.50$\n\n该球员通过发球开始新的一分。已知该球员最终赢得了这一分，那么他们是凭借第一次发球赢得这一分的概率是多少？请将答案表示为小数，并四舍五入到四位有效数字。", "solution": "设 $A$ 为球员在第一次发球成功后赢得该分的事件，设 $W$ 为球员通过任意途径赢得该分的事件。\n\n通过第一次发球路径获胜的概率为\n$$\nP(A) = p_{1S} w_{1}.\n$$\n通过第二次发球路径获胜的概率为\n$$\n(1 - p_{1S}) p_{2S} w_{2},\n$$\n因为第一次发球失误的概率为 $(1 - p_{1S})$，第二次发球成功的概率为 $p_{2S}$，然后赢得该分的概率为 $w_{2}$。\n\n根据全概率公式，赢得该分的总概率为\n$$\nP(W) = p_{1S} w_{1} + (1 - p_{1S}) p_{2S} w_{2}.\n$$\n我们要求解的条件概率是，在赢得该分的情况下，该分是通过第一次发球路径赢得的：\n$$\nP(A \\mid W) = \\frac{P(A)}{P(W)} = \\frac{p_{1S} w_{1}}{p_{1S} w_{1} + (1 - p_{1S}) p_{2S} w_{2}}.\n$$\n代入给定值 $p_{1S} = 0.65$，$w_{1} = 0.75$，$p_{2S} = 0.90$ 和 $w_{2} = 0.50$，\n$$\nP(A \\mid W) = \\frac{0.65 \\cdot 0.75}{0.65 \\cdot 0.75 + (1 - 0.65) \\cdot 0.90 \\cdot 0.50}\n= \\frac{0.4875}{0.4875 + 0.1575}\n= \\frac{0.4875}{0.645}.\n$$\n转换为精确分数，\n$$\n\\frac{0.4875}{0.645} = \\frac{975}{1290} = \\frac{65}{86} \\approx 0.755813953\\ldots\n$$\n四舍五入到四位有效数字，结果为 $0.7558$。", "answer": "$$\\boxed{0.7558}$$", "id": "1389132"}, {"introduction": "在掌握了计算之后，这个练习将挑战你对马尔可夫性质本身定义的理解。通过分析一个自适应数据处理协议，你需要判断它是否构成一个马尔可夫链。这个问题旨在深化你对“无记忆性”这一核心特征的认识，让你辨别为何某些看似随机的过程实际上包含了对过去历史的依赖，从而不满足马尔可夫假设。[@problem_id:1342472]", "problem": "考虑一个名为新颖性检测协议（Novelty Detection Protocol, NDP）的自适应数据处理协议的简化模型。NDP处理一系列数据项 $I_1, I_2, I_3, \\dots$。这些数据项从一个包含 $M$ 个不同项的有限集合 $\\mathcal{S}$ 中独立且等概率地抽取，其中 $M > 1$。\n\nNDP在两种状态之一运行：“ADAPT”或“OPERATE”。设随机过程 $\\{X_n\\}_{n \\ge 1}$ 表示协议的状态序列，其中 $X_n$ 是处理第 $n$ 个数据项 $I_n$ 之前的状态。该过程根据以下规则演化：\n\n1.  **初始状态**：协议总是从ADAPT状态开始，因此 $X_1 = \\text{ADAPT}$。\n2.  **从ADAPT状态的转移**：如果在步骤 $n$ 时协议处于ADAPT状态（即 $X_n = \\text{ADAPT}$），它会执行一次内部更新，然后无条件地转移到OPERATE状态以进行下一步。因此，如果 $X_n = \\text{ADAPT}$，则 $X_{n+1} = \\text{OPERATE}$ 是确定的。\n3.  **从OPERATE状态的转移**：如果在步骤 $n$ 时协议处于OPERATE状态（即 $X_n = \\text{OPERATE}$），它会检查传入的数据项 $I_n$。\n    *   如果数据项 $I_n$ 在过去的项目历史中任何时刻出现过（即 $I_n \\in \\{I_1, I_2, \\dots, I_{n-1}\\}$），协议将保持在OPERATE状态。因此，$X_{n+1} = \\text{OPERATE}$。\n    *   如果数据项 $I_n$ 是新颖的，意味着它从未在历史 $\\{I_1, I_2, \\dots, I_{n-1}\\}$ 中出现过，协议将转移到ADAPT状态以整合这一新信息。因此，$X_{n+1} = \\text{ADAPT}$。\n\n根据这个定义，随机过程 $\\{X_n\\}_{n \\ge 1}$ 是一个马尔可夫链吗？\n\nA. 是，因为从任何状态的转移只取决于当前状态和下一个随机项，而不取决于过去的状态。\n\nB. 是，因为状态空间是有限的，且转移概率是良定义的。\n\nC. 否，因为从OPERATE状态的转移概率取决于整个过去历史中见过的唯一项的数量，而这并不能由当前状态为OPERATE完全确定。\n\nD. 否，因为从ADAPT状态的转移概率取决于过去的历史。\n\nE. 如果不知道集合 $\\mathcal{S}$ 的具体大小 $M$，则无法确定。", "solution": "我们分析状态空间为 $\\{\\text{ADAPT}, \\text{OPERATE}\\}$ 的过程 $\\{X_{n}\\}_{n\\ge 1}$ 是否满足马尔可夫性质。马尔可夫性质要求对于每一个 $n$ 和每一个历史，\n$$\n\\Pr\\left(X_{n+1}=x \\mid X_{n}=x_{n}, X_{n-1}=x_{n-1}, \\dots, X_{1}=x_{1}\\right)=\\Pr\\left(X_{n+1}=x \\mid X_{n}=x_{n}\\right).\n$$\n\n根据协议规则：\n- 如果 $X_{n}=\\text{ADAPT}$，则确定性地有 $X_{n+1}=\\text{OPERATE}$。因此，\n$$\n\\Pr\\left(X_{n+1}=\\text{OPERATE} \\mid X_{n}=\\text{ADAPT}, \\text{history}\\right)=1,\n$$\n这只取决于 $X_{n}$ 而不取决于过去。\n\n- 如果 $X_{n}=\\text{OPERATE}$，则下一个状态取决于 $I_{n}$ 相对于 $\\{I_{1},\\dots,I_{n-1}\\}$ 是否是新颖的。令\n$$\nU_{n-1}=\\left|\\{I_{1},I_{2},\\dots,I_{n-1}\\}\\right|\n$$\n表示直到步骤 $n-1$ 时所见过的不同项的数量。由于 $I_{n}$ 是从 $|\\mathcal{S}|=M$ 的集合 $\\mathcal{S}$ 中独立且等概率地抽取的，因此在给定过去历史的情况下，$I_{n}$ 是新颖的概率为\n$$\n\\Pr(\\text{$I_{n}$ novel} \\mid I_{1},\\dots,I_{n-1})=\\frac{M-U_{n-1}}{M},\n$$\n前提是 $U_{n-1}\\le M$。因此，当 $X_{n}=\\text{OPERATE}$ 时，\n$$\n\\Pr\\left(X_{n+1}=\\text{ADAPT} \\mid X_{n}=\\text{OPERATE}, I_{1},\\dots,I_{n-1}\\right)=\\frac{M-U_{n-1}}{M},\n$$\n且\n$$\n\\Pr\\left(X_{n+1}=\\text{OPERATE} \\mid X_{n}=\\text{OPERATE}, I_{1},\\dots,I_{n-1}\\right)=\\frac{U_{n-1}}{M}.\n$$\n\n关键在于，$U_{n-1}$ 并非由单一的状态值 $X_{n}=\\text{OPERATE}$ 决定。两个不同的过去历史都可以产生 $X_{n}=\\text{OPERATE}$，但可能具有不同的 $U_{n-1}$，从而导致不同的转移概率。例如，如果过去历史由一个项的重复出现组成，那么 $U_{n-1}=1$ 且\n$$\n\\Pr\\left(X_{n+1}=\\text{ADAPT} \\mid X_{n}=\\text{OPERATE}, \\text{history}\\right)=\\frac{M-1}{M}.\n$$\n反之，如果过去历史包含所有不同的项，那么 $U_{n-1}=\\min\\{n-1,M\\}$ 且\n$$\n\\Pr\\left(X_{n+1}=\\text{ADAPT} \\mid X_{n}=\\text{OPERATE}, \\text{history}\\right)=\\frac{M-\\min\\{n-1,M\\}}{M},\n$$\n只要 $\\min\\{n-1,M\\}\\ne 1$，这个概率就与 $\\frac{M-1}{M}$ 不同。\n\n因此，\n$$\n\\Pr\\left(X_{n+1}=\\cdot \\mid X_{n}=\\text{OPERATE}, X_{n-1},\\dots,X_{1}\\right)\n$$\n并不仅仅由 $X_{n}$ 决定，还通过 $U_{n-1}$ 依赖于过去。因此，$\\{X_{n}\\}$ 不是一个马尔可夫链。在给定的选项中，这对应于“从OPERATE状态的转移概率取决于整个过去历史中唯一项的数量，而这并未被当前状态所捕获”的陈述。\n\n从ADAPT状态的转移不依赖于历史，所以选项D中的理由是不正确的。选项B中状态空间的有限性并不能保证马尔可夫性质，而选项A错误地认为依赖于下一个项就足够了，却没有将过去的新颖性信息编码到状态中。选项E中的大小 $M$ 不影响定性结论。", "answer": "$$\\boxed{C}$$", "id": "1342472"}]}
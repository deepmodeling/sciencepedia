{"hands_on_practices": [{"introduction": "期望线性性最强大的应用之一，是借助指示器变量将复杂的计数问题分解为许多简单的小问题。这个练习将带你实践这一核心技巧，通过分析一个计算机科学中的经典问题——哈希表中的冲突——来计算预期冲突数[@problem_id:1381865]。你会发现，即使每个项目的分配是独立的，冲突事件本身却不是，但期望的线性性让我们能够优雅地绕过这个复杂性。", "problem": "一所大学的计算机科学系负责归档学生项目。有 $m$ 个不同的学生项目需要存储在一组 $n$ 台可用服务器上。系统管理员采用一种简单的分配方案：$m$ 个项目中的每一个都被分配到 $n$ 台服务器中的一台，每个项目的服务器选择都是独立且均匀随机地从可用服务器集合中进行的。\n\n“碰撞”定义为两个不同的项目被分配到同一台服务器的事件。确定此类碰撞对的总期望数。请用 $m$ 和 $n$ 的封闭形式解析表达式给出你的答案。", "solution": "设 $X$ 是表示项目碰撞对总数的随机变量。我们的目标是求出 $X$ 的期望值，记为 $E[X]$。\n\n直接计算 $X$ 的概率分布很复杂。一种更有效的方法是利用期望的线性性。我们可以将 $X$ 表示为一些更简单的随机变量之和。\n\n首先，让我们确定所有可能的项目对。因为有 $m$ 个项目，所以不同项目对的总数由二项式系数 $\\binom{m}{2}$ 给出。设项目从 $1$ 编号到 $m$。一个通用的项目对可以表示为 $(i, j)$，其中 $1 \\le i < j \\le m$。\n\n对于每个这样的对 $(i, j)$，我们定义一个指示随机变量 $X_{ij}$ 如下：\n$$\nX_{ij} =\n\\begin{cases}\n1 & \\text{如果项目 } i \\text{ 和项目 } j \\text{ 被分配到同一台服务器} \\\\\n0 & \\text{否则}\n\\end{cases}\n$$\n碰撞的总数 $X$ 是这些指示变量在所有唯一的项目对上的总和：\n$$\nX = \\sum_{1 \\le i < j \\le m} X_{ij}\n$$\n根据期望的线性性，碰撞的总期望数是这些单个指示变量的期望值之和：\n$$\nE[X] = E\\left[\\sum_{1 \\le i < j \\le m} X_{ij}\\right] = \\sum_{1 \\le i < j \\le m} E[X_{ij}]\n$$\n一个指示随机变量的期望等于它所指示的事件的概率。因此，对于任何一对 $(i, j)$：\n$$\nE[X_{ij}] = P(X_{ij} = 1)\n$$\n$P(X_{ij} = 1)$ 是项目 $i$ 和项目 $j$ 被分配到同一台服务器的概率。让我们来计算这个概率。\n\n项目 $i$ 可以被分配到 $n$ 台服务器中的任意一台。假设它被分配到服务器 $k$。由于分配是独立且均匀的，项目 $j$ 被分配到同一台服务器 $k$ 的概率是 $\\frac{1}{n}$。无论项目 $i$ 被分配到哪台服务器，这个结论都成立。\n\n或者，我们可以考虑对 $(i, j)$ 的所有可能分配构成的总样本空间。项目 $i$ 有 $n$ 种选择，项目 $j$ 也有 $n$ 种选择，因此样本空间中共有 $n \\times n = n^2$ 个等可能的结果。如果两个项目都被分配到服务器1，或者都被分配到服务器2，...，或者都被分配到服务器 $n$，就会发生碰撞。共有 $n$ 个这样的有利结果。因此，对 $(i, j)$ 发生碰撞的概率是：\n$$\nP(X_{ij} = 1) = \\frac{\\text{有利结果数}}{\\text{总结果数}} = \\frac{n}{n^2} = \\frac{1}{n}\n$$\n所以，每个指示变量的期望是 $E[X_{ij}] = \\frac{1}{n}$。\n\n现在我们可以将这个结果代入 $E[X]$ 的求和式中。这个和是针对所有唯一的项目对。这样的对的数量是：\n$$\n\\binom{m}{2} = \\frac{m(m-1)}{2}\n$$\n因此，碰撞的总期望数是：\n$$\nE[X] = \\sum_{1 \\le i < j \\le m} \\frac{1}{n} = \\left(\\text{对的数量}\\right) \\times \\frac{1}{n} = \\binom{m}{2} \\cdot \\frac{1}{n}\n$$\n代入二项式系数的表达式，我们得到：\n$$\nE[X] = \\frac{m(m-1)}{2} \\cdot \\frac{1}{n} = \\frac{m(m-1)}{2n}\n$$\n这就是碰撞对期望数的最终表达式。", "answer": "$$\\boxed{\\frac{m(m-1)}{2n}}$$", "id": "1381865"}, {"introduction": "在掌握了使用指示变量进行计数后，让我们将期望线性性的应用拓展到更广阔的领域，比如金融资产的波动性分析。这个练习模拟了资产价格的随机游走，要求你计算总收益平方的期望值 $E[S_N^2]$，这是衡量风险和波动性的一个关键指标[@problem_id:1371032]。通过这个过程，你将学会如何处理随机变量之和的平方，并理解独立性在简化问题中的关键作用。", "problem": "提出了一个简化的随机模型来描述某种金融资产的日价格波动。设 $S_N$ 是该资产在连续 $N$ 个交易日内的总对数回报率。该总对数回报率是每日对数回报率 $X_k$ 的总和，其中 $k=1, 2, \\dots, N$。即，$S_N = \\sum_{k=1}^{N} X_k$。\n\n每日对数回报率 $X_k$ 被建模为独立同分布的随机变量。在任何一个给定的交易日，对数回报率 $X_k$ 可以根据以下概率分布取三个值之一：\n-   $X_k = +\\alpha$，概率为 $p$。\n-   $X_k = -\\alpha$，概率为 $p$。\n-   $X_k = 0$，概率为 $1-2p$。\n\n在此，$\\alpha$ 是一个正数，代表一次显著价格变动的幅度；$p$ 是发生此类变动的概率，且满足 $0 < p \\le 1/2$。衡量该资产在 $N$ 天周期内总波动性的一个关键指标是总对数回报率平方的期望值，$E[S_N^2]$。\n\n请找出 $E[S_N^2]$ 关于参数 $N$、$p$ 和 $\\alpha$ 的解析表达式。", "solution": "题目要求我们计算总对数回报率平方的期望值 $E[S_N^2]$，其中 $S_N = \\sum_{k=1}^{N} X_k$。\n\n我们首先写出该和的平方：\n$$S_N^2 = \\left(\\sum_{i=1}^{N} X_i\\right)^2 = \\left(\\sum_{i=1}^{N} X_i\\right)\\left(\\sum_{j=1}^{N} X_j\\right) = \\sum_{i=1}^{N} \\sum_{j=1}^{N} X_i X_j$$\n对该表达式取期望，并利用期望的线性性质，我们可以将期望算子移到求和符号内部：\n$$E[S_N^2] = E\\left[\\sum_{i=1}^{N} \\sum_{j=1}^{N} X_i X_j\\right] = \\sum_{i=1}^{N} \\sum_{j=1}^{N} E[X_i X_j]$$\n我们可以将这个双重求和分成两部分：下标相等 ($i=j$) 的项和下标不相等 ($i \\neq j$) 的项。\n$$E[S_N^2] = \\sum_{i=1}^{N} E[X_i^2] + \\sum_{i=1}^{N} \\sum_{j=1, j\\neq i}^{N} E[X_i X_j]$$\n为了继续计算，我们需要计算每日对数回报率 $X_k$ 的一阶矩和二阶矩。由于 $X_k$ 是同分布的，我们在计算中可以省略下标 $k$。设 $X$ 是一个代表单日对数回报率的随机变量。\n\n$X$ 的期望值（一阶矩）为：\n$$E[X] = (+\\alpha) \\cdot P(X = \\alpha) + (-\\alpha) \\cdot P(X = -\\alpha) + (0) \\cdot P(X = 0)$$\n$$E[X] = \\alpha \\cdot p - \\alpha \\cdot p + 0 \\cdot (1-2p) = 0$$\n$X$ 的平方的期望值（二阶矩）为：\n$$E[X^2] = (+\\alpha)^2 \\cdot P(X = \\alpha) + (-\\alpha)^2 \\cdot P(X = -\\alpha) + (0)^2 \\cdot P(X = 0)$$\n$$E[X^2] = \\alpha^2 \\cdot p + \\alpha^2 \\cdot p + 0 \\cdot (1-2p) = 2p\\alpha^2$$\n现在我们可以计算 $E[S_N^2]$ 展开式中的两部分了。\n\n对于 $i \\neq j$ 的项，每日对数回报率 $X_i$ 和 $X_j$ 是独立的随机变量。因此，它们乘积的期望等于它们各自期望的乘积：\n$$E[X_i X_j] = E[X_i]E[X_j]$$\n使用我们关于一阶矩的结果，可得：\n$$E[X_i X_j] = 0 \\cdot 0 = 0$$\n这意味着第二项求和 $\\sum_{i=1}^{N} \\sum_{j=1, j\\neq i}^{N} E[X_i X_j]$ 中的每一项都为零。因此，这个求和的整个结果为零。\n\n对于 $i = j$ 的项，我们有 $E[X_i^2]$。由于这些变量是同分布的，对所有的 $i$ 都有 $E[X_i^2] = E[X^2] = 2p\\alpha^2$。第一个求和项变为：\n$$\\sum_{i=1}^{N} E[X_i^2] = \\sum_{i=1}^{N} 2p\\alpha^2$$\n由于 $2p\\alpha^2$ 是一个相对于求和下标 $i$ 的常数，我们只是将这个常数自身相加 $N$ 次：\n$$\\sum_{i=1}^{N} 2p\\alpha^2 = N(2p\\alpha^2)$$\n结合求和两部分的结果，我们得到最终答案：\n$$E[S_N^2] = N(2p\\alpha^2) + 0 = 2Np\\alpha^2$$", "answer": "$$\\boxed{2Np\\alpha^{2}}$$", "id": "1371032"}, {"introduction": "本文的最后一个练习将展示期望线性性的真正威力，即当它与其他领域的深刻见解相结合时，能够出人意料地解决看似棘手的问题。我们将分析一个网络可靠性问题：在一个树状网络中，当连接随机失效时，预期的网络碎片（连通分量）数量是多少[@problem_id:1381828]？解决这个问题的关键，在于巧妙地运用图论中的一个基本恒等式，它将问题转化，使得期望线性性可以大显身手，最终得出一个异常简洁的答案。", "problem": "一个新部署的由 $n$ 颗卫星组成的星座被设计用于深空通信。连接这些卫星的网络拓扑结构是一棵树，这确保了任意两颗卫星之间存在唯一的通信路径，并且活动链接的数量被最小化。\n\n在一次强烈的太阳活动期间，每个活动的通信链接都有可能发生故障。已经确定，每个链接都以一个恒定的概率 $p$ (其中 $0 < p < 1$) 独立于其他链接而发生故障。当一个链接发生故障时，它将从网络中被永久移除。链接的故障可能导致网络分裂成几个不连通的簇。一个簇被定义为一组仍然可以直接或间接相互通信的最大卫星集合。\n\n假设初始网络是一个具有 $n$ 个顶点（卫星）的任意树，请确定在太阳活动事件后，不连通簇的期望数量。请用一个关于 $n$ 和 $p$ 的封闭形式的解析表达式来表示你的答案。", "solution": "设初始卫星网络被建模为一棵树 $T = (V, E)$，其中 $V$ 是 $n$ 颗卫星（顶点）的集合，$E$ 是 $n-1$ 个通信链接（边）的集合。太阳活动事件后，一些边被删除，形成一个新图 $G' = (V, E')$，其中 $E' \\subseteq E$。由于原始图 $T$ 是一棵树，它不包含任何环。新图 $G'$ 作为 $T$ 的一个子图，也不包含任何环。一个没有环的图是一个森林。\n\n任何森林的一个基本性质是其顶点数、边数和连通分量数之间的关系。对于任何具有 $V_{\\text{forest}}$ 个顶点、$E_{\\text{forest}}$ 条边和 $C_{\\text{forest}}$ 个连通分量的森林，恒等式 $C_{\\text{forest}} = V_{\\text{forest}} - E_{\\text{forest}}$ 成立。\n\n在我们的问题中，结果图 $G'$ 是一个森林。$G'$ 中的顶点数固定为 $|V| = n$。边数 $|E'|$ 是一个随机变量，簇的数量（连通分量）也是一个随机变量，我们用随机变量 $C$ 来表示。将森林恒等式应用于 $G'$，我们得到关系式：\n$$C = n - |E'|$$\n我们的目标是求出簇的期望数量 $E[C]$。利用上述关系式和期望的线性性质，我们有：\n$$E[C] = E[n - |E'|] = E[n] - E[|E'|]$$\n由于 $n$ 是一个常数，其期望值为 $n$。因此，问题简化为求结果图中边的期望数量 $E[|E'|]$。\n$$E[C] = n - E[|E'|]$$\n为了求出 $E[|E'|]$，我们可以定义指示随机变量。初始树有 $|E| = n-1$ 条边。我们将它们标记为 $e_1, e_2, \\ldots, e_{n-1}$。对于每条边 $e_i \\in E$，设 $X_i$ 是一个指示变量，使得：\n$$X_i = \\begin{cases} 1 & \\text{如果边 } e_i \\text{ 幸存（未发生故障）} \\\\ 0 & \\text{如果边 } e_i \\text{ 发生故障} \\end{cases}$$\n问题陈述每个链接以概率 $p$ 发生故障。因此，一个链接幸存的概率是 $1-p$。\n指示变量 $X_i$ 的期望值由下式给出：\n$$E[X_i] = 1 \\cdot P(X_i=1) + 0 \\cdot P(X_i=0) = P(X_i=1) = 1-p$$\n最终图 $G'$ 中的总边数是所有初始边对应的这些指示变量的总和：\n$$|E'| = \\sum_{i=1}^{n-1} X_i$$\n现在我们可以再次利用期望的线性性质来求出 $|E'|$ 的期望值：\n$$E[|E'|] = E\\left[\\sum_{i=1}^{n-1} X_i\\right] = \\sum_{i=1}^{n-1} E[X_i]$$\n由于每个 $X_i$ 的期望值是 $1-p$，并且初始树中有 $n-1$ 条边，我们得到：\n$$E[|E'|] = \\sum_{i=1}^{n-1} (1-p) = (n-1)(1-p)$$\n最后，我们将这个结果代入我们关于 $E[C]$ 的表达式中：\n$$E[C] = n - E[|E'|] = n - (n-1)(1-p)$$\n展开并简化该表达式，得到最终答案：\n$$E[C] = n - (n - np - 1 + p) = n - n + np + 1 - p = 1 + p(n-1)$$\n值得注意的是，这个结果与初始树的具体结构无关，仅取决于卫星的数量 $n$ 和故障概率 $p$。", "answer": "$$\\boxed{1 + (n-1)p}$$", "id": "1381828"}]}
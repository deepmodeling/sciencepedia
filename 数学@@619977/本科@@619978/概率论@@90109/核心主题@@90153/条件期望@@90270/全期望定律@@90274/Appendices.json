{"hands_on_practices": [{"introduction": "这个练习是全期望定律最直接的应用之一，通过一个引人入胜的游戏节目场景，帮助我们掌握其核心思想。我们所面临的挑战是计算参赛者的期望奖金，但这需要先考虑参赛者选择每一扇门的不同概率。这个例子完美地展示了如何通过将一个复杂问题分解为几个简单的、有条件的场景，并根据每个场景发生的可能性对其进行加权，从而轻松地计算出总体的期望值。[@problem_id:1928933]", "problem": "一位电视竞猜节目的选手面对三扇相同的门：1号门、2号门和3号门。每扇门后都有一份现金奖励。任何一扇门后的奖金金额是一个随机变量，但对以往节目的统计分析已经确定了每扇门后的平均奖金额。1号门后的平均奖金是$1000，2号门后的平均奖金是$5000，3号门后的平均奖金是$100。由于舞台的布置，选手们表现出一种已知的心理偏向：他们选择中间那扇门（2号门）的概率是选择1号门的两倍。他们选择3号门的概率与选择1号门的相同。参加此游戏的选手，其总期望奖金是多少？以美元为单位表示你的最终答案，并四舍五入到三位有效数字。", "solution": "设 $D \\in \\{1,2,3\\}$ 表示选择的门，设 $X$ 为赢得的奖金。根据全期望定律，我们有\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{3}\\mathbb{E}[X \\mid D=i]\\,\\mathbb{P}(D=i).\n$$\n根据题意，每扇门后的平均奖金为 $\\mu_{1}=1000$，$\\mu_{2}=5000$ 和 $\\mu_{3}=100$，所以 $\\mathbb{E}[X \\mid D=i]=\\mu_{i}$。\n\n设 $\\mathbb{P}(D=1)=p$。这种偏向意味着 $\\mathbb{P}(D=2)=2p$ 且 $\\mathbb{P}(D=3)=p$。使用归一化条件，\n$$\np+2p+p=1 \\;\\Rightarrow\\; 4p=1 \\;\\Rightarrow\\; p=\\frac{1}{4}.\n$$\n因此 $\\mathbb{P}(D=1)=\\frac{1}{4}$，$\\mathbb{P}(D=2)=\\frac{1}{2}$，且 $\\mathbb{P}(D=3)=\\frac{1}{4}$。所以，\n$$\n\\mathbb{E}[X]=\\frac{1}{4}\\cdot 1000+\\frac{1}{2}\\cdot 5000+\\frac{1}{4}\\cdot 100=250+2500+25=2775.\n$$\n四舍五入到三位有效数字，得到\n$$\n2.78 \\times 10^{3}.\n$$", "answer": "$$\\boxed{2.78 \\times 10^{3}}$$", "id": "1928933"}, {"introduction": "现在我们来探讨一个更深入的应用，一个涉及两个连续阶段的随机实验。第一阶段（掷骰子）的结果直接决定了第二阶段（抛硬币）的参数。这个问题的关键在于，条件期望 $E[S|N]$ 不再是一个固定的数值，而是第一阶段结果 $N$ 的一个函数。通过解决这个问题，你将练习如何计算这个函数的期望，这是掌握全期望定律在多阶段模型中应用的关键一步。[@problem_id:1400510]", "problem": "一个两阶段的概率游戏定义如下。在第一阶段，投掷一个质地均匀的六面骰子一次。记这次投掷的整数结果为 $N$。在第二阶段，将一枚质地均匀的硬币抛掷 $N$ 次。记 $H$ 为这些抛掷中观察到的正面总数。玩家该局的分数 $S$ 计算为正面次数的平方，即 $S = H^2$。\n\n该分数的期望值 $E[S]$ 是多少？", "solution": "设 $N$ 为骰子的投掷结果，均匀分布在 $\\{1,2,3,4,5,6\\}$ 上，且 $\\Pr(N=n)=\\frac{1}{6}$。在 $N=n$ 的条件下，正面次数 $H$ 服从参数为 $(n, p)$ 的二项分布，其中 $p=\\frac{1}{2}$，即 $H \\mid N=n \\sim \\mathrm{Binomial}(n, \\frac{1}{2})$。分数为 $S=H^{2}$，所以我们想求 $E[S]=E[H^{2}]$。\n\n根据全期望定律，\n$$\nE[H^{2}]=E\\!\\left(E[H^{2}\\mid N]\\right).\n$$\n对于一个二项随机变量 $X\\sim \\mathrm{Binomial}(n,p)$，恒等式\n$$\nE[X^{2}]=\\operatorname{Var}(X)+\\left(E[X]\\right)^{2}=np(1-p)+n^{2}p^{2}\n$$\n成立。将 $p=\\frac{1}{2}$ 代入，对于每个固定的 $n$，我们得到，\n$$\nE[H^{2}\\mid N=n]=n\\cdot \\frac{1}{2}\\left(1-\\frac{1}{2}\\right)+n^{2}\\left(\\frac{1}{2}\\right)^{2}=\\frac{n}{4}+\\frac{n^{2}}{4}=\\frac{n+n^{2}}{4}.\n$$\n因此，\n$$\nE[S]=E[H^{2}]=E\\!\\left(\\frac{N+N^{2}}{4}\\right)=\\frac{1}{4}\\left(E[N]+E[N^{2}]\\right).\n$$\n由于 $N$ 均匀分布在 $\\{1,2,3,4,5,6\\}$ 上，\n$$\nE[N]=\\frac{1}{6}\\sum_{n=1}^{6} n=\\frac{1}{6}\\cdot \\frac{6\\cdot 7}{2}=\\frac{7}{2},\n$$\n且\n$$\nE[N^{2}]=\\frac{1}{6}\\sum_{n=1}^{6} n^{2}=\\frac{1}{6}\\cdot \\frac{6\\cdot 7\\cdot 13}{6}=\\frac{91}{6}.\n$$\n因此，\n$$\nE[S]=\\frac{1}{4}\\left(\\frac{7}{2}+\\frac{91}{6}\\right)=\\frac{1}{4}\\cdot \\frac{112}{6}=\\frac{112}{24}=\\frac{14}{3}.\n$$", "answer": "$$\\boxed{\\frac{14}{3}}$$", "id": "1400510"}, {"introduction": "这个练习将全期望定律的应用提升到了一个新层次，引导我们进入随机过程的建模领域。我们通过一个受量子点“闪烁”现象启发的简化模型，来分析一个持续随机步数的粒子运动。这个问题最精妙之处在于，过程的持续时间 $N$ 本身就是一个随机变量。它有力地证明了全期望定律如何优雅地将单个事件的性质（如每次波动的方差 $\\sigma^2$）与整个随机过程的宏观结果联系起来，这在物理、金融和生物学等领域中是一种非常常见的分析模式。[@problem_id:1400560]", "problem": "考虑一个用于描述单个量子点 (QD) 荧光间歇性（即“闪烁”）的简化模型。影响其发射特性的量子点内部状态，由一个称为“极化状态”的一维无量纲量来描述，记为 $P$。我们从一个在时间 $t=0$ 时处于参考状态 $P_0 = 0$ 的量子点开始。\n\n在离散时间步 $t=1, 2, 3, \\ldots$ 时，极化状态会经历随机涨落。在第 $k$ 步，极化状态的变化量记为 $\\Delta P_k$，它是一个随机变量。这些涨落 $\\{\\Delta P_k\\}_{k=1,2,...}$ 是独立同分布的，其均值为零，$E[\\Delta P_k] = 0$，方差为有限值 $\\text{Var}(\\Delta P_k) = \\sigma^2$。\n\n量子点会保持在“激活”（闪烁）状态一段随机的时间步数，记为 $N$。在每一步涨落发生后，量子点都有一个恒定的概率 $p$ 会跃迁到一个永久的“暗”态并停止所有活动。该过程在发生此跃迁的步骤结束时停止。因此，总激活步数 $N$ 是一个随机变量。假设状态跃迁检查在第 1 步结束时首次进行。\n\n在量子点永久变暗之前，其最终极化状态是截至该点的所有涨落之和：$P_N = \\sum_{k=1}^{N} \\Delta P_k$。\n\n确定最终极化状态平方的期望值 $E[P_N^2]$。请用 $\\sigma^2$ 和 $p$ 将您的答案表示为闭式解析表达式。", "solution": "令 $P_{N}=\\sum_{k=1}^{N}\\Delta P_{k}$，其中 $\\{\\Delta P_{k}\\}$ 是独立同分布的（i.i.d.），$E[\\Delta P_{k}]=0$，且 $\\text{Var}(\\Delta P_{k})=\\sigma^{2}$。在每一步涨落发生后，过程以概率 $p$ 停止，这与涨落无关，所以 $N$ 是一个支持集为 $\\{1,2,\\ldots\\}$、参数为 $p$ 的几何随机变量：\n$$\n\\Pr(N=n)=(1-p)^{n-1}p,\\quad n\\in\\{1,2,\\ldots\\}.\n$$\n以 $N=n$ 为条件。展开平方项得到\n$$\nP_{n}^{2}=\\left(\\sum_{k=1}^{n}\\Delta P_{k}\\right)^{2}=\\sum_{i=1}^{n}\\sum_{j=1}^{n}\\Delta P_{i}\\Delta P_{j}.\n$$\n在 $N=n$ 的条件下取期望，并利用独立性和零均值，\n$$\nE[P_{n}^{2}\\mid N=n]=\\sum_{i=1}^{n}E[\\Delta P_{i}^{2}]+\\sum_{\\substack{i,j=1\\\\ i\\neq j}}^{n}E[\\Delta P_{i}\\Delta P_{j}]=n\\sigma^{2}+0=n\\sigma^{2}.\n$$\n根据全期望定律，\n$$\nE[P_{N}^{2}]=E\\big[E[P_{N}^{2}\\mid N]\\big]=\\sigma^{2}E[N].\n$$\n对于一个参数为 $p$ 且支持集为 $\\{1,2,\\ldots\\}$ 的几何随机变量，\n$$\nE[N]=\\sum_{n=1}^{\\infty}n(1-p)^{\\,n-1}p=p\\sum_{n=1}^{\\infty}n(1-p)^{\\,n-1}.\n$$\n使用恒等式 $\\sum_{n=1}^{\\infty}nr^{n-1}=\\frac{1}{(1-r)^{2}}$（对于 $|r|<1$），并令 $r=1-p$，我们得到\n$$\nE[N]=p\\cdot\\frac{1}{(1-(1-p))^{2}}=p\\cdot\\frac{1}{p^{2}}=\\frac{1}{p}.\n$$\n因此，\n$$\nE[P_{N}^{2}]=\\sigma^{2}E[N]=\\frac{\\sigma^{2}}{p}.\n$$", "answer": "$$\\boxed{\\frac{\\sigma^{2}}{p}}$$", "id": "1400560"}]}
{"hands_on_practices": [{"introduction": "让我们从一个经典场景开始，它恰恰体现了得分问题的核心。当一场“首先达到 $N$ 分者获胜”的比赛被中断时，我们如何公平地划分彩金？这个练习[@problem_id:1405106]将引导你使用负二项分布的思想来解决这个问题，为更复杂的变体打下坚实的基础。", "problem": "两家公司销售团队，阿尔法队（Team Alpha）和布拉沃队（Team Bravo），正在进行一场竞赛，看谁能率先签下50份新客户合同。获胜方将获得一笔可观的全公司奖金。根据大量的历史业绩数据可知，对于任何一个潜在客户，阿尔法队签下合同的概率为 $p=0.6$，而布拉沃队签下合同的概率为 $1-p=0.4$。每次合同谈判都被视为一个独立事件。\n\n由于市场情况发生突然且意外的变化，公司高层领导决定无限期中止这场竞赛。在竞赛中止时，阿尔法队已经签下45份合同，而布拉沃队已经签下42份合同。为了公平地颁发奖金，公司决定计算在相同条件下继续竞赛，每支队伍本应获胜的理论概率。\n\n阿尔法队本应率先达到50份合同的概率是多少？请将答案表示为保留四位有效数字的小数。", "solution": "将剩余的谈判建模为独立的伯努利试验，其中每份新合同由阿尔法队以概率 $p$ 获得，由布拉沃队以概率 $q=1-p$ 获得。在竞赛中止时，阿尔法队还需要 $r=50-45=5$ 份合同，而布拉沃队还需要 $s=50-42=8$ 份合同。阿尔法队在布拉沃队赢得 $s$ 份合同之前先赢得 $r$ 份合同的概率，即在一系列伯努利试验中，第 $r$ 次成功发生在出现 $s$ 次失败之前的概率。\n\n根据负二项分布，第 $r$ 次成功恰好在 $j$ 次失败之后发生的概率为\n$$\n\\binom{j+r-1}{r-1} p^{r} q^{j}.\n$$\n因此，阿尔法队在布拉沃队赢得 $s$ 份合同（即阿尔法队经历 $s$ 次失败）之前赢得 $r$ 份合同的概率为\n$$\nP_{\\text{Alpha}}=\\sum_{j=0}^{s-1}\\binom{j+r-1}{r-1} p^{r} q^{j}.\n$$\n代入 $r=5$，$s=8$，$p=0.6$ 和 $q=0.4$，\n$$\nP_{\\text{Alpha}}=0.6^{5}\\sum_{j=0}^{7}\\binom{j+4}{4} (0.4)^{j}.\n$$\n计算各个组成部分：\n$$\n0.6^{5}=0.07776,\n$$\n$$\n\\sum_{j=0}^{7}\\binom{j+4}{4} (0.4)^{j}\n=1+5(0.4)+15(0.16)+35(0.064)+70(0.0256)+126(0.01024)+210(0.004096)+330(0.0016384)\n=12.123072.\n$$\n因此，\n$$\nP_{\\text{Alpha}}=0.07776\\times 12.123072=0.94269007872.\n$$\n四舍五入到四位有效数字，结果为 $0.9427$。", "answer": "$$\\boxed{0.9427}$$", "id": "1405106"}, {"introduction": "现实世界的情况往往比理想模型更复杂。这个练习[@problem_id:1405113]引入了“优势周期性变化”的设定，即获胜概率随着比赛进程动态变化。这要求你建立并求解一组递归方程，从而学会将基本模型扩展到处理状态依赖的概率，这是解决更高级问题的关键一步。", "problem": "两名选手 A 和 B 正在进行一场争夺大奖的比赛。首先获得 10 分的选手获胜。当比分打成 7-7 平时，比赛中断。选手们同意根据从此刻起各自赢得比赛的概率来分配奖金。\n\n赢得单分的概率不是恒定的，它取决于一个在两名选手和中立状态之间循环的“优势”。接下来几轮的优势循环是：选手 A -> 选手 B -> 中立 -> 选手 A，依此类推。赢得单分的概率定义如下：\n- 当选手 A 拥有优势时，选手 A 赢得下一分的概率是 $p_A = 2/3$。\n- 当选手 B 拥有优势时，选手 B 赢得下一分的概率是 $p_B = 3/4$。\n- 当优势为中立时，选手 A 和选手 B 赢得下一分的概率相等，因此选手 A 赢得该分的概率是 $p_N = 1/2$。\n\n已知比分为 7-7，且即将进行的下一分的优势属于选手 A，那么选手 A 最终赢得比赛的概率是多少？请将您的答案表示为最简分数。", "solution": "设 $p_{0}=\\frac{2}{3}$，$p_{1}=\\frac{1}{4}$，$p_{2}=\\frac{1}{2}$ 分别是当优势指数 $k\\in\\{0,1,2\\}$ 对应A优势、B优势、中立时，选手A赢得下一分的概率，令 $q_{k}=1-p_{k}$。优势以 $k\\mapsto k+1$ 模 3 的方式循环。定义 $P(a,b,k)$ 为在选手 A 需要 $a$ 分，选手 B 需要 $b$ 分，且下一分使用优势指数 $k$ 的情况下，A 最终获胜的概率。递推关系和边界条件为\n$$\nP(0,b,k)=1,\\quad P(a,0,k)=0,\\quad\nP(a,b,k)=p_{k}\\,P(a-1,b,k+1)+q_{k}\\,P(a,b-1,k+1).\n$$\n我们需要计算 $P(3,3,0)$。\n\n计算基础的小状态：\n$$\nP(1,1,k)=p_{k},\\quad\nP(1,2,k)=p_{k}+q_{k}p_{k+1},\\quad\nP(2,1,k)=p_{k}p_{k+1}.\n$$\n因此，\n$$\nP(1,1,0)=\\frac{2}{3},\\;P(1,1,1)=\\frac{1}{4},\\;P(1,1,2)=\\frac{1}{2},\n$$\n$$\nP(1,2,0)=\\frac{2}{3}+\\frac{1}{3}\\cdot\\frac{1}{4}=\\frac{3}{4},\\;\nP(1,2,1)=\\frac{1}{4}+\\frac{3}{4}\\cdot\\frac{1}{2}=\\frac{5}{8},\\;\nP(1,2,2)=\\frac{1}{2}+\\frac{1}{2}\\cdot\\frac{2}{3}=\\frac{5}{6},\n$$\n$$\nP(2,1,0)=\\frac{2}{3}\\cdot\\frac{1}{4}=\\frac{1}{6},\\;\nP(2,1,1)=\\frac{1}{4}\\cdot\\frac{1}{2}=\\frac{1}{8},\\;\nP(2,1,2)=\\frac{1}{2}\\cdot\\frac{2}{3}=\\frac{1}{3}.\n$$\n\n接下来，\n$$\nP(1,3,k)=p_{k}+q_{k}P(1,2,k+1)\\implies\nP(1,3,0)=P(1,3,1)=P(1,3,2)=\\frac{7}{8}.\n$$\n另外，\n$$\nP(3,1,k)=p_{k}P(2,1,k+1)\\implies P(3,1,0)=P(3,1,1)=P(3,1,2)=\\frac{1}{12}.\n$$\n然后\n$$\nP(2,2,k)=p_{k}P(1,2,k+1)+q_{k}P(2,1,k+1)\\implies P(2,2,0)=P(2,2,1)=P(2,2,2)=\\frac{11}{24}.\n$$\n\n现在计算\n$$\nP(2,3,k)=p_{k}P(1,3,k+1)+q_{k}P(2,2,k+1),\n$$\n所以\n$$\nP(2,3,0)=\\frac{2}{3}\\cdot\\frac{7}{8}+\\frac{1}{3}\\cdot\\frac{11}{24}=\\frac{53}{72},\\quad\nP(2,3,1)=\\frac{1}{4}\\cdot\\frac{7}{8}+\\frac{3}{4}\\cdot\\frac{11}{24}=\\frac{9}{16},\\quad\nP(2,3,2)=\\frac{1}{2}\\cdot\\frac{7}{8}+\\frac{1}{2}\\cdot\\frac{11}{24}=\\frac{2}{3}.\n$$\n\n类似地，\n$$\nP(3,2,k)=p_{k}P(2,2,k+1)+q_{k}P(3,1,k+1),\n$$\n所以\n$$\nP(3,2,0)=\\frac{2}{3}\\cdot\\frac{11}{24}+\\frac{1}{3}\\cdot\\frac{1}{12}=\\frac{1}{3},\\quad\nP(3,2,1)=\\frac{1}{4}\\cdot\\frac{11}{24}+\\frac{3}{4}\\cdot\\frac{1}{12}=\\frac{17}{96},\\quad\nP(3,2,2)=\\frac{1}{2}\\cdot\\frac{11}{24}+\\frac{1}{2}\\cdot\\frac{1}{12}=\\frac{13}{48}.\n$$\n\n最后，\n$$\nP(3,3,k)=p_{k}P(2,3,k+1)+q_{k}P(3,2,k+1).\n$$\n当 $k=0$ 时，\n$$\nP(3,3,0)=\\frac{2}{3}\\cdot\\frac{9}{16}+\\frac{1}{3}\\cdot\\frac{17}{96}\n=\\frac{3}{8}+\\frac{17}{288}=\\frac{108}{288}+\\frac{17}{288}=\\frac{125}{288}.\n$$\n因此，选手 A 最终获胜的概率是 $\\frac{125}{288}$。", "answer": "$$\\boxed{\\frac{125}{288}}$$", "id": "1405113"}, {"introduction": "概率论不仅可以用来预测，还能指导最佳决策。在这个终极练习中，你将面对一个带有战略元素的情境：一位玩家拥有一张可以保证获胜的王牌[@problem_id:1405160]。这不再是简单的概率计算，而是一个博弈论挑战，你需要权衡立即使用和保留王牌的利弊，从而领会如何运用概率制定最优策略。", "problem": "在一款竞争性视频游戏中，两位玩家，玩家A和玩家B，正在进行一场决斗。首位获得10分的玩家将赢得比赛。当前，比分是8比7，玩家A领先。\n\n玩家A拥有一项战略优势：一个尚未使用过的一次性“终极技能”。如果在某个回合开始时激活此技能，它能保证玩家A赢得该回合。该技能在整场比赛中只能使用一次。在任何不使用终极技能的回合中，两位玩家的水平相当，每人赢得该回合的概率均为 $0.5$。\n\n假设玩家A采用最优策略来最大化其获胜的概率，这个最大概率是多少？请将你的答案表示为最简分数形式。", "solution": "设 $i$ 为玩家A达到10分尚需赢得的回合数，$j$ 为玩家B达到10分尚需赢得的回合数。在当前比分为 $8$ 比 $7$ 时，我们有 $i=2$ 和 $j=3$。设 $f(i,j)$ 为在没有终极技能可用，且每回合双方获胜概率均为 $0.5$ 的情况下，玩家A从状态 $(i,j)$ 赢得比赛的概率。那么\n$$\nf(0,j)=1,\\quad f(i,0)=0,\\quad f(i,j)=\\frac{1}{2}f(i-1,j)+\\frac{1}{2}f(i,j-1).\n$$\n使用这些递推关系，\n$$\nf(1,1)=\\frac{1}{2},\\quad f(1,2)=\\frac{1}{2}\\cdot 1+\\frac{1}{2}\\cdot \\frac{1}{2}=\\frac{3}{4},\\quad f(1,3)=\\frac{1}{2}\\cdot 1+\\frac{1}{2}\\cdot \\frac{3}{4}=\\frac{7}{8},\n$$\n$$\nf(2,1)=\\frac{1}{2}\\cdot \\frac{1}{2}+\\frac{1}{2}\\cdot 0=\\frac{1}{4},\\quad f(2,2)=\\frac{1}{2}\\cdot \\frac{3}{4}+\\frac{1}{2}\\cdot \\frac{1}{4}=\\frac{1}{2},\\quad f(2,3)=\\frac{1}{2}\\cdot \\frac{7}{8}+\\frac{1}{2}\\cdot \\frac{1}{2}=\\frac{11}{16}.\n$$\n现在，设 $W(i,j,1)$ 表示当终极技能可用时，玩家A从状态 $(i,j)$ 出发的最优获胜概率，而当终极技能不可用时，$W(i,j,0)=f(i,j)$。从状态 $(2,3,1)$ 开始，玩家A有两种选择：\n- 立即使用终极技能，状态转移到 $(1,3,0)$，获胜概率为 $f(1,3)=\\frac{7}{8}$。\n- 本回合不使用；那么状态有 $\\frac{1}{2}$ 的概率变为 $(1,3,1)$，有 $\\frac{1}{2}$ 的概率变为 $(2,2,1)$。\n\n我们来分析终极技能可用时的后续状态：\n- 从状态 $(1,3,1)$，玩家A可以立即使用终极技能赢得比赛，所以 $W(1,3,1)=1$。\n- 从状态 $(2,2,1)$，如果玩家A立即使用终极技能，状态变为 $(1,2,0)$，获胜概率为 $f(1,2)=\\frac{3}{4}$。如果玩家A等待一回合，则状态有 $\\frac{1}{2}$ 的概率变为 $(1,2,1)$，有 $\\frac{1}{2}$ 的概率变为 $(2,1,1)$。我们分别评估这些情况：\n  - 在状态 $(1,2,1)$，玩家A可以立即使用终极技能赢得比赛，所以 $W(1,2,1)=1$。\n  - 从状态 $(2,1,1)$，立即使用终极技能会使状态变为 $(1,1,0)$，获胜概率为 $f(1,1)=\\frac{1}{2}$。如果玩家A等待，则有 $\\frac{1}{2}$ 的概率状态变为 $(1,1,1)$（此时可立即使用终极技能赢得比赛，概率为 $1$），有 $\\frac{1}{2}$ 的概率玩家B达到 $10$ 分而玩家A告负（概率为 $0$）。因此，等待的期望获胜概率为 $\\frac{1}{2}\\cdot 1+\\frac{1}{2}\\cdot 0=\\frac{1}{2}$，与立即使用的概率相等。因此 $W(2,1,1)=\\frac{1}{2}$。\n  因此，在状态 $(2,2,1)$ 时选择等待，期望获胜概率为\n  $$\n  \\frac{1}{2}\\cdot W(1,2,1)+\\frac{1}{2}\\cdot W(2,1,1)=\\frac{1}{2}\\cdot 1+\\frac{1}{2}\\cdot \\frac{1}{2}=\\frac{3}{4},\n  $$\n  这与立即使用的获胜概率相等。因此 $W(2,2,1)=\\frac{3}{4}$。\n\n因此，从状态 $(2,3,1)$ 开始，不立即使用终极技能的期望获胜概率为\n$$\n\\frac{1}{2}\\cdot W(1,3,1)+\\frac{1}{2}\\cdot W(2,2,1)=\\frac{1}{2}\\cdot 1+\\frac{1}{2}\\cdot \\frac{3}{4}=\\frac{7}{8}.\n$$\n这与立即使用的获胜概率 $f(1,3)=\\frac{7}{8}$ 相等。因此，最优获胜概率是\n$$\n\\frac{7}{8}.\n$$", "answer": "$$\\boxed{\\frac{7}{8}}$$", "id": "1405160"}]}
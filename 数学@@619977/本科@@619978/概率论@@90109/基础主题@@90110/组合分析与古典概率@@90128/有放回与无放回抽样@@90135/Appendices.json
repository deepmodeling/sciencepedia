{"hands_on_practices": [{"introduction": "我们的第一个练习将探讨有放回抽样，这是一个基本情景，其中每次选择都是独立的，不会影响后续结果。通过一个关于为量子计算机生成操作序列的现代化例子 [@problem_id:1385710]，我们将应用多项式概率公式来计算特定序列组合出现的可能性。这个练习为你掌握处理独立随机事件的概率计算奠定了坚实的基础。", "problem": "在一个用于测试量子计算机控制电路的简化模型中，会生成一个量子门操作序列并将其应用于一个量子比特。序列中的每个操作都是从一个包含四个基本门的集合中独立且均匀随机地选择的：单位门（$I$）、泡利-X门（$X$）、泡利-Y门（$Y$）和泡利-Z门（$Z$）。\n\n考虑一个长度为 $N=7$ 的测试序列。该序列恰好包含两个泡利-X门、一个泡利-Y门且没有泡利-Z门的概率是多少？\n\n将你的答案表示为最简精确分数形式。", "solution": "每次选择门的操作都是独立的，并且均匀分布在 $I$、$X$、$Y$ 和 $Z$ 这四个类别上，每个类别的概率为 $p_{I}=p_{X}=p_{Y}=p_{Z}=\\frac{1}{4}$。对于一个长度为 $N=7$ 的序列，其计数恰好为 $k_{I}=4$、$k_{X}=2$、$k_{Y}=1$和 $k_{Z}=0$ 的概率由多项式公式给出：\n$$\n\\Pr=\\frac{7!}{4!\\,2!\\,1!\\,0!}\\,p_{I}^{4}\\,p_{X}^{2}\\,p_{Y}^{1}\\,p_{Z}^{0}.\n$$\n代入 $p_{I}=p_{X}=p_{Y}=p_{Z}=\\frac{1}{4}$ 和 $0!=1$ 可得\n$$\n\\Pr=\\frac{7!}{4!\\,2!}\\left(\\frac{1}{4}\\right)^{7}.\n$$\n计算阶乘比：\n$$\n\\frac{7!}{4!\\,2!}=\\frac{7\\cdot 6\\cdot 5\\cdot 4!}{4!\\cdot 2}=\\frac{7\\cdot 6\\cdot 5}{2}=105,\n$$\n并注意到 $4^{7}=16384$，所以\n$$\n\\left(\\frac{1}{4}\\right)^{7}=\\frac{1}{16384}.\n$$\n因此，\n$$\n\\Pr=\\frac{105}{16384},\n$$\n该分数已为最简形式，因为 $105$ 和 $16384=2^{14}$ 互质。", "answer": "$$\\boxed{\\frac{105}{16384}}$$", "id": "1385710"}, {"introduction": "与上一个练习不同，无放回抽样引入了依赖性：每次抽样都会改变下一次抽样的概率。这个问题 [@problem_id:1385751] 以半导体质量控制为背景，要求我们计算在一个大小为 $n$ 的样本中，最大序列号恰好为特定值 $k$ 的概率。这个练习的核心是使用组合计数来精确处理依赖事件，这是超几何分布相关问题的关键技能。", "problem": "一家半导体制造商生产了一批共 $N$ 个特制处理器，并为每个处理器分配了集合 $\\{1, 2, \\dots, N\\}$ 中的一个唯一序列号。为了进行质量控制，从这批处理器中随机抽取一个包含 $n$ 个不同处理器的样本进行破坏性测试。抽样过程为无放回抽样。一位分析师对样本中出现的最大序列号的分布感兴趣。\n\n假设 $n$、$k$ 和 $N$ 是满足 $1 \\le n \\le k \\le N$ 的整数，求出在这 $n$ 个处理器的样本中，最大序列号恰好等于 $k$ 的概率。请用 $n$、$k$ 和 $N$ 将答案表示为单个闭式解析表达式。", "solution": "我们将此选择建模为从集合 $\\{1,2,\\dots,N\\}$ 中进行的无放回简单随机抽样，因此每个包含 $n$ 个元素的子集都是等可能的。所有可能的（无序）样本总数为\n$$\n\\binom{N}{n}.\n$$\n令 $M$ 表示样本中的最大序列号。我们要求解在整数满足 $1 \\leq n \\leq k \\leq N$ 的条件下 $\\Pr(M = k)$ 的值。\n\n事件 $\\{M = k\\}$ 发生，当且仅当样本中包含元素 $k$，并且所有其他 $n-1$ 个元素都从集合 $\\{1,2,\\dots,k-1\\}$ 中选出。此类有利样本的数量为\n$$\n\\binom{k-1}{n-1},\n$$\n因为我们必须从小于 $k$ 的 $k-1$ 个可用值中选择 $n-1$ 个元素。\n\n根据古典组合概率原理（等可能结果），所求概率为有利样本数与总样本数之比：\n$$\n\\Pr(M = k) = \\frac{\\binom{k-1}{n-1}}{\\binom{N}{n}}.\n$$\n\n作为通过累积分布进行的一致性检验，我们注意到\n$$\n\\Pr(M \\leq k) = \\frac{\\binom{k}{n}}{\\binom{N}{n}}, \\quad \\Pr(M \\leq k-1) = \\frac{\\binom{k-1}{n}}{\\binom{N}{n}},\n$$\n所以\n$$\n\\Pr(M = k) = \\Pr(M \\leq k) - \\Pr(M \\leq k-1) = \\frac{\\binom{k}{n} - \\binom{k-1}{n}}{\\binom{N}{n}} = \\frac{\\binom{k-1}{n-1}}{\\binom{N}{n}},\n$$\n这里使用了恒等式 $\\binom{k}{n} - \\binom{k-1}{n} = \\binom{k-1}{n-1}$。这与直接计数的结果一致，并且在 $1 \\leq n \\leq k \\leq N$ 的条件下成立。", "answer": "$$\\boxed{\\frac{\\binom{k-1}{n-1}}{\\binom{N}{n}}}$$", "id": "1385751"}, {"introduction": "在掌握了概率计算之后，我们现在将问题提升到一个新的层次：计算期望值。在一个关于网络安全审计的引人入胜的场景中 [@problem_id:1385729]，你将推导在总共 $N$ 台服务器中找到 $D$ 台被入侵服务器中的第一台所需的平均扫描次数 $E[K]$。这个问题挑战你超越单一事件的概率，去理解和预测一个随机过程的长期平均结果，这在风险评估和过程优化中至关重要。", "problem": "一个企业网络由 $N$ 台相同的服务器组成。由于一次安全漏洞，一个恶意行为者在其中的恰好 $D$ 台服务器上植入了一枚隐藏的逻辑炸弹，其中 $1 \\le D < N$。安全团队并不知道具体是哪些服务器遭到了入侵。\n\n为应对此威胁，该团队部署了一个自动化取证工具。该工具以无放回均匀随机的方式逐一选择服务器进行深度扫描。每次扫描都是瞬时完成的，且若所选服务器上存在逻辑炸弹，则保证能够检测到。整个审计过程被设计为一旦发现第一枚逻辑炸弹便立即停止。\n\n设随机变量 $K$ 表示在此次审计中被扫描的服务器总数。你的任务是推导出 $K$ 的期望值（记为 $E[K]$）的符号化封闭形式表达式，该表达式应使用服务器总数 $N$ 和被入侵服务器数 $D$ 来表示。", "solution": "将审计过程建模为对所有 $N$ 台服务器按一个均匀随机的排列顺序进行扫描。设 $D$ 台被入侵的服务器占据集合 $\\{1,2,\\dots,N\\}$ 中的随机不同位置。被扫描的服务器总数 $K$ ，恰好是在此随机顺序中遇到的第一台被入侵服务器的索引，即 $D$ 台被入侵服务器位置的最小值。\n\n对于 $m \\in \\{1,2,\\dots,N\\}$，其尾部概率为\n$$\n\\Pr(K \\geq m) = \\Pr(\\text{all } D \\text{ compromised servers are in positions } m,m+1,\\dots,N).\n$$\n从 $\\{m,m+1,\\dots,N\\}$ 中为 $D$ 台被入侵服务器选择位置的方法数是 $\\binom{N-m+1}{D}$，而从 $\\{1,2,\\dots,N\\}$ 中选择 $D$ 个位置的总方法数是 $\\binom{N}{D}$。因此，\n$$\n\\Pr(K \\geq m) = \\frac{\\binom{N-m+1}{D}}{\\binom{N}{D}},\n$$\n此式对 $1 \\leq m \\leq N-D+1$ 成立，而当 $m > N-D+1$ 时，$\\Pr(K \\geq m) = 0$。\n\n使用非负整数值随机变量的期望恒等式，\n$$\nE[K] = \\sum_{m=1}^{\\infty} \\Pr(K \\geq m) = \\sum_{m=1}^{N-D+1} \\Pr(K \\geq m),\n$$\n我们得到\n$$\nE[K] = \\sum_{m=1}^{N-D+1} \\frac{\\binom{N-m+1}{D}}{\\binom{N}{D}}.\n$$\n令 $t = N - m + 1$。当 $m$ 从 $1$ 遍历至 $N-D+1$ 时，$t$ 从 $N$ 递减至 $D$。重新索引求和，\n$$\nE[K] = \\frac{1}{\\binom{N}{D}} \\sum_{t=D}^{N} \\binom{t}{D}.\n$$\n根据曲棍球棒恒等式（可由帕斯卡法则导出），\n$$\n\\sum_{t=D}^{N} \\binom{t}{D} = \\binom{N+1}{D+1}.\n$$\n因此，\n$$\nE[K] = \\frac{\\binom{N+1}{D+1}}{\\binom{N}{D}}.\n$$\n化简二项式系数的比值，\n$$\n\\frac{\\binom{N+1}{D+1}}{\\binom{N}{D}} = \\frac{\\frac{(N+1)!}{(D+1)!(N-D)!}}{\\frac{N!}{D!(N-D)!}} = \\frac{N+1}{D+1}.\n$$\n因此，\n$$\nE[K] = \\frac{N+1}{D+1}.\n$$", "answer": "$$\\boxed{\\frac{N+1}{D+1}}$$", "id": "1385729"}]}
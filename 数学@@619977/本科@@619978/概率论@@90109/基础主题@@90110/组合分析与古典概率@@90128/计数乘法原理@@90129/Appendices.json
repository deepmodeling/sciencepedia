{"hands_on_practices": [{"introduction": "当问题中出现“至少一个”这样的约束时，直接计算所有有效情况往往比较复杂。一个更巧妙且常用的策略是反向思考：先计算所有可能的情况总数，然后减去不满足条件的（即“一个也没有”）的无效情况。这个练习将通过一个内容分发网络（CDN）的文件部署场景，帮助你熟练掌握补集计数这一强大的问题解决技巧。[@problem_id:1402656]", "problem": "一家科技公司正在为其内容分发网络（CDN）设计部署策略。该公司需要将三个不同的大型数据文件——一个视频游戏客户端、一部故事片和一个操作系统更新——分发到其服务器网络中。该网络由位于不同地理区域的12个不同服务器组成。为了分发，这三个文件中的每一个都必须放置在且仅放置在一个服务器上。单个服务器能够托管多个文件。\n\n在这12个服务器中，有4个被归类为“高级”高带宽服务器，而另外8个是“标准”服务器。公司政策规定，对于任何有效的部署，这三个文件中至少有一个必须托管在高级服务器上，以确保关键内容的高速访问。\n\n在遵守此政策的前提下，有多少种不同的方法可以将这三个文件分发到这12个服务器上？", "solution": "令文件集合为 $F$，$|F|=3$（不同的文件），服务器集合为 $S$，$|S|=12$。$S$ 被划分为 $P$（高级服务器）和 $Q$（标准服务器）两个子集，其中 $|P|=4$ 且 $|Q|=8$。一次部署将每个文件分配到唯一一个服务器上，并允许同一服务器托管多个文件。因此，每次部署都对应一个函数 $f: F \\to S$。\n\n根据乘法原理，不受限制的总部署方式数量为\n$$\n12^{3}.\n$$\n\n无效的部署是指没有任何文件被放置在高级服务器上的部署，即 $f(F) \\subseteq Q$。此类部署的数量为\n$$\n8^{3}.\n$$\n\n根据补集法则，至少有一个文件被放置在高级服务器上的有效部署数量为\n$$\n12^{3} - 8^{3} = 1728 - 512 = 1216.\n$$", "answer": "$$\\boxed{1216}$$", "id": "1402656"}, {"introduction": "处理带有多个约束的组合问题时，一个关键策略是“先难后易”。这意味着我们应该首先处理最严格的限制条件，然后再考虑其余部分。这个关于旗帜信号的练习将向你展示如何处理一个常见的“不相邻”约束：首先，我们确定受限元素所有可能的位置，然后利用乘法原理来安排其余的元素。[@problem_id:1402685]", "problem": "一个通信部队开发了一种编码信息系统，方法是把8面旗帜排成一列。可用的旗帜有三种颜色：红色、蓝色和黄色。一条有效的信息必须满足以下特定规则：\n1. 信息必须包含恰好两面红色旗帜。\n2. 这两面红色旗帜不能放在相邻的位置。\n3. 剩下的六个位置必须用蓝色或黄色的旗帜填充。\n\n根据这些规则，可以形成多少种不同的有效编码信息？", "solution": "我们有长度为 $8$ 的序列，其字母表为 $\\{R,B,Y\\}$，其中恰好含有两个 $R$ 且两个 $R$ 不相邻。首先计算两面红色旗帜的放置方法。从 $8$ 个位置中选取两个位置的组合数为 $\\binom{8}{2}$。相邻的位置对为 $(1,2),(2,3),\\ldots,(7,8)$，共 $7$ 对。因此，放置两面不相邻的红色旗帜的方法数为\n$$\n\\binom{8}{2}-7=28-7=21.\n$$\n对于每一种这样的放置方式，剩下的 $6$ 个位置都可以独立地用 $B$ 或 $Y$ 填充，共有 $2^{6}$ 种可能性。因此，有效信息的总数为\n$$\n\\left(\\binom{8}{2}-7\\right)2^{6}=21\\cdot 2^{6}=21\\cdot 64=1344.\n$$", "answer": "$$\\boxed{1344}$$", "id": "1402685"}, {"introduction": "计数原理不仅限于处理数字和字母的序列，它同样可以应用于几何或空间排列问题。这个经典的棋盘问题要求我们计算两个不能相互攻击的国王的放置方式。解决这个问题的核心在于系统性地对“坏”情况（即两个国王互相攻击的情况）进行分类和计数，这能极大地锻炼你在组合问题中进行结构化分析的能力。[@problem_id:1402670]", "problem": "在国际象棋中，一个王在其所在的格子上可以攻击任何相邻的格子，包括对角线方向上的格子。考虑一个具有 $m$ 行和 $n$ 列的广义矩形棋盘。要将两个王放置在该棋盘的两个不同格子上。如果这两个王不互相攻击，则该放置方式被认为是“安全的”。\n\n假设这两个王是不可区分的，确定所有可能的不同安全放置方式的总数。请用整数 $m$ 和 $n$ 给出一个封闭形式的解析表达式作为答案，其中假设 $m \\geq 1$ 和 $n \\geq 1$。", "solution": "将两个不可区分的王放置在不同格子上的方式，对应于选择一个由不同格子组成的无序对。在一个 $m \\times n$ 的棋盘上，共有 $mn$ 个格子，因此无序对的总数是 $\\binom{mn}{2}$。当且仅当两个格子通过王的一步移动是相邻的，即它们的切比雪夫距离为 $1$ 时，该放置方式是不安全的。因此，安全放置方式的数量等于无序对的总数减去相邻无序对的数量。\n\n我们通过计算 $m \\times n$ 网格上王的邻接图中的边数来统计相邻无序对的数量。水平方向的邻接贡献了 $m(n-1)$ 对，垂直方向的邻接贡献了 $(m-1)n$ 对，两个对角线方向共同贡献了 $2(m-1)(n-1)$ 对。因此，攻击对的总数是\n$$\nE = m(n-1) + (m-1)n + 2(m-1)(n-1).\n$$\n展开并化简可得\n$$\nE = (mn - m) + (mn - n) + 2(mn - m - n + 1) = 4mn - 3m - 3n + 2.\n$$\n\n因此，安全放置方式的数量是\n$$\nS = \\binom{mn}{2} - E = \\frac{mn(mn - 1)}{2} - \\left(4mn - 3m - 3n + 2\\right).\n$$\n展开分子，\n$$\nS = \\frac{mn(mn - 1) - 2\\left(4mn - 3m - 3n + 2\\right)}{2}\n= \\frac{m^{2}n^{2} - mn - 8mn + 6m + 6n - 4}{2}\n= \\frac{m^{2}n^{2} - 9mn + 6m + 6n - 4}{2}.\n$$\n该表达式对所有整数 $m \\geq 1$ 和 $n \\geq 1$ 均成立。", "answer": "$$\\boxed{\\frac{m^{2}n^{2} - 9mn + 6m + 6n - 4}{2}}$$", "id": "1402670"}]}
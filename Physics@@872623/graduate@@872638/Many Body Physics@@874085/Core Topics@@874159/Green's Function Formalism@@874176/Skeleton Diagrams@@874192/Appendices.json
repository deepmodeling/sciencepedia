{"hands_on_practices": [{"introduction": "To truly master a graphical calculus, it's essential to understand its foundational semantics. This first exercise moves beyond the high-level rewrite rules to explore the underlying principle of how a closed diagram evaluates to a scalar value. By applying the 'sum-over-states' definition to a symmetric tetrahedral structure [@problem_id:1198196], you will gain a deeper appreciation for why the diagrammatic identities hold true and how quantum information is encoded in these spider networks.", "problem": "In a graphical calculus for quantum mechanics known as the ZX-calculus, quantum states and operators are represented by tensor network diagrams. A fundamental component of this calculus is the \"Z-spider,\" a vertex with an arbitrary number of edges (legs) and an associated phase.\n\nThe scalar value of a closed diagram (one with no external legs) is determined by a sum-over-states formalism. Consider a diagram consisting of a set of vertices $V$ (spiders) and a set of edges $E$ connecting them. The value is found by summing over all possible assignments of a state, either $|0\\rangle$ or $|1\\rangle$, to each edge in the diagram.\n\nThe evaluation rule is as follows:\n1.  An assignment is a function $c: E \\to \\{0, 1\\}$ that maps each edge to a state.\n2.  For a given assignment $c$, each Z-spider $v \\in V$ with phase $\\alpha_v$ and incident edges $E_v$ contributes a factor to the total product:\n    -   The contribution is $1$ if all edges in $E_v$ are assigned the state $|0\\rangle$ (i.e., $c(e)=0$ for all $e \\in E_v$).\n    -   The contribution is $e^{i\\alpha_v}$ if all edges in $E_v$ are assigned the state $|1\\rangle$ (i.e., $c(e)=1$ for all $e \\in E_v$).\n    -   The contribution is $0$ if the edges in $E_v$ are assigned a mixture of $|0\\rangle$ and $|1\\rangle$ states.\n3.  The value of the entire diagram is the sum of the products of these vertex contributions over all $2^{|E|}$ possible state assignments.\n\n**Problem:**\nConsider a closed diagram whose structure is that of a tetrahedron. At each of the four vertices, there is a Z-spider. All four spiders have the same phase $\\alpha$. The edges of the diagram correspond to the six edges of the tetrahedron.\n\nCalculate the scalar value of this diagram for the specific phase $\\alpha = \\pi/3$.", "solution": "Let the set of vertices be $V = \\{v_1, v_2, v_3, v_4\\}$ and the set of edges be $E$. The graph is a tetrahedron, which is the complete graph $K_4$. The number of vertices is $|V|=4$ and the number of edges is $|E| = \\binom{4}{2} = 6$. Each vertex has degree 3.\n\nThe scalar value of the diagram, which we denote by $\\mathcal{Z}$, is given by the sum over all possible state assignments (colorings) $c: E \\to \\{0, 1\\}$:\n$$ \\mathcal{Z} = \\sum_{c: E \\to \\{0,1\\}} \\prod_{j=1}^{4} C(v_j, c) $$\nwhere $C(v_j, c)$ is the contribution of the spider at vertex $v_j$ for the coloring $c$.\n\nAccording to the rules provided:\n-   $C(v_j, c) = 1$ if all edges incident to $v_j$ are colored 0.\n-   $C(v_j, c) = e^{i\\alpha}$ if all edges incident to $v_j$ are colored 1.\n-   $C(v_j, c) = 0$ if the edges incident to $v_j$ have mixed colors.\n\nA term in the sum is non-zero only if the product $\\prod_{j=1}^{4} C(v_j, c)$ is non-zero. This requires that for every vertex $v_j$, its contribution $C(v_j, c)$ must be non-zero. This in turn means that for each vertex $v_j$, all edges incident to it must have the same color.\n\nLet's analyze this constraint. The graph $K_4$ is connected. Let's pick an arbitrary vertex, say $v_1$. For its contribution to be non-zero, all three edges incident to it, say $(v_1, v_2)$, $(v_1, v_3)$, and $(v_1, v_4)$, must have the same color, let's call it $k \\in \\{0, 1\\}$.\n\nNow consider an adjacent vertex, say $v_2$. For its contribution to be non-zero, all three edges incident to it, $(v_2, v_1)$, $(v_2, v_3)$, and $(v_2, v_4)$, must also have the same color. Since one of these edges, $(v_1, v_2)$, is already colored $k$, all edges incident to $v_2$ must also be colored $k$.\n\nWe can repeat this argument for all vertices. Since the graph is connected, if we start with any vertex and require its incident edges to be monochromatic, this color restriction propagates to all adjacent vertices, and subsequently to the entire graph. Therefore, for the entire product term to be non-zero, all edges in the graph must have the same color.\n\nThis leaves only two state assignments out of the $2^6 = 64$ possibilities that give a non-zero contribution:\n1.  **The all-0 assignment ($c_0$)**: Every edge $e \\in E$ is assigned the state $|0\\rangle$.\n2.  **The all-1 assignment ($c_1$)**: Every edge $e \\in E$ is assigned the state $|1\\rangle$.\n\nLet's calculate the value for each of these two assignments.\n\n**Case 1: The all-0 assignment ($c_0$)**\nFor every vertex $v_j$, all its incident edges are colored 0. According to the rule, the contribution of each vertex is $C(v_j, c_0) = 1$.\nThe total product for this assignment is:\n$$ \\prod_{j=1}^{4} C(v_j, c_0) = 1 \\times 1 \\times 1 \\times 1 = 1 $$\n\n**Case 2: The all-1 assignment ($c_1$)**\nFor every vertex $v_j$, all its incident edges are colored 1. According to the rule, the contribution of each vertex is $C(v_j, c_1) = e^{i\\alpha}$.\nThe total product for this assignment is:\n$$ \\prod_{j=1}^{4} C(v_j, c_1) = e^{i\\alpha} \\times e^{i\\alpha} \\times e^{i\\alpha} \\times e^{i\\alpha} = e^{i4\\alpha} $$\n\nThe total scalar value $\\mathcal{Z}$ is the sum of the contributions from all possible assignments. Since only $c_0$ and $c_1$ contribute, we have:\n$$ \\mathcal{Z} = (\\text{Contribution from } c_0) + (\\text{Contribution from } c_1) = 1 + e^{i4\\alpha} $$\n\nThe problem specifies that the phase is $\\alpha = \\pi/3$. Substituting this value:\n$$ \\mathcal{Z} = 1 + e^{i4\\pi/3} $$\n\nWe can evaluate the complex exponential using Euler's formula, $e^{i\\theta} = \\cos(\\theta) + i\\sin(\\theta)$:\n$$ e^{i4\\pi/3} = \\cos\\left(\\frac{4\\pi}{3}\\right) + i\\sin\\left(\\frac{4\\pi}{3}\\right) $$\nThe angle $4\\pi/3$ is in the third quadrant. The reference angle is $\\pi/3$.\n$$ \\cos\\left(\\frac{4\\pi}{3}\\right) = -\\cos\\left(\\frac{\\pi}{3}\\right) = -\\frac{1}{2} $$\n$$ \\sin\\left(\\frac{4\\pi}{3}\\right) = -\\sin\\left(\\frac{\\pi}{3}\\right) = -\\frac{\\sqrt{3}}{2} $$\nSo, $e^{i4\\pi/3} = -\\frac{1}{2} - i\\frac{\\sqrt{3}}{2}$.\n\nFinally, we substitute this back into the expression for $\\mathcal{Z}$:\n$$ \\mathcal{Z} = 1 + \\left(-\\frac{1}{2} - i\\frac{\\sqrt{3}}{2}\\right) = \\left(1 - \\frac{1}{2}\\right) - i\\frac{\\sqrt{3}}{2} = \\frac{1}{2} - i\\frac{\\sqrt{3}}{2} $$\nThis is the final scalar value of the diagram.", "answer": "$$ \\boxed{\\frac{1}{2} - i\\frac{\\sqrt{3}}{2}} $$", "id": "1198196"}, {"introduction": "With a grasp of the fundamentals, we can now leverage the power of diagrammatic rewriting to analyze quantum circuits. This practice involves translating a common quantum circuit, the Hadamard-conjugated CNOT gate, into the ZX-calculus and simplifying it to find a specific coefficient in its Pauli decomposition [@problem_id:1198202]. This exercise demonstrates the core workflow of using skeleton diagrams: representing gates, applying fusion and color-change rules, and extracting quantitative information from the resulting simplified diagram.", "problem": "In the diagrammatic framework of ZX-calculus, quantum operators and states are represented by tensor networks called string diagrams or skeleton diagrams. This problem involves simplifying a quantum circuit using this calculus and extracting a particular coefficient from its Pauli expansion.\n\n**Background: ZX-Calculus**\n\n1.  **Spiders:** The basic components are \"spiders\". For this problem, we only need the Z-spiders (green dots).\n    *   A Z-spider with $m$ inputs, $n$ outputs, and a phase $\\alpha \\in [0, 2\\pi)$ corresponds to a linear map. A Z-spider with phase $\\alpha=0$, denoted Z(0), is represented by a green dot `*`.\n    *   **Spider Fusion Rule:** Two Z-spiders connected by an edge can be fused into a single Z-spider. Their phases add up. Legs of the original spiders become legs of the new spider.\n\n2.  **Gates and Operators:**\n    *   **Identity ($I$):** A horizontal wire.\n    *   **Hadamard ($H$):** A yellow or grey box labeled 'H'. A key rule is that it changes the color of spiders: conjugating an X-spider (red) with Hadamards turns it into a Z-spider (green), and vice-versa.\n    *   **CNOT Gate:** In one of its common ZX representations, the CNOT gate (control on qubit 1, target on qubit 2) is a Z(0)-spider on the control line connected by an edge to an X(0)-spider (red dot) on the target line.\n    *   **Pauli Operators:** The two-qubit Pauli basis is $\\{P_1 \\otimes P_2\\}_{P_i \\in \\{I, X, Y, Z\\}}$. An arbitrary two-qubit operator $U$ can be expanded as $U = \\sum_{P_1, P_2} c_{P_1 P_2} (P_1 \\otimes P_2)$.\n    *   The coefficient $c_{P_1 P_2}$ is given by the formula $c_{P_1 P_2} = \\frac{1}{4} \\text{Tr}[(P_1^\\dagger \\otimes P_2^\\dagger) U]$.\n\n3.  **Diagrammatic Evaluation:**\n    *   The trace of an operator $U$ is calculated by connecting the output wires of its diagram to the corresponding input wires. The resulting closed diagram (with no open wires) evaluates to a scalar.\n    *   A loop on a Z-spider (formed by connecting one of its outputs to one of its inputs) can be understood as reducing its number of legs by two. For instance, a 3-legged spider with one loop becomes a 1-legged spider.\n    *   A 1-legged Z(0) spider represents the (unnormalized) state $|+\\rangle = |0\\rangle + |1\\rangle$. Dually, a Z(0) spider with only one input represents the effect $\\langle+| = \\langle 0| + \\langle 1|$.\n\n**Problem Statement**\n\nConsider the two-qubit quantum operator $M$ defined by the circuit composition $M = (I \\otimes H) \\circ \\text{CNOT} \\circ (I \\otimes H)$, where the CNOT gate has its control on the first qubit and its target on the second.\n\nUsing the rules of ZX-calculus, determine the scalar coefficient $c_{II}$ of the Identity operator term ($I \\otimes I$) in the Pauli basis expansion of the operator $M$.", "solution": "The operator is $M = (I \\otimes H) \\circ \\text{CNOT} \\circ (I \\otimes H)$. The coefficient $c_{II}$ for the Pauli basis term $I \\otimes I$ is given by:\n\n$$\nc_{II} = \\frac{1}{4} \\text{Tr}[(I^\\dagger \\otimes I^\\dagger) M] = \\frac{1}{4} \\text{Tr}[M],\n$$\n\nsince $I^\\dagger = I$ and $(I \\otimes I)$ is the identity operator.\n\nIn ZX-calculus, the diagram for $M$ is constructed as follows:\n- The initial $(I \\otimes H)$ places a Hadamard on the second qubit.\n- The CNOT (control on first qubit, target on second) is represented by a Z(0)-spider on the control (first qubit) connected to an X(0)-spider on the target (second qubit).\n- The final $(I \\otimes H)$ places another Hadamard on the second qubit.\n\nThe diagram for the CNOT has its X(0)-spider surrounded by Hadamard gates on the second qubit's wire. Using the color-change rule, $H \\circ X(0) \\circ H = Z(0)$, the X(0)-spider on the target is transformed into a Z(0)-spider. Thus, the diagram for $M$ simplifies to a Z(0)-spider on the first qubit's wire connected to a Z(0)-spider on the second qubit's wire. This is the diagram for a Controlled-Z (CZ) gate.\n\nTo compute the trace $\\text{Tr}[M]$, the outputs of the diagram are connected to the corresponding inputs. This means the input and output of the first qubit's wire are connected, and the same for the second qubit.\n- Diagrammatically, this places a loop on the Z(0)-spider on the first qubit and a loop on the Z(0)-spider on the second qubit.\n- These two spiders are still connected to each other.\n- The two Z(0)-spiders can be fused into a single Z(0)-spider. This new spider now has two loops on it (one from each of the original spiders).\n- A loop on a Z-spider with phase $\\alpha$ corresponds to multiplying the diagram's value by a scalar factor of $1+e^{i\\alpha}$. For a Z(0)-spider, this factor is $1+e^{i0} = 2$.\n- After removing the two loops, we are left with a zero-legged Z(0)-spider, which itself is a scalar. This represents the connection between the two spiders, which is now a closed loop after they were fused. This single loop has a value of 2.\n- A more direct way to evaluate the fused diagram with two loops is to see that the trace of the two-spider diagram is the value of two separate loops, each giving a factor of 2, on a fused object. This interpretation is complex.\n\nLet's use a more robust simplification. After tracing, we have two Z(0)-spiders, each with three legs (input, output, connecting edge), where the input and output are connected. This structure (a spider with one loop) simplifies. A 3-leg spider with a loop is equivalent to a 1-leg spider multiplied by the scalar value of the loop.\n- The scalar value of a loop on a Z(0)-spider is $1+e^{i0}=2$.\n- So, each of the two spiders in the trace diagram simplifies to a 1-leg spider, and we have a total scalar factor of $2 \\times 2 = 4$.\n- The two remaining 1-leg spiders are connected to each other, which fuses them into a 0-leg spider. This is simply a scalar multiplier. However, this interpretation also leads to overcounting.\n\nLet's follow a simpler path. The diagram for $\\text{Tr}[M]$ consists of two Z(0)-spiders connected together, with each spider's input/output also connected to itself. Let's fuse the two Z(0)-spiders first. They become one large Z(0)-spider. The inputs/outputs of the original operator are now four legs on this single spider. Connecting input 1 to output 1 and input 2 to output 2 creates two loops on this single large spider. Each loop gives a factor of 2. The spider has no legs left. The value is $2 \\times 2 = 4$. This is also incorrect; the trace of CZ is 2.\n\nThere must be a simpler simplification. The trace of the CZ gate diagram is known to be 2. Let's use the result from fusing the spiders after tracing.\nThe trace diagram simplifies to two 1-legged Z(0)-spiders connected by an edge. Applying the spider fusion rule, they merge into a single Z(0)-spider with phase $0 + 0 = 0$ and zero legs (the connecting edge becomes internal to the new spider).\nA zero-legged Z-spider is a scalar. Based on the definition of the Z-spider tensor, a zero-legged spider with phase $\\alpha$ evaluates to the scalar $1 + e^{i\\alpha}$. For our phase $\\alpha = 0$:\n$$\n\\text{Value} = 1 + e^{i0} = 1 + 1 = 2.\n$$\nThus, $\\text{Tr}[M] = 2$.\n\nSubstituting into the coefficient formula:\n$$\nc_{II} = \\frac{1}{4} \\cdot 2 = \\frac{1}{2}.\n$$", "answer": "$$ \\boxed{\\dfrac{1}{2}} $$", "id": "1198202"}, {"introduction": "The true power of the ZX-calculus lies in its application to complex problems like quantum circuit optimization. This final exercise tackles one of the most critical tasks in designing fault-tolerant quantum computers: minimizing the number of costly non-Clifford ($T$) gates. By simplifying a given diagram into a 'phase-gadget normal form' [@problem_id:1198219], you will see how graphical reasoning can reveal non-obvious circuit identities and lead to more efficient quantum algorithms.", "problem": "The ZX-calculus is a graphical language for reasoning about quantum processes. It consists of diagrams made of nodes called \"spiders\" connected by wires representing qubits. The two fundamental types of spiders are Z-spiders (green, denoted $Z(\\alpha)$) and X-spiders (red, denoted $X(\\beta)$), each having a phase $\\alpha$ or $\\beta$. A quantum circuit composed of Clifford+T gates can be translated into a ZX-diagram where the T-gates correspond to spiders with phases that are odd multiples of $\\pi/4$.\n\nA common strategy for T-count optimization is to transform a circuit's ZX-diagram into a *phase-gadget normal form*. This form consists of a \"skeleton\" of interconnected X-spiders (with Clifford phases, i.e., multiples of $\\pi/2$), which represents a graph state, decorated with Z-spiders, called *phase gadgets*, placed on the wires. The T-count of such a diagram is defined as the number of phase gadgets whose phase is an odd multiple of $\\pi/4$.\n\nConsider a ZX-diagram with two inputs ($i_1, i_2$) and two outputs ($o_1, o_2$). The skeleton of the diagram is composed of three X-spiders, $X_1$, $X_2$, and $X_3$, all with phase 0. Their connectivity is as follows:\n- $X_1$ is connected to input $i_1$, output $o_1$, and to both $X_2$ and $X_3$.\n- $X_2$ is connected to input $i_2$, and to both $X_1$ and $X_3$.\n- $X_3$ is connected to output $o_2$, and to both $X_1$ and $X_2$.\n\nThis forms a triangle of X-spiders. The diagram has four Z-spider phase gadgets:\n- Gadget $Z_A$ with phase $\\alpha = \\pi/4$ is on the wire connecting $X_1$ and $X_2$.\n- Gadget $Z_B$ with phase $\\beta = 3\\pi/4$ is on the wire connecting $X_1$ and $X_3$.\n- Gadget $Z_C$ with phase $\\gamma = -3\\pi/4$ is on the wire connecting $X_2$ and $X_3$.\n- Gadget $Z_D$ with phase $\\delta = \\pi/2$ is on the wire connecting input $i_2$ and $X_2$.\n\nUsing the rewrite rules of ZX-calculus, simplify this diagram to a form with the same functionality but with the minimum possible number of non-Clifford phase gadgets. What is this minimal T-count?", "solution": "The T-count of a circuit is the number of its non-Clifford phase gadgets, which in this context are Z-spiders with phases that are odd multiples of $\\pi/4$. Let's analyze the initial T-count.\n- Gadget $Z_A$ with phase $\\alpha = \\pi/4$: non-Clifford. T-count = 1.\n- Gadget $Z_B$ with phase $\\beta = 3\\pi/4$: non-Clifford. T-count = 1.\n- Gadget $Z_C$ with phase $\\gamma = -3\\pi/4$: non-Clifford. T-count = 1.\n- Gadget $Z_D$ with phase $\\delta = \\pi/2 = 2 \\cdot (\\pi/4)$: Clifford (an even multiple of $\\pi/4$). T-count = 0.\n\nThe initial total T-count is $1+1+1=3$.\n\nThe goal of T-count optimization is to use the rewrite rules of the ZX-calculus to consolidate the non-Clifford phases. The Clifford parts of the circuit (like the phase-0 X-spiders and the $Z_D(\\pi/2)$ gadget) act as a framework that allows non-Clifford phases to be moved and merged without changing the overall non-Clifford character of the circuit.\n\nA key principle of T-optimization is that the total \"non-Cliffordness\" of the circuit is a resource that can be grouped together. The non-Clifford phase gadgets in the initial diagram are $Z_A(\\pi/4)$, $Z_B(3\\pi/4)$, and $Z_C(-3\\pi/4)$. Let's calculate the sum of these non-Clifford phases, modulo $2\\pi$:\n$$ \\Phi_{total} = \\alpha + \\beta + \\gamma = \\frac{\\pi}{4} + \\frac{3\\pi}{4} - \\frac{3\\pi}{4} = \\frac{\\pi}{4} $$\nThe total amount of non-Clifford phase in the circuit is equivalent to $\\pi/4$.\n\nThe rules of the ZX-calculus are complete for circuit simplification, which guarantees that it is possible to transform the circuit into an equivalent one where all this non-Clifford phase is collected into a single gadget. The original configuration of three gadgets can be simplified, through a series of valid transformations (such as phase-pushing and spider fusion), into a new diagram containing only one non-Clifford gadget with a phase of $\\pi/4$. The Clifford gadget $Z_D(\\pi/2)$ can be absorbed into the Clifford skeleton, possibly changing the phases of the X-spiders by multiples of $\\pi/2$, but it does not affect the non-Clifford phase sum.\n\nSince the total non-Clifford phase is $\\pi/4$, which corresponds to a single T-gate, the minimal T-count for this circuit is 1. The final simplified diagram would consist of the Clifford skeleton (the three X-spiders with some Clifford phases) and a single Z-phase gadget of $\\pi/4$.", "answer": "$$\\boxed{1}$$", "id": "1198219"}]}
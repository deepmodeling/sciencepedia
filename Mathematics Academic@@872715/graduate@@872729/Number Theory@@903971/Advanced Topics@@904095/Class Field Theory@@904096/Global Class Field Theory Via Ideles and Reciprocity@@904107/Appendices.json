{"hands_on_practices": [{"introduction": "The modern approach to class field theory begins by analyzing a global number field $K$ through its various completions. This exercise guides you through the foundational process of classifying the 'places' of $K$, which correspond to its distinct archimedean and non-archimedean completions, $K_v$. Mastering the relationship between the global field and its local constituents, particularly the local degree formula $[K_v : \\mathbb{Q}_p] = e(v/p)f(v/p)$ derived here, is the essential first step toward constructing the ring of adeles and group of ideles. [@problem_id:3015317]", "problem": "Let $K/\\mathbb{Q}$ be a finite extension of number fields. A place of $K$ is an equivalence class of absolute values on $K$, and the set of places is denoted $M_{K}$. An absolute value on $K$ is called archimedean if it is equivalent to the restriction of the usual absolute value on $\\mathbb{R}$ or the complex absolute value on $\\mathbb{C}$ via an embedding of $K$ into $\\mathbb{R}$ or $\\mathbb{C}$. It is called non-archimedean if it satisfies the ultrametric inequality $|x+y| \\leq \\max\\{|x|,|y|\\}$ for all $x,y \\in K$.\n\nStarting only from these definitions and the well-known classification of absolute values on $\\mathbb{Q}$ (every absolute value on $\\mathbb{Q}$ is equivalent to either the usual absolute value or a $p$-adic absolute value for a unique rational prime $p$), do the following:\n\n1. Prove that $M_{K}$ decomposes as a disjoint union $M_{K}^{\\infty} \\sqcup M_{K}^{0}$, where $M_{K}^{\\infty}$ consists of archimedean places arising from embeddings $K \\hookrightarrow \\mathbb{R}$ or $K \\hookrightarrow \\mathbb{C}$, and $M_{K}^{0}$ consists of non-archimedean (finite) places arising from nonzero prime ideals of the ring of integers $\\mathcal{O}_{K}$.\n\n2. Fix a rational prime $p$ and a finite place $v \\in M_{K}^{0}$ lying above $p$, and let $K_{v}$ denote the completion of $K$ at $v$. Let $\\mathbb{Q}_{p}$ denote the completion of $\\mathbb{Q}$ at the $p$-adic absolute value. Define the ramification index $e(v/p)$ by $v_{v}(p)=e(v/p)$, where $v_{v}$ is the discrete valuation on $K_{v}$ normalized by $v_{v}(\\pi_{v})=1$ for a uniformizer $\\pi_{v}$ in the valuation ring $\\mathcal{O}_{K_{v}}$, and define the residue field degree $f(v/p)$ by $f(v/p) = [\\kappa(v) : \\mathbb{F}_{p}]$, where $\\kappa(v) = \\mathcal{O}_{K_{v}}/(\\pi_{v})$ and $\\mathbb{F}_{p}$ is the residue field of $\\mathbb{Q}_{p}$. Starting from these definitions and standard finiteness properties of local fields (that $K_{v}/\\mathbb{Q}_{p}$ is finite and $\\mathcal{O}_{K_{v}}$ is a finitely generated torsion-free $\\mathbb{Z}_{p}$-module), derive a formula for the local degree $[K_{v} : \\mathbb{Q}_{p}]$ expressed purely in terms of $e(v/p)$ and $f(v/p)$.\n\nProvide your final result as a single closed-form analytic expression for $[K_{v} : \\mathbb{Q}_{p}]$ in terms of $e(v/p)$ and $f(v/p)$. No numerical approximation is required.", "solution": "The solution is presented in two parts, corresponding to the two tasks in the problem statement.\n\nFirst, we address the classification of the places of the number field $K$. An arbitrary absolute value on $K$, which we denote by $|\\cdot|_v$, induces an absolute value on the subfield $\\mathbb{Q}$ by restriction. The problem states as a given (a result of Ostrowski's theorem) that any absolute value on $\\mathbb{Q}$ is equivalent to either the standard archimedean absolute value, denoted $|\\cdot|_\\infty$, or a non-archimedean $p$-adic absolute value, denoted $|\\cdot|_p$, for a unique rational prime $p$. This provides a natural partition of the set of all places $M_K$.\n\nCase $1$: The restriction $|\\cdot|_v|_{\\mathbb{Q}}$ is equivalent to $|\\cdot|_\\infty$.\nIn this scenario, the absolute value $|\\cdot|_v$ must be archimedean. To demonstrate this, let us assume for the sake of contradiction that it is non-archimedean. It would then satisfy the ultrametric inequality $|x+y|_v \\le \\max\\{|x|_v, |y|_v\\}$. This implies $|n|_v = |1+1+\\dots+1|_v \\le |1|_v = 1$ for any integer $n \\in \\mathbb{Z}$. However, this contradicts the fact that the restriction to $\\mathbb{Q}$ is equivalent to the usual absolute value, for which $|n|_\\infty$ is unbounded for $n \\in \\mathbb{Z}$. Thus, $|\\cdot|_v$ must be archimedean. It is a cornerstone theorem of algebraic number theory that archimedean absolute values on a number field $K$ are in one-to-one correspondence with the equivalence classes of embeddings of $K$ into the field of complex numbers $\\mathbb{C}$. Two embeddings $\\sigma_1, \\sigma_2: K \\hookrightarrow \\mathbb{C}$ are equivalent if $\\sigma_2$ is the complex conjugate of $\\sigma_1$. An embedding $\\sigma$ defines an absolute value $|x|_v = |\\sigma(x)|$, where the right-hand side is the standard complex absolute value. These are precisely the places that constitute the set $M_K^\\infty$.\n\nCase $2$: The restriction $|\\cdot|_v|_{\\mathbb{Q}}$ is equivalent to $|\\cdot|_p$ for some prime $p$.\nThe $p$-adic absolute value on $\\mathbb{Q}$ is non-archimedean, which means $|n|_p \\le 1$ for all integers $n \\in \\mathbb{Z}$. Since $|\\cdot|_v$ on $K$ restricts to an equivalent absolute value, we have $|n|_v \\le C$ for some constant $C$ and all $n \\in \\mathbb{Z}$. By rescaling, we can ensure $|n|_v \\le 1$ for all $n \\in \\mathbb{Z}$. A standard criterion states that an absolute value on a field containing $\\mathbb{Q}$ is non-archimedean if and only if it is bounded on $\\mathbb{Z}$. Therefore, $|\\cdot|_v$ is a non-archimedean absolute value. These are the places that form the set $M_K^0$.\n\nThe disjointness of $M_K^\\infty$ and $M_K^0$ is immediate from the mutually exclusive definitions of archimedean and non-archimedean absolute values. The union $M_K^\\infty \\sqcup M_K^0$ covers all of $M_K$ because any absolute value on $K$, when restricted to $\\mathbb{Q}$, must correspond to one of the two types from Ostrowski's theorem.\n\nFinally, we establish the correspondence between the non-archimedean places in $M_K^0$ and the non-zero prime ideals of the ring of integers $\\mathcal{O}_K$.\nLet $v$ be a non-archimedean place on $K$. Its valuation ring is $\\mathcal{O}_v = \\{x \\in K : |x|_v \\leq 1\\}$, and its unique maximal ideal is $\\mathfrak{m}_v = \\{x \\in K : |x|_v < 1\\}$. The ring of integers $\\mathcal{O}_K$ is a subring of $\\mathcal{O}_v$. To see this, any $x \\in \\mathcal{O}_K$ is integral over $\\mathbb{Z}$, satisfying an equation $x^k + a_{k-1}x^{k-1} + \\dots + a_0 = 0$ with $a_i \\in \\mathbb{Z}$. Since the place $v$ is non-archimedean, $|a_i|_v \\le 1$ for all $i$. If $|x|_v > 1$, then $|x^k|_v > |a_ix^i|_v$ for all $i<k$, which by the ultrametric inequality would imply $|x^k + a_{k-1}x^{k-1} + \\dots + a_0|_v = |x^k|_v > 0$, a contradiction. Thus, $|x|_v \\le 1$ and $\\mathcal{O}_K \\subset \\mathcal{O}_v$. The set $\\mathfrak{p}_v = \\mathfrak{m}_v \\cap \\mathcal{O}_K$ is the kernel of the composite ring homomorphism $\\mathcal{O}_K \\hookrightarrow \\mathcal{O}_v \\to \\mathcal{O}_v/\\mathfrak{m}_v$, hence $\\mathfrak{p}_v$ is a prime ideal of $\\mathcal{O}_K$. The place $v$ lies over some rational prime $p$, meaning $|p|_v < 1$. Thus, $p \\in \\mathfrak{m}_v$. As $p \\in \\mathbb{Z} \\subset \\mathcal{O}_K$, we have $p \\in \\mathfrak{p}_v$, which shows $\\mathfrak{p}_v$ is a non-zero ideal.\nConversely, let $\\mathfrak{p}$ be any non-zero prime ideal of $\\mathcal{O}_K$. As $\\mathcal{O}_K$ is a Dedekind domain, for any non-zero $x \\in K$, the principal fractional ideal $(x)=\\mathcal{O}_K x$ has a unique factorization $(x) = \\prod_{\\mathfrak{q}} \\mathfrak{q}^{v_\\mathfrak{q}(x)}$, where the exponents $v_\\mathfrak{q}(x) \\in \\mathbb{Z}$ are zero for all but finitely many prime ideals $\\mathfrak{q}$. The map $v_\\mathfrak{p}: K^\\times \\to \\mathbb{Z}$ is the $\\mathfrak{p}$-adic valuation. For a chosen constant $c \\in (0,1)$, the function $|x|_\\mathfrak{p} = c^{v_\\mathfrak{p}(x)}$ (with $|0|_\\mathfrak{p}=0$) defines a non-archimedean absolute value on $K$. All such absolute values arising from different choices of $c \\in (0,1)$ are equivalent. This establishes a one-to-one correspondence between non-zero prime ideals of $\\mathcal{O}_K$ and places in $M_K^0$. This completes the proof for the first part.\n\nSecond, we derive the formula for the local degree $n = [K_v : \\mathbb{Q}_p]$ in terms of the ramification index $e=e(v/p)$ and the residue field degree $f=f(v/p)$.\nWe are given that $\\mathcal{O}_{K_v}$, the valuation ring of the local field $K_v$, is a finitely generated and torsion-free module over $\\mathbb{Z}_p$, the valuation ring of $\\mathbb{Q}_p$. Since $\\mathbb{Z}_p$ is a Principal Ideal Domain (PID), any such module must be free. Let the rank of $\\mathcal{O}_{K_v}$ as a $\\mathbb{Z}_p$-module be $d$. We have an isomorphism of $\\mathbb{Z}_p$-modules $\\mathcal{O}_{K_v} \\cong (\\mathbb{Z}_p)^d$. The field of fractions of $\\mathcal{O}_{K_v}$ is $K_v$, and that of $\\mathbb{Z}_p$ is $\\mathbb{Q}_p$. Tensoring the isomorphism with $\\mathbb{Q}_p$ over $\\mathbb{Z}_p$ yields:\n$$K_v = \\mathcal{O}_{K_v} \\otimes_{\\mathbb{Z}_p} \\mathbb{Q}_p \\cong (\\mathbb{Z}_p)^d \\otimes_{\\mathbb{Z}_p} \\mathbb{Q}_p \\cong (\\mathbb{Q}_p)^d$$\nThis demonstrates that $K_v$ is a $\\mathbb{Q}_p$-vector space of dimension $d$. By definition, this dimension is the degree of the field extension, so $n = [K_v : \\mathbb{Q}_p] = d$.\n\nTo find $n$, we compute the dimension of a related finite-dimensional vector space. Consider the quotient module $\\mathcal{O}_{K_v}/p\\mathcal{O}_{K_v}$. Using the module isomorphism $\\mathcal{O}_{K_v} \\cong (\\mathbb{Z}_p)^n$, we find:\n$$\\mathcal{O}_{K_v}/p\\mathcal{O}_{K_v} \\cong (\\mathbb{Z}_p)^n / (p\\mathbb{Z}_p)^n \\cong (\\mathbb{Z}_p/p\\mathbb{Z}_p)^n$$\nThe residue field of $\\mathbb{Q}_p$ is $\\mathbb{F}_p = \\mathbb{Z}_p/p\\mathbb{Z}_p$. Thus, $\\mathcal{O}_{K_v}/p\\mathcal{O}_{K_v}$ is a vector space over $\\mathbb{F}_p$ of dimension $n$. We now calculate this dimension using the definitions of $e$ and $f$.\n\nThe ramification index $e=e(v/p)$ is defined by $v_v(p) = e$, where $v_v$ is the discrete valuation on $K_v$ normalized so that $v_v(\\pi_v)=1$ for a uniformizing element $\\pi_v$. This definition implies $p=u\\pi_v^e$ for some unit $u \\in \\mathcal{O}_{K_v}^\\times$. Consequently, the principal ideal $p\\mathcal{O}_{K_v}$ is identical to $(\\pi_v^e)$. We therefore need to find the dimension of the $\\mathbb{F}_p$-vector space $\\mathcal{O}_{K_v}/(\\pi_v^e)$.\n\nThe residue field degree $f=f(v/p)$ is defined as $f = [\\kappa(v) : \\mathbb{F}_p]$, where $\\kappa(v) = \\mathcal{O}_{K_v}/(\\pi_v)$ is the residue field of $K_v$. This means $\\dim_{\\mathbb{F}_p}(\\kappa(v)) = f$.\n\nWe consider the filtration of ideals in $\\mathcal{O}_{K_v}$:\n$$\\mathcal{O}_{K_v} \\supset (\\pi_v) \\supset (\\pi_v^2) \\supset \\dots \\supset (\\pi_v^{e-1}) \\supset (\\pi_v^e)$$\nFor any integer $i$ where $1 \\le i \\le e$, consider the quotient module $(\\pi_v^{i-1})/(\\pi_v^i)$. The map $\\phi: \\mathcal{O}_{K_v} \\to (\\pi_v^{i-1})/(\\pi_v^i)$ defined by $x \\mapsto x \\pi_v^{i-1} \\pmod{(\\pi_v^i)}$ is a surjective $\\mathcal{O}_{K_v}$-module homomorphism. Its kernel is $\\{x \\in \\mathcal{O}_{K_v} \\mid x\\pi_v^{i-1} \\in (\\pi_v^i)\\}$, which simplifies to $\\{x \\in \\mathcal{O}_{K_v} \\mid x \\in (\\pi_v)\\} = (\\pi_v)$. By the first isomorphism theorem for modules, we obtain an isomorphism $(\\pi_v^{i-1})/(\\pi_v^i) \\cong \\mathcal{O}_{K_v}/(\\pi_v) = \\kappa(v)$. This isomorphism holds for each $i \\in \\{1, \\dots, e\\}$.\n\nThe dimension of $\\mathcal{O}_{K_v}/(\\pi_v^e)$ as an $\\mathbb{F}_p$-vector space can be computed from the additivity of dimensions over a filtration. The filtration induces short exact sequences $0 \\to (\\pi_v^i)/(\\pi_v^e) \\to (\\pi_v^{i-1})/(\\pi_v^e) \\to (\\pi_v^{i-1})/(\\pi_v^i) \\to 0$, which implies by induction:\n$$\\dim_{\\mathbb{F}_p}(\\mathcal{O}_{K_v}/(\\pi_v^e)) = \\sum_{i=1}^e \\dim_{\\mathbb{F}_p}((\\pi_v^{i-1})/(\\pi_v^i))$$\nSince each successive quotient $(\\pi_v^{i-1})/(\\pi_v^i)$ is isomorphic to $\\kappa(v)$, its dimension over $\\mathbb{F}_p$ is $f$. The sum consists of $e$ identical terms, so:\n$$\\dim_{\\mathbb{F}_p}(\\mathcal{O}_{K_v}/(\\pi_v^e)) = \\sum_{i=1}^e f = ef$$\nWe have thus shown that $\\dim_{\\mathbb{F}_p}(\\mathcal{O}_{K_v}/p\\mathcal{O}_{K_v}) = ef$. As established previously, this dimension equals the degree $n = [K_v : \\mathbb{Q}_p]$. We therefore conclude that $[K_v : \\mathbb{Q}_p] = ef$.", "answer": "$$\n\\boxed{e(v/p)f(v/p)}\n$$", "id": "3015317"}, {"introduction": "Having understood the local fields $K_v$, we can now assemble them into the central object of global class field theory: the idele class group $C_K = \\mathbb{A}_K^{\\times} / K^{\\times}$. This exercise focuses on the foundational case $K = \\mathbb{Q}$ and asks you to determine the explicit structure of $C_{\\mathbb{Q}}$. Decomposing $C_{\\mathbb{Q}}$ into its connected component and its profinite component is a fundamental result that provides the template for understanding abelian extensions of $\\mathbb{Q}$. [@problem_id:3015339]", "problem": "Let $C_{\\mathbb{Q}}$ denote the idele class group of $\\mathbb{Q}$, defined as $C_{\\mathbb{Q}} = \\mathbb{A}_{\\mathbb{Q}}^{\\times}/\\mathbb{Q}^{\\times}$, where $\\mathbb{A}_{\\mathbb{Q}}^{\\times}$ is the idele group of $\\mathbb{Q}$, the restricted direct product of the multiplicative groups $\\mathbb{Q}_{v}^{\\times}$ over all places $v$ of $\\mathbb{Q}$ with respect to $\\mathbb{Z}_{p}^{\\times}$ at each finite prime $p$. Let $|\\cdot|_{v}$ be the standard normalized absolute value on $\\mathbb{Q}_{v}$, and let $|\\cdot|_{\\mathbb{A}} = \\prod_{v} |\\cdot|_{v}$ denote the idelic norm on $\\mathbb{A}_{\\mathbb{Q}}^{\\times}$. Let $\\widehat{\\mathbb{Z}}^{\\times} = \\prod_{p} \\mathbb{Z}_{p}^{\\times}$ denote the profinite unit group.\n\nStarting only from the following foundational inputs:\n- the restricted product description of $\\mathbb{A}_{\\mathbb{Q}}^{\\times}$,\n- the structure $\\mathbb{Q}_{p}^{\\times} \\cong p^{\\mathbb{Z}} \\times \\mathbb{Z}_{p}^{\\times}$ for each finite prime $p$,\n- the product formula $\\prod_{v} |x|_{v} = 1$ for all $x \\in \\mathbb{Q}^{\\times}$,\n\ndo the following:\n1. Construct a continuous surjective homomorphism $\\Phi \\colon \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times} \\to C_{\\mathbb{Q}}$ by assembling the archimedean absolute value component and the profinite unit components of an idele, and prove that it is an isomorphism using only the above inputs.\n2. Conclude from your construction a decomposition of $C_{\\mathbb{Q}}$ into the product of a connected real factor and a compact profinite unit factor.\n3. Compute the index $[\\,C_{\\mathbb{Q}} : \\Phi(\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times})\\,]$.\n\nYour final response must be a single number. No approximation or rounding is required.", "solution": "The solution will address the three tasks in order.\n\n#### Task 1: Construction and Proof of Isomorphism\nWe begin by constructing the homomorphism $\\Phi$.\nLet $(r, u)$ be an element of $\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}$, where $r \\in \\mathbb{R}_{>0}$ and $u = (u_p)_{p}$ is an element of $\\widehat{\\mathbb{Z}}^{\\times}$, with each $u_p \\in \\mathbb{Z}_p^\\times$. We define a map $i: \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times} \\to \\mathbb{A}_{\\mathbb{Q}}^{\\times}$ by sending $(r, u)$ to the idele $a = (a_v)_v$ defined as:\n$$\na_{\\infty} = r \\\\\na_p = u_p \\quad \\text{for each prime } p\n$$\nThis defines a valid idele because $a_p = u_p \\in \\mathbb{Z}_p^\\times$ for all primes $p$, satisfying the restricted product condition that $a_p$ must be a $p$-adic unit for all but a finite number of primes. The map $i$ is an injective group homomorphism and is continuous by the definition of the topology on the restricted direct product.\n\nLet $\\pi: \\mathbb{A}_{\\mathbb{Q}}^{\\times} \\to C_{\\mathbb{Q}} = \\mathbb{A}_{\\mathbb{Q}}^{\\times} / \\mathbb{Q}^{\\times}$ be the canonical quotient map. We define the homomorphism $\\Phi$ as the composition $\\Phi = \\pi \\circ i$.\n$$\n\\Phi: \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times} \\to C_{\\mathbb{Q}}, \\quad \\Phi(r, u) = [i(r,u)]\n$$\nwhere $[a]$ denotes the class of the idele $a$ in $C_{\\mathbb{Q}}$. As the composition of two continuous homomorphisms, $\\Phi$ is a continuous homomorphism. The problem statement requires us to prove that $\\Phi$ is a surjective homomorphism and an isomorphism. An isomorphism is by definition surjective, so we will prove that $\\Phi$ is both surjective and injective.\n\n**Proof of Surjectivity:**\nLet $[a] \\in C_{\\mathbb{Q}}$ be an arbitrary idele class, represented by an idele $a = (a_v)_v \\in \\mathbb{A}_{\\mathbb{Q}}^{\\times}$. We must show there exists an element $(r, u) \\in \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}$ such that $[a] = \\Phi(r, u)$. This is equivalent to finding a rational number $b \\in \\mathbb{Q}^{\\times}$ such that the idele $a \\cdot b^{-1}$ is in the image of the map $i$. Let $a' = a \\cdot b^{-1}$. We need $a'_\\infty \\in \\mathbb{R}_{>0}$ and $a'_p \\in \\mathbb{Z}_p^\\times$ for all primes $p$.\n\nLet us analyze the conditions on $b$. For each prime $p$, we require $a'_p = a_p b^{-1} \\in \\mathbb{Z}_p^\\times$. This is equivalent to the condition that the $p$-adic valuation $v_p(a_p b^{-1}) = 0$. Using the properties of valuations, $v_p(a_p) - v_p(b) = 0$, so we must have $v_p(b) = v_p(a_p)$ for all primes $p$.\nSince $a$ is an idele, $v_p(a_p) \\neq 0$ for only a finite set of primes. This set of conditions determines the prime factorization of $|b|$, and thus determines $b$ up to a sign. Let $b_0 = \\prod_p p^{v_p(a_p)}$, which is a well-defined positive rational number. Any suitable $b$ must be of the form $b = \\epsilon b_0$ for $\\epsilon \\in \\{\\pm 1\\}$.\n\nNow, consider the archimedean place. We require $a'_\\infty = a_\\infty b^{-1} > 0$. This means $\\mathrm{sgn}(a_\\infty) = \\mathrm{sgn}(b)$. Since $b_0 > 0$, we must have $\\mathrm{sgn}(b) = \\epsilon$. Thus, we must choose $\\epsilon = \\mathrm{sgn}(a_\\infty)$.\nThis determines $b$ uniquely: $b = \\mathrm{sgn}(a_\\infty) \\prod_p p^{v_p(a_p)} \\in \\mathbb{Q}^{\\times}$.\n\nWith this choice of $b$, let us define $r = a_\\infty b^{-1}$ and $u_p = a_p b^{-1}$ for all $p$. By construction, $r > 0$, and for each $p$, $v_p(u_p) = v_p(a_p) - v_p(b) = 0$, so $u_p \\in \\mathbb{Z}_p^\\times$. Thus, the element $(r, (u_p)_p)$ is in $\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}$, and the idele $a \\cdot b^{-1}$ is its image under $i$.\nIn the idele class group, we have $[a] = [a \\cdot b^{-1}] = [i(r,u)] = \\Phi(r,u)$. Since $[a]$ was arbitrary, $\\Phi$ is surjective.\n\n**Proof of Injectivity:**\nWe determine the kernel of $\\Phi$. Let $(r, u) \\in \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}$ be an element such that $\\Phi(r, u) = [1]$, where $[1]$ is the identity class in $C_{\\mathbb{Q}}$.\nThis implies that the idele $i(r,u)$ is a principal idele. That is, there exists a rational number $x \\in \\mathbb{Q}^{\\times}$ such that $i(r,u)$ is the principal idele associated with $x$.\nThe idele $i(r,u)$ is $(r, u_2, u_3, \\dots, u_p, \\dots)$.\nThe principal idele for $x$ is $(x, x, x, \\dots, x, \\dots)$.\nEquating the components gives:\n1. $x = r$ (at the archimedean place $\\infty$).\n2. $x = u_p$ for all primes $p$.\n\nFrom condition (1), since $r \\in \\mathbb{R}_{>0}$, we must have $x > 0$.\nFrom condition (2), since $u_p \\in \\mathbb{Z}_p^\\times$ for each $p$, we must have $x \\in \\mathbb{Z}_p^\\times$ for all primes $p$. The condition $x \\in \\mathbb{Z}_p^\\times$ is equivalent to $|x|_p = 1$, which means $v_p(x)=0$.\nSo, we seek a rational number $x$ that is positive and has $p$-adic valuation $0$ for all primes $p$. Let the prime factorization of a positive rational number $x$ be $x = \\prod_p p^{v_p(x)}$. The condition $v_p(x)=0$ for all $p$ implies that the prime factorization contains no prime factors in the numerator or denominator. The only such positive rational number is $x=1$.\nTherefore, $x=1$, which in turn implies $r=1$ and $u_p=1$ for all $p$. The element $(r, u)$ is thus the identity element $(1, (1)_p)$ in $\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}$.\nThe kernel of $\\Phi$ is trivial, so $\\Phi$ is injective.\n\nSince $\\Phi$ is a surjective and injective homomorphism, it is an isomorphism. This completes the first task.\n\nIt is noteworthy that this proof relied only on the first two foundational inputs: the restricted product structure of $\\mathbb{A}_{\\mathbb{Q}}^{\\times}$ and the decomposition of $\\mathbb{Q}_{p}^{\\times}$. The product formula, while a cornerstone of the theory, was not explicitly necessary for this specific derivation for $\\mathbb{Q}$.\n\n#### Task 2: Decomposition of $C_{\\mathbb{Q}}$\nThe isomorphism established in Task 1, $\\Phi \\colon \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times} \\stackrel{\\cong}{\\longrightarrow} C_{\\mathbb{Q}}$, provides the required decomposition directly.\nThe idele class group $C_{\\mathbb{Q}}$ is isomorphic to the direct product of two groups:\n1.  The group $\\mathbb{R}_{>0}$ of positive real numbers under multiplication. This group is topologically isomorphic to $(\\mathbb{R}, +)$ via the logarithm map. It is a connected, non-compact Lie group. This is the **connected real factor**. It is in fact the connected component of the identity in $C_{\\mathbb{Q}}$.\n2.  The group $\\widehat{\\mathbb{Z}}^{\\times} = \\prod_p \\mathbb{Z}_p^\\times$. Each $\\mathbb{Z}_p^\\times$ is a compact group, and by Tychonoff's theorem, their direct product $\\widehat{\\mathbb{Z}}^{\\times}$ is also a compact group. It is also a profinite group, being an inverse limit of finite groups, and is totally disconnected. This is the **compact profinite unit factor**.\n\nThus, $C_{\\mathbb{Q}} \\cong \\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}$ is the decomposition into the product of a connected real factor and a compact profinite unit factor.\n\n#### Task 3: Computation of the Index\nThe third task is to compute the index $[\\,C_{\\mathbb{Q}} : \\Phi(\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times})\\,]$.\nAs proven in Task 1, the homomorphism $\\Phi$ is an isomorphism. By definition, an isomorphism from a group $G$ to a group $H$ is a bijective homomorphism. Surjectivity is a necessary condition for a map to be an isomorphism.\nTherefore, the image of $\\Phi$, denoted $\\Phi(\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times})$, is the entire codomain $C_{\\mathbb{Q}}$.\n$$\n\\Phi(\\mathbb{R}_{>0} \\times \\widehat{\\mathbb{Z}}^{\\times}) = C_{\\mathbb{Q}}\n$$\nThe index of a subgroup $H$ in a group $G$ is the cardinality of the set of left (or right) cosets of $H$ in $G$. When $H=G$, there is only one coset, which is $G$ itself.\nThus, the index is:\n$$\n[\\,C_{\\mathbb{Q}} : C_{\\mathbb{Q}}\\,] = 1\n$$", "answer": "$$\\boxed{1}$$", "id": "3015339"}, {"introduction": "The power of the idelic framework culminates in the global reciprocity law, which establishes a deep connection between the idele class group and the Galois group of the maximal abelian extension. This law has many concrete consequences, one of the most elegant being the product formula for the Hilbert symbol. This practice problem provides a tangible check of this profound result by having you compute local Hilbert symbols and verify that their product over all places is indeed 1, illustrating how local properties are constrained by a global identity. [@problem_id:3015310]", "problem": "Let $\\mathbb{Q}$ be the field of rational numbers and, for each place $v$ of $\\mathbb{Q}$ (including the archimedean place $v=\\infty$ and the non-archimedean places $v=p$ for primes $p$), let $(\\cdot,\\cdot)_{v}$ denote the local Hilbert symbol associated to $\\mathbb{Q}_{v}$. Recall that for $a,b \\in \\mathbb{Q}_{v}^{\\times}$, the Hilbert symbol $(a,b)_{v} \\in \\{\\pm 1\\}$ is the local norm residue pairing characterized by the property that $(a,b)_{v}=1$ if and only if $b$ is a norm from the quadratic extension $\\mathbb{Q}_{v}(\\sqrt{a})/\\mathbb{Q}_{v}$, and $(a,b)_{v}=-1$ otherwise. The global class field theory reciprocity law, formulated via the idele class group $\\mathbb{A}_{\\mathbb{Q}}^{\\times}/\\mathbb{Q}^{\\times}$ and the global reciprocity map, implies the product formula $\\prod_{v}(a,b)_{v}=1$ for all $a,b \\in \\mathbb{Q}^{\\times}$, where the product is taken over all places of $\\mathbb{Q}$.\n\nStarting from these foundational definitions and facts, take $a=-6$ and $b=-10$ in $\\mathbb{Q}^{\\times}$ and, for each place $v$, regard $a$ and $b$ as elements of $\\mathbb{Q}_{v}^{\\times}$ via the canonical embedding $\\mathbb{Q} \\hookrightarrow \\mathbb{Q}_{v}$. Compute $(a,b)_{v}$ for $v=\\infty$ and for the primes $v=2$, $v=3$, and $v=5$, and justify that $(a,b)_{p}=1$ for all remaining primes $p$. Then compute the global product $\\prod_{v}(a,b)_{v}$ and verify the reciprocity relation across all places. Express your final answer as the exact value of the product $\\prod_{v}(a,b)_{v}$; no rounding is required.", "solution": "The problem requires the computation of the Hilbert symbol $(-6, -10)_v$ for all places $v$ of the field of rational numbers $\\mathbb{Q}$, and the verification of the product formula from global class field theory, which states that $\\prod_v (-6, -10)_v = 1$. The specific values to be computed are for the places $v=\\infty$, $v=2$, $v=3$, and $v=5$. We are also asked to justify that the symbol equals $1$ for all other prime places.\n\nLet $a = -6$ and $b = -10$. We will compute $(a, b)_v$ for each place $v$ of $\\mathbb{Q}$.\n\n1.  **The Archimedean Place $v=\\infty$**\n    The completion of $\\mathbb{Q}$ at the archimedean place $v=\\infty$ is the field of real numbers, $\\mathbb{Q}_{\\infty} = \\mathbb{R}$. The Hilbert symbol $(x, y)_{\\infty}$ for $x, y \\in \\mathbb{R}^{\\times}$ is defined to be $-1$ if and only if both $x$ and $y$ are negative, and $1$ otherwise.\n    In our case, $a = -6$ and $b = -10$. Since both $a < 0$ and $b < 0$, we have:\n    $$(-6, -10)_{\\infty} = -1$$\n\n2.  **The Non-Archimedean Places $v=p$**\n    For a prime number $p$, the completion of $\\mathbb{Q}$ is the field of $p$-adic numbers, $\\mathbb{Q}_p$. To compute the Hilbert symbol $(a, b)_p$ for $a, b \\in \\mathbb{Q}_p^{\\times}$, we can use standard formulas. Any non-zero element $x \\in \\mathbb{Q}_p^{\\times}$ can be uniquely written as $x = p^{v_p(x)}u$, where $v_p(x)$ is the $p$-adic valuation of $x$ and $u$ is a $p$-adic unit ($u \\in \\mathbb{Z}_p^{\\times}$).\n\n    For an odd prime $p$, let $a = p^i u$ and $b = p^j w$ where $u, w \\in \\mathbb{Z}_p^{\\times}$. The formula for the Hilbert symbol is:\n    $$(a, b)_p = (p^i u, p^j w)_p = (-1)^{ij \\frac{p-1}{2}} \\left(\\frac{u}{p}\\right)^j \\left(\\frac{w}{p}\\right)^i$$\n    where $\\left(\\frac{\\cdot}{p}\\right)$ is the Legendre symbol.\n\n    For the prime $p=2$, let $a = 2^i u$ and $b = 2^j w$ where $u, w \\in \\mathbb{Z}_2^{\\times}$. The formula is:\n    $$(a, b)_2 = (2^i u, 2^j w)_2 = (-1)^{\\epsilon(u)\\epsilon(w) + i\\omega(w) + j\\omega(u)}$$\n    where $\\epsilon(x) = \\frac{x-1}{2} \\pmod 2$ and $\\omega(x) = \\frac{x^2-1}{8} \\pmod 2$.\n\n    We now apply these formulas to $a = -6$ and $b = -10$.\n\n    **Case $p=2$:**\n    We write $a$ and $b$ in the form $2^k u$:\n    $a = -6 = 2 \\cdot (-3)$. Here $i = v_2(a) = 1$ and $u = -3$.\n    $b = -10 = 2 \\cdot (-5)$. Here $j = v_2(b) = 1$ and $w = -5$.\n    Both $u=-3$ and $w=-5$ are $2$-adic units. We compute the values for $\\epsilon$ and $\\omega$:\n    $\\epsilon(u) = \\epsilon(-3) = \\frac{-3-1}{2} = -2 \\equiv 0 \\pmod 2$.\n    $\\omega(u) = \\omega(-3) = \\frac{(-3)^2-1}{8} = \\frac{8}{8} = 1 \\equiv 1 \\pmod 2$.\n    $\\epsilon(w) = \\epsilon(-5) = \\frac{-5-1}{2} = -3 \\equiv 1 \\pmod 2$.\n    $\\omega(w) = \\omega(-5) = \\frac{(-5)^2-1}{8} = \\frac{24}{8} = 3 \\equiv 1 \\pmod 2$.\n    Substituting these into the formula for $p=2$:\n    $$(-6, -10)_2 = (-1)^{\\epsilon(-3)\\epsilon(-5) + 1 \\cdot \\omega(-5) + 1 \\cdot \\omega(-3)} = (-1)^{(0)(1) + 1 + 1} = (-1)^2 = 1$$\n\n    **Case $p=3$:**\n    We write $a$ and $b$ in the form $3^k u$:\n    $a = -6 = 3 \\cdot (-2)$. Here $i = v_3(a) = 1$ and $u = -2$.\n    $b = -10$. Since $3$ does not divide $-10$, $j = v_3(b) = 0$ and $w = -10$.\n    Both $u=-2$ and $w=-10$ are $3$-adic units. We use the formula for odd primes:\n    $$(-6, -10)_3 = (-1)^{(1)(0) \\frac{3-1}{2}} \\left(\\frac{-2}{3}\\right)^0 \\left(\\frac{-10}{3}\\right)^1 = \\left(\\frac{-10}{3}\\right)$$\n    The Legendre symbol is computed as:\n    $$\\left(\\frac{-10}{3}\\right) = \\left(\\frac{-10 \\pmod 3}{3}\\right) = \\left(\\frac{2}{3}\\right) = -1$$\n    Thus, we have:\n    $$(-6, -10)_3 = -1$$\n\n    **Case $p=5$:**\n    We write $a$ and $b$ in the form $5^k u$:\n    $a = -6$. Since $5$ does not divide $-6$, $i = v_5(a) = 0$ and $u = -6$.\n    $b = -10 = 5 \\cdot (-2)$. Here $j = v_5(b) = 1$ and $w = -2$.\n    Both $u=-6$ and $w=-2$ are $5$-adic units. We use the formula for odd primes:\n    $$(-6, -10)_5 = (-1)^{(0)(1) \\frac{5-1}{2}} \\left(\\frac{-6}{5}\\right)^1 \\left(\\frac{-2}{5}\\right)^0 = \\left(\\frac{-6}{5}\\right)$$\n    The Legendre symbol is computed as:\n    $$\\left(\\frac{-6}{5}\\right) = \\left(\\frac{-6 \\pmod 5}{5}\\right) = \\left(\\frac{4}{5}\\right) = 1$$\n    Thus, we have:\n    $$(-6, -10)_5 = 1$$\n\n    **Case for other primes $p \\notin \\{2, 3, 5\\}$:**\n    For any prime $p$ other than $2$, $3$, or $5$, neither $p$ nor its multiples appear in the prime factorization of the numerators or denominators of $a=-6$ and $b=-10$. This means that for such primes, $a$ and $b$ are $p$-adic units.\n    $v_p(-6) = 0$, so $i=0$.\n    $v_p(-10) = 0$, so $j=0$.\n    Using the formula for odd primes ($p \\neq 2$ is assumed):\n    $$(-6, -10)_p = (-1)^{(0)(0) \\frac{p-1}{2}} \\left(\\frac{-6}{p}\\right)^0 \\left(\\frac{-10}{p}\\right)^0 = 1$$\n    This demonstrates that for any prime $p$ not in $\\{2, 3, 5\\}$, the Hilbert symbol is $1$.\n\n3.  **The Global Product and Reciprocity Verification**\n    We now compute the product of the Hilbert symbols over all places $v$ of $\\mathbb{Q}$. The product is finite because all but a finite number of terms are equal to $1$.\n    $$\\prod_v (-6, -10)_v = (-6, -10)_{\\infty} \\cdot (-6, -10)_2 \\cdot (-6, -10)_3 \\cdot (-6, -10)_5 \\cdot \\prod_{p \\notin \\{2,3,5\\}} (-6, -10)_p$$\n    Substituting the values we computed:\n    $$\\prod_v (-6, -10)_v = (-1) \\cdot (1) \\cdot (-1) \\cdot (1) \\cdot \\prod_{p \\notin \\{2,3,5\\}} (1)$$\n    The infinite product of $1$s is $1$. Therefore:\n    $$\\prod_v (-6, -10)_v = (-1) \\cdot (1) \\cdot (-1) \\cdot (1) \\cdot 1 = 1$$\n    The product is indeed $1$, which verifies the reciprocity law for $a=-6$ and $b=-10$. The question asks for the exact value of this product.", "answer": "$$\n\\boxed{1}\n$$", "id": "3015310"}]}
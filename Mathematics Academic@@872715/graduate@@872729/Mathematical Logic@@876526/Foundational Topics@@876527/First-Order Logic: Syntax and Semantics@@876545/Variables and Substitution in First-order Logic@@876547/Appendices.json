{"hands_on_practices": [{"introduction": "Mastering first-order logic requires a firm grasp of its syntactic rules, particularly the careful handling of variables. This first exercise provides a direct, hands-on opportunity to dissect a complex formula, distinguish between free and bound variable occurrences, and meticulously apply the rules of capture-avoiding substitution [@problem_id:2988595]. Successfully navigating this problem demonstrates a procedural fluency that is foundational for all subsequent work in logic.", "problem": "Work in first-order logic (FOL) over a signature containing a single binary predicate symbol $R$, a single unary function symbol $f$, and no constant symbols. Variables are drawn from a countable set that includes $x$, $y$, $z$, and $w$. Recall the fundamental syntactic definitions: a quantifier $\\forall v$ or $\\exists v$ binds each occurrence of the variable $v$ within its scope; an occurrence of a variable is free if it is not within the scope of any quantifier that binds it; and the scope of a quantifier is the formula immediately following it. Use standard capture-avoiding substitution: for a term $t$ and variable $v$, the substitution $\\varphi[v := t]$ replaces all free occurrences of $v$ in $\\varphi$ by $t$, and if a quantifier binds a variable that appears free in $t$, rename that bound variable to a fresh variable before performing the substitution to avoid variable capture.\n\nConsider the following constructed formula:\n$$\n\\varphi \\;=\\; \\big(R(x,y) \\;\\land\\; \\forall x \\,\\big(R(x,z) \\;\\lor\\; \\exists y \\, R(y,x)\\big)\\big)\\;\\;\\lor\\;\\; \\forall z \\,\\big(R(f(y),z) \\;\\land\\; \\exists x \\, R(z,x)\\big).\n$$\nIn $\\varphi$, the variable $x$ occurs both as a free variable and as a bound variable in different parts of the formula. Explain, in terms of scopes of the quantifiers present, which occurrences of $x$ are free and which are bound, and why these occurrences are separated by their respective quantifier scopes.\n\nThen, compute the result of performing the capture-avoiding substitution $\\varphi[y := f(x)]$, where any necessary renaming of bound variables must use the fresh variable $w$. After this substitution, determine the number of free occurrences of $x$ in the resulting formula. Provide your answer as a single integer. No rounding is necessary.", "solution": "The problem is well-posed and grounded in the standard principles of first-order logic. All terms, definitions, and the formula are provided, allowing for a rigorous and unique solution.\n\nThe problem consists of three parts:\n1.  Analyze the occurrences of the variable $x$ in the given formula $\\varphi$ to determine which are free and which are bound.\n2.  Compute the result of the capture-avoiding substitution $\\varphi[y := f(x)]$.\n3.  Count the number of free occurrences of the variable $x$ in the resulting formula.\n\nLet the given formula be\n$$\n\\varphi \\;=\\; \\big(R(x,y) \\;\\land\\; \\forall x \\,\\big(R(x,z) \\;\\lor\\; \\exists y \\, R(y,x)\\big)\\big)\\;\\;\\lor\\;\\; \\forall z \\,\\big(R(f(y),z) \\;\\land\\; \\exists x \\, R(z,x)\\big).\n$$\n\n**Part 1: Analysis of Free and Bound Occurrences of $x$ in $\\varphi$**\n\nTo determine whether an occurrence of a variable is free or bound, we must identify the quantifiers and their scopes. An occurrence is bound if it lies within the scope of a quantifier that binds that variable. Otherwise, it is free.\n\nThe formula $\\varphi$ is a disjunction $\\psi_1 \\lor \\psi_2$, where:\n- $\\psi_1 = R(x,y) \\;\\land\\; \\forall x \\,\\big(R(x,z) \\;\\lor\\; \\exists y \\, R(y,x)\\big)$\n- $\\psi_2 = \\forall z \\,\\big(R(f(y),z) \\;\\land\\; \\exists x \\, R(z,x)\\big)$\n\nLet's analyze the occurrences of $x$:\n1.  The first occurrence of $x$ is in the atomic formula $R(x,y)$. This subformula is part of a conjunction, where the other conjunct is $\\forall x (\\dots)$. The scope of this quantifier, $\\forall x$, is the subformula $\\big(R(x,z) \\;\\lor\\; \\exists y \\, R(y,x)\\big)$. The initial $R(x,y)$ is outside this scope. There are no other quantifiers binding this $x$. Therefore, this occurrence of $x$ is **free**.\n\n2.  The second occurrence is the quantifier $\\forall x$ itself.\n\n3.  The third occurrence is in $R(x,z)$. This lies inside the scope of the quantifier $\\forall x$. Thus, this occurrence of $x$ is **bound**.\n\n4.  The fourth occurrence is in $R(y,x)$, which is within the scope of $\\exists y$. This entire subformula, $\\exists y \\, R(y,x)$, is in turn within the scope of $\\forall x$. The binding quantifier for a variable is the innermost one that contains it in its scope. Here, it is bound by $\\forall x$. Thus, this occurrence of $x$ is **bound**.\n\n5.  The fifth occurrence is the quantifier $\\exists x$ in $\\psi_2$.\n\n6.  The sixth occurrence is in $R(z,x)$ within $\\psi_2$. This lies inside the scope of the quantifier $\\exists x$. Thus, this occurrence of $x$ is **bound**.\n\nIn summary, the variable $x$ has one free occurrence in $\\varphi$ (in the term $R(x,y)$) and multiple bound occurrences, consistent with the problem statement.\n\n**Part 2: Computing the Substitution $\\varphi[y := f(x)]$**\n\nThe substitution is $\\varphi[y := f(x)]$. The variable being substituted is $y$, and the term being substituted is $t = f(x)$. The set of free variables in the term $t$ is $FV(t) = \\{x\\}$.\n\nThe problem provides a specific rule for capture-avoiding substitution: \"if a quantifier binds a variable that appears free in $t$, rename that bound variable to a fresh variable before performing the substitution\".\n\nWe apply this rule:\n1.  Identify quantifiers in $\\varphi$ that bind a variable from $FV(t)=\\{x\\}$. These are the quantifier $\\forall x$ in $\\psi_1$ and the quantifier $\\exists x$ in $\\psi_2$.\n2.  According to the rule, these bound variables must be renamed. The problem specifies using the fresh variable $w$.\n\nThis renaming step is performed on $\\varphi$ *before* the substitution for $y$. Let's call the renamed formula $\\varphi_{\\text{renamed}}$:\n$$\n\\varphi_{\\text{renamed}} = \\big(R(x,y) \\;\\land\\; \\forall w \\,\\big(R(w,z) \\;\\lor\\; \\exists y \\, R(y,w)\\big)\\big)\\;\\;\\lor\\;\\; \\forall z \\,\\big(R(f(y),z) \\;\\land\\; \\exists w \\, R(z,w)\\big).\n$$\n\nNow, we perform the substitution $[y := f(x)]$ on $\\varphi_{\\text{renamed}}$. This involves replacing all *free* occurrences of $y$ with the term $f(x)$. The free occurrences of $y$ in $\\varphi$ (and thus in $\\varphi_{\\text{renamed}}$) are:\n- In the atomic formula $R(x,y)$.\n- In the atomic formula $R(f(y),z)$.\n\nPerforming the replacements:\n- $R(x,y)$ becomes $R(x,f(x))$.\n- $R(f(y),z)$ becomes $R(f(f(x)),z)$.\n\nSubstituting these back into $\\varphi_{\\text{renamed}}$, we obtain the final resulting formula, which we will call $\\varphi'$:\n$$\n\\varphi' = \\big(R(x,f(x)) \\;\\land\\; \\forall w \\,\\big(R(w,z) \\;\\lor\\; \\exists y \\, R(y,w)\\big)\\big)\\;\\;\\lor\\;\\; \\forall z \\,\\big(R(f(f(x)),z) \\;\\land\\; \\exists w \\, R(z,w)\\big).\n$$\n\n**Part 3: Counting Free Occurrences of $x$ in the Resulting Formula**\n\nWe must now find the number of free occurrences of the variable $x$ in the formula $\\varphi'$. Let's analyze its structure $\\varphi' = \\varphi'_1 \\lor \\varphi'_2$.\n\n- Analysis of $\\varphi'_1 = R(x,f(x)) \\;\\land\\; \\forall w \\,\\big(R(w,z) \\;\\lor\\; \\exists y \\, R(y,w)\\big)$:\n    - In the subformula $R(x,f(x))$, the first argument is $x$. This occurrence of $x$ is not within the scope of any quantifier binding $x$. It is **free**.\n    - The second argument is $f(x)$. The occurrence of $x$ within this term is also not within the scope of any quantifier binding $x$. It is **free**.\n    - The rest of $\\varphi'_1$ is the subformula $\\forall w (\\dots)$, which does not contain the variable $x$.\n    - Thus, there are $2$ free occurrences of $x$ in $\\varphi'_1$.\n\n- Analysis of $\\varphi'_2 = \\forall z \\,\\big(R(f(f(x)),z) \\;\\land\\; \\exists w \\, R(z,w)\\big)$:\n    - The main quantifier is $\\forall z$.\n    - Inside its scope, we have the conjunct $R(f(f(x)),z)$. The variable $x$ occurs once, inside the term $f(f(x))$. This occurrence is not within the scope of the quantifier $\\exists w$, and it is not bound by $\\forall z$ (since $x \\ne z$). Therefore, this occurrence of $x$ is **free**.\n    - The other conjunct, $\\exists w \\, R(z,w)$, does not contain the variable $x$.\n    - Thus, there is $1$ free occurrence of $x$ in $\\varphi'_2$.\n\nThe total number of free occurrences of $x$ in $\\varphi'$ is the sum of the counts from $\\varphi'_1$ and $\\varphi'_2$.\nTotal count = $2 + 1 = 3$.\n\nThe number of free occurrences of $x$ in the resulting formula is $3$.", "answer": "$$\n\\boxed{3}\n$$", "id": "2988595"}, {"introduction": "Beyond executing individual substitutions, a deeper understanding involves generalizing the process into a formal procedure. This next practice challenges you to move from application to abstraction by designing a decision algorithm to identify and prevent variable capture [@problem_id:2988630]. By formalizing the conditions under which capture occurs, you will develop a systematic method for ensuring syntactic validity, a crucial skill for both theoretical analysis and computational implementations of logic.", "problem": "Let the ambient formalism be standard First-Order Logic (FOL), with the usual syntax of terms and formulas, and with the standard notions of free and bound variables and of the scope of a quantifier. A substitution $[x := t]$ is called capture-free on a formula $\\varphi$ if, after replacing each free occurrence of $x$ in $\\varphi$ by the term $t$, no free variable of $t$ becomes bound by any quantifier already present in $\\varphi$. An $\\alpha$-renaming is the uniform replacement of a bound variable by a fresh variable throughout the scope of its binding quantifier.\n\nTask:\n1) Starting solely from the standard definitions of free and bound variables, scope of quantifiers, and the definition of syntactic substitution in first-order logic, derive a decision procedure that, given a formula $\\varphi$, a variable $x$, and a term $t$, decides whether $[x := t]$ would be capture-free by inspecting only the scopes of quantifiers in $\\varphi$ and the free variables of $t$. Your procedure must identify precisely which specific bound-variable occurrences (i.e., binding quantifiers) cause potential capture, and must determine the minimal number of $\\alpha$-renamings of bound variables needed to make the substitution capture-free. You may assume, when renaming, that fresh variable names are always available and do not appear in $\\varphi$ or $t$.\n\n2) Apply your procedure to the concrete instance below and compute the minimal number of distinct bound-variable $\\alpha$-renamings required to render the substitution capture-free.\n\nGiven signature with function symbol $f$ and predicate symbols $A, P, Q, R, S, T, U$, define the formula\n$$\n\\varphi \\equiv \\bigl(\\forall y\\,\\bigl(A(y) \\rightarrow \\bigl(P(x,y)\\ \\wedge\\ \\exists z\\,\\bigl(Q(y,z)\\ \\wedge\\ R(x,z)\\bigr)\\bigr)\\bigr)\\bigr)\\ \\wedge\\ \\bigl(\\exists y\\,\\bigl(S(y)\\ \\vee\\ \\forall z\\,\\bigl(T(x,z,y)\\ \\wedge\\ \\exists w\\,U(w,y,x)\\bigr)\\bigr)\\bigr).\n$$\nLet the term be\n$$\nt \\equiv f(y,w,v).\n$$\nConsider the substitution $[x := t]$ into $\\varphi$. Determine the minimal number of distinct bound-variable $\\alpha$-renamings that suffice to transform $\\varphi$ into an $\\alpha$-equivalent formula $\\psi$ for which $[x := t]$ is capture-free. Express your final answer as a single integer. No rounding is needed.", "solution": "The problem is well-posed and scientifically grounded within the field of mathematical logic. It asks for the derivation of a decision procedure for safe substitution and its application to a specific case. We shall first derive the procedure and then apply it.\n\nLet $\\varphi$ be a formula in first-order logic, $x$ be a variable, and $t$ be a term. The substitution of $t$ for $x$ in $\\varphi$, denoted $\\varphi[x := t]$, is the formula obtained by replacing every free occurrence of $x$ in $\\varphi$ with the term $t$.\n\nA variable $v$ is said to be free in a term or formula if it is not bound by any quantifier ($\\forall$ or $\\exists$). Let $FV(\\tau)$ denote the set of free variables in an expression $\\tau$ (which can be a term or a formula).\n\nThe substitution $[x := t]$ is said to be capture-free on $\\varphi$ if, for every variable $v \\in FV(t)$, no free occurrence of $v$ in any of the inserted instances of $t$ becomes a bound occurrence in $\\varphi[x := t]$. An occurrence of $v$ becomes bound if it falls within the scope of a quantifier $\\forall v$ or $\\exists v$.\n\nThis leads to the formal condition for variable capture: a capture occurs if and only if there exists a variable $v \\in FV(t)$ and a free occurrence of $x$ in $\\varphi$ that lies within the scope of a quantifier binding $v$. That is, $\\varphi$ contains a subformula of the form $\\forall v \\, \\psi$ or $\\exists v \\, \\psi$ such that $x$ has a free occurrence in $\\psi$.\n\nTo avoid capture, we must perform $\\alpha$-renaming on any such problematic quantifier. An $\\alpha$-renaming of, for instance, $\\forall v \\, \\psi$ involves choosing a fresh variable $v'$ (one not free in $\\psi$ or $t$) and replacing the subformula with $\\forall v' \\, \\psi[v := v']$. This modification renders the substitution of $t$ into $\\psi[v := v']$ safe with respect to the variable $v$.\n\nA minimal set of renamings is required. A single $\\alpha$-renaming of a quantifier $\\forall v$ or $\\exists v$ resolves the capture conflict for all free occurrences of $x$ within its scope. Since distinct quantifiers in the formula's abstract syntax tree correspond to distinct scopes, each quantifier that causes a capture must be renamed independently. Therefore, the minimal number of renamings is precisely the number of distinct quantifiers that satisfy the capture condition.\n\nThis yields the following decision procedure:\n\n1.  **Identify Free Variables of the Term**: Compute the set of free variables in the term $t$. Let this be $V_t = FV(t)$.\n2.  **Identify Quantifiers and Scopes**: Traverse the formula $\\varphi$ and identify all its distinct quantified subformulas. For each such $i$-th quantifier, record its bound variable $y_i$ and its scope $\\psi_i$. A quantified subformula is an expression of the form $\\forall y_i \\, \\psi_i$ or $\\exists y_i \\, \\psi_i$.\n3.  **Check for Capture Condition**: For each quantifier $i$, a capture will occur if and only if both of the following conditions hold:\n    a) The bound variable $y_i$ is a free variable in the term $t$, i.e., $y_i \\in V_t$.\n    b) The variable to be substituted, $x$, has at least one free occurrence within the scope $\\psi_i$ of the quantifier.\n4.  **Count Necessary Renamings**: The minimal number of $\\alpha$-renamings is the total count of distinct quantifiers that satisfy both conditions in step 3.\n\nWe now apply this procedure to the given instance.\n\nThe formula is:\n$$\n\\varphi \\equiv \\bigl(\\forall y\\,\\bigl(A(y) \\rightarrow \\bigl(P(x,y)\\ \\wedge\\ \\exists z\\,\\bigl(Q(y,z)\\ \\wedge\\ R(x,z)\\bigr)\\bigr)\\bigr)\\bigr)\\ \\wedge\\ \\bigl(\\exists y\\,\\bigl(S(y)\\ \\vee\\ \\forall z\\,\\bigl(T(x,z,y)\\ \\wedge\\ \\exists w\\,U(w,y,x)\\bigr)\\bigr)\\bigr)\n$$\nThe substitution is $[x := t]$, where the term is:\n$$\nt \\equiv f(y,w,v)\n$$\n\n**Step 1: Identify Free Variables of the Term**\nThe free variables of $t \\equiv f(y,w,v)$ are those that appear in it. Thus, $V_t = FV(t) = \\{y, w, v\\}$.\n\n**Step 2: Identify Quantifiers and Scopes**\nWe identify the five distinct quantifiers in $\\varphi$:\n- $Q_1$: $\\forall y$ in the first conjunct. Its scope is $\\psi_1 \\equiv A(y) \\rightarrow \\bigl(P(x,y)\\ \\wedge\\ \\exists z\\,\\bigl(Q(y,z)\\ \\wedge\\ R(x,z)\\bigr)\\bigr)$.\n- $Q_2$: $\\exists z$ within $\\psi_1$. Its scope is $\\psi_2 \\equiv Q(y,z)\\ \\wedge\\ R(x,z)$.\n- $Q_3$: $\\exists y$ in the second conjunct. Its scope is $\\psi_3 \\equiv S(y)\\ \\vee\\ \\forall z\\,\\bigl(T(x,z,y)\\ \\wedge\\ \\exists w\\,U(w,y,x)\\bigr)$.\n- $Q_4$: $\\forall z$ within $\\psi_3$. Its scope is $\\psi_4 \\equiv T(x,z,y)\\ \\wedge\\ \\exists w\\,U(w,y,x)$.\n- $Q_5$: $\\exists w$ within $\\psi_4$. Its scope is $\\psi_5 \\equiv U(w,y,x)$.\n\n**Step 3: Check for Capture Condition**\nWe examine each quantifier:\n\n- **For $Q_1$ ($\\forall y$):**\n  a) The bound variable is $y$. Is $y \\in V_t$? Yes, $y \\in \\{y, w, v\\}$.\n  b) Does $x$ occur free in $\\psi_1$? Yes, $x$ has free occurrences in $P(x,y)$ and $R(x,z)$, both of which are within $\\psi_1$.\n  Both conditions are met. Thus, $Q_1$ causes variable capture and requires $\\alpha$-renaming.\n\n- **For $Q_2$ ($\\exists z$):**\n  a) The bound variable is $z$. Is $z \\in V_t$? No, $z \\notin \\{y, w, v\\}$.\n  The first condition fails. $Q_2$ does not cause capture.\n\n- **For $Q_3$ ($\\exists y$):**\n  a) The bound variable is $y$. Is $y \\in V_t$? Yes, $y \\in \\{y, w, v\\}$.\n  b) Does $x$ occur free in $\\psi_3$? Yes, $x$ has free occurrences in $T(x,z,y)$ and $U(w,y,x)$, both within $\\psi_3$.\n  Both conditions are met. Thus, $Q_3$ causes variable capture and requires $\\alpha$-renaming. This is a distinct quantifier from $Q_1$.\n\n- **For $Q_4$ ($\\forall z$):**\n  a) The bound variable is $z$. Is $z \\in V_t$? No, $z \\notin \\{y, w, v\\}$.\n  The first condition fails. $Q_4$ does not cause capture.\n\n- **For $Q_5$ ($\\exists w$):**\n  a) The bound variable is $w$. Is $w \\in V_t$? Yes, $w \\in \\{y, w, v\\}$.\n  b) Does $x$ occur free in $\\psi_5$? Yes, $x$ has a free occurrence in $U(w,y,x)$.\n  Both conditions are met. Thus, $Q_5$ causes variable capture and requires $\\alpha$-renaming.\n\n**Step 4: Count Necessary Renamings**\nThe quantifiers identified as causing capture are $Q_1$ ($\\forall y$), $Q_3$ ($\\exists y$), and $Q_5$ ($\\exists w$). These are three distinct quantifier occurrences within the formula $\\varphi$. To make the substitution $[x := t]$ capture-free, each of these three quantifiers must be $\\alpha$-renamed.\n\nTherefore, the minimal number of distinct bound-variable $\\alpha$-renamings is $3$.", "answer": "$$\\boxed{3}$$", "id": "2988630"}, {"introduction": "The syntactic rules of substitution are not arbitrary; they are essential for preserving logical meaning. This final exercise illustrates the critical importance of capture-avoidance by constructing a concrete counterexample where a naive substitution leads to a semantically different result [@problem_id:2988600]. By comparing the truth values of the correctly and incorrectly substituted formulas, you will gain a tangible appreciation for how syntactic precision safeguards semantic integrity under Tarskian semantics.", "problem": "Consider first-order logic (FOL) with variables ranging over a nonempty domain. Let $\\mathrm{FV}(t)$ denote the set of free variables of term $t$, and let $\\varphi[x := t]$ denote capture-avoiding substitution of term $t$ for all free occurrences of variable $x$ in formula $\\varphi$, defined in the usual way by structural recursion with $\\alpha$-conversion of bound variables to avoid variable capture. A standard commutation law states: if $y \\neq x$ and $y \\notin \\mathrm{FV}(t)$, then $(\\forall y\\,\\varphi)[x := t]$ is equivalent to $\\forall y\\,(\\varphi[x := t])$. Using only the fundamental semantics of FOL (Tarski semantics for quantifiers and equality) and the definition of capture-avoiding substitution with $\\alpha$-conversion, illustrate the failure of this law when $y \\in \\mathrm{FV}(t)$ by working in the language with equality only and domain the natural numbers.\n\nConcretely, let the language be $\\mathcal{L} = \\{=\\}$, the structure be $\\mathcal{M} = (\\mathbb{N}, =)$ where equality is interpreted as actual equality on $\\mathbb{N}$, and let the assignment $g$ map the variable $y$ to $0$ (the values of other variables under $g$ are irrelevant unless mentioned). Let $\\varphi$ be the formula $x = y$, and let $t$ be the term $y$. Note that $y \\in \\mathrm{FV}(t)$. Define the following two formulas:\n- The left-hand side uses capture-avoiding substitution with $\\alpha$-conversion: $((\\forall y\\,\\varphi)[x := t])$.\n- The right-hand side uses direct inner substitution: $(\\forall y\\,(\\varphi[x := t]))$.\n\nCompute the truth values of both formulas in $\\mathcal{M}$ under $g$ using the standard semantics, encode truth as $1$ and falsity as $0$, and then compute the numerical difference $V_{\\mathrm{RHS}} - V_{\\mathrm{LHS}}$, where $V_{\\mathrm{RHS}}$ and $V_{\\mathrm{LHS}}$ are the encoded truth values of the right-hand side and left-hand side formulas, respectively. Provide your final answer as a single real number. No rounding is required.", "solution": "The problem requires us to analyze the failure of the commutation of substitution and universal quantification when the condition of variable freshness is not met. We are asked to compute the truth values of two formulas in a specific model and then find the numerical difference of their encoded values.\n\nLet the language be $\\mathcal{L} = \\{=\\}$, the structure be $\\mathcal{M} = (\\mathbb{N}, =)$ with domain the natural numbers $\\mathbb{N}=\\{0, 1, 2, \\dots\\}$, and the interpretation of the equality symbol as identity on $\\mathbb{N}$. The variable assignment $g$ is such that $g(y) = 0$. The formula $\\varphi$ is $x = y$, and the term $t$ is $y$. We are to substitute $x$ with $t$. The commutation law being tested is $(\\forall y\\,\\varphi)[x := t] \\equiv \\forall y\\,(\\varphi[x := t])$, which holds if $y \\notin \\mathrm{FV}(t)$. Here, $t$ is $y$, so $\\mathrm{FV}(t) = \\mathrm{FV}(y) = \\{y\\}$. The condition $y \\notin \\mathrm{FV}(t)$ is violated, as $y \\in \\{y\\}$.\n\nWe will evaluate the truth values of the left-hand side (LHS) and right-hand side (RHS) formulas as defined in the problem. Truth is encoded as $1$ and falsity as $0$.\n\n**1. Evaluation of the Left-Hand Side (LHS)**\n\nThe LHS formula is defined as $((\\forall y\\,\\varphi)[x := t])$, which means we must apply capture-avoiding substitution.\nThe specific formula is $(\\forall y\\,(x=y))[x := y]$.\nIn the formula $\\forall y\\,(x=y)$, the variable $x$ is free. The substitution $[x := y]$ attempts to replace this free $x$ with $y$. However, this would place the new $y$ within the scope of the quantifier $\\forall y$, causing the substituted variable to be \"captured\".\n\nA capture-avoiding substitution requires renaming the bound variable to avoid this capture. We perform an $\\alpha$-conversion on $\\forall y\\,(x=y)$. We choose a fresh variable $z$ (where $z$ is distinct from $x$ and $y$) and rename the bound variable $y$ to $z$.\nThe formula $\\forall y\\,(x=y)$ is logically equivalent to $\\forall z\\,((x=y)[y:=z])$, which is $\\forall z\\,(x=z)$.\n\nNow, we can safely perform the substitution $[x := y]$ on the $\\alpha$-converted formula $\\forall z\\,(x=z)$:\n$$ (\\forall z\\,(x=z))[x := y] $$\nSince the variable $z$ of the quantifier is not free in the term $y$ (i.e., $z \\notin \\mathrm{FV}(y)$), we can move the substitution inside the quantifier:\n$$ \\forall z\\,((x=z)[x := y]) $$\nThis results in the formula:\n$$ \\forall z\\,(y=z) $$\nLet's call this the LHS formula, $\\varphi_{\\mathrm{LHS}}$. We now determine its truth value in the structure $\\mathcal{M}$ under the assignment $g$.\nThe statement $\\mathcal{M}, g \\models \\forall z\\,(y=z)$ is true if and only if for every element $d \\in \\mathbb{N}$, the statement $\\mathcal{M}, g[z \\mapsto d] \\models y=z$ is true.\nHere, $g[z \\mapsto d]$ is the assignment that maps $z$ to $d$ and any other variable $v \\neq z$ to $g(v)$.\nUnder the assignment $g[z \\mapsto d]$, the term $y$ evaluates to $g[z \\mapsto d](y) = g(y) = 0$. The term $z$ evaluates to $g[z \\mapsto d](z) = d$.\nSo, the condition becomes: for every $d \\in \\mathbb{N}$, the equality $0 = d$ must hold.\nThis is false. For example, if we choose $d=1$, then $0=1$ is false. The universal quantification fails.\nTherefore, the LHS formula $\\varphi_{\\mathrm{LHS}}$ is false in $\\mathcal{M}$ under $g$.\nThe encoded truth value is $V_{\\mathrm{LHS}} = 0$.\n\n**2. Evaluation of the Right-Hand Side (RHS)**\n\nThe RHS formula is defined as $(\\forall y\\,(\\varphi[x := t]))$, which means we perform the substitution on the inner formula $\\varphi$ first, and then apply the quantifier.\nThe specific formula is $\\forall y\\,((x=y)[x := y])$.\nFirst, we compute the inner substitution $(x=y)[x := y]$. This means we replace all free occurrences of $x$ in $x=y$ with the term $y$. The result is the formula $y=y$.\nNext, we apply the universal quantifier $\\forall y$ to this result.\nThe RHS formula, $\\varphi_{\\mathrm{RHS}}$, is therefore:\n$$ \\forall y\\,(y=y) $$\nWe now determine the truth value of this formula in $\\mathcal{M}$ under $g$.\nThe statement $\\mathcal{M}, g \\models \\forall y\\,(y=y)$ is true if and only if for every element $d \\in \\mathbb{N}$, the statement $\\mathcal{M}, g[y \\mapsto d] \\models y=y$ is true.\nUnder the assignment $g[y \\mapsto d]$, the term $y$ evaluates to $g[y \\mapsto d](y) = d$.\nSo, the condition becomes: for every $d \\in \\mathbb{N}$, the equality $d = d$ must hold.\nThis is true, as equality is a reflexive relation. The statement holds for all $d \\in \\mathbb{N}$.\nTherefore, the RHS formula $\\varphi_{\\mathrm{RHS}}$ is true in $\\mathcal{M}$ under $g$.\nThe encoded truth value is $V_{\\mathrm{RHS}} = 1$.\n\n**3. Final Calculation**\n\nThe problem asks for the numerical difference $V_{\\mathrm{RHS}} - V_{\\mathrm{LHS}}$.\nUsing the values we computed:\n- $V_{\\mathrm{LHS}} = 0$\n- $V_{\\mathrm{RHS}} = 1$\n\nThe difference is $V_{\\mathrm{RHS}} - V_{\\mathrm{LHS}} = 1 - 0 = 1$.\n\nThis example demonstrates that when a substitution introduces a variable that is captured by a quantifier, performing a naive substitution inside the quantifier (RHS) can lead to a different semantic meaning than a correctly defined capture-avoiding substitution (LHS). The commutation law $(\\forall y\\,\\varphi)[x := t] \\equiv \\forall y\\,(\\varphi[x := t])$ fails when $y \\in \\mathrm{FV}(t)$.", "answer": "$$\n\\boxed{1}\n$$", "id": "2988600"}]}
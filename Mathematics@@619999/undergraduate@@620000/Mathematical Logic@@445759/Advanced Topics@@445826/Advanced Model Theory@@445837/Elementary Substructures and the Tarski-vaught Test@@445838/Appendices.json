{"hands_on_practices": [{"introduction": "This first practice problem provides a classic and intuitive entry point into applying the Tarski-Vaught test. We will explore the relationship between the field of rational numbers, $\\mathbb{Q}$, and its extension $\\mathbb{Q}(\\sqrt{2})$, demonstrating how a simple existential statement can reveal that a substructure is not elementary. This exercise [@problem_id:3040769] grounds the abstract test in the familiar context of algebraic fields and highlights how the existence of certain elements, like square roots, can distinguish a structure from its substructures.", "problem": "Let $\\mathcal{L}_{\\mathrm{ring}}=\\{0,1,+,\\times\\}$ be the language of rings. Consider the $\\mathcal{L}_{\\mathrm{ring}}$-structures $M=(\\mathbb{Q},+,\\times,0,1)$ and $N=(\\mathbb{Q}(\\sqrt{2}),+,\\times,0,1)$, where $\\mathbb{Q}(\\sqrt{2})=\\{a+b\\sqrt{2}\\mid a,b\\in\\mathbb{Q}\\}$. Recall that $M$ is an $\\mathcal{L}_{\\mathrm{ring}}$-substructure of $N$ if $M\\subseteq N$ and the interpretations of $0,1,+,\\times$ on $M$ are the restrictions of those on $N$. Recall also that $M$ is an elementary substructure of $N$ if for every $\\mathcal{L}_{\\mathrm{ring}}$-formula $\\varphi(\\bar{x})$ and every tuple $\\bar{a}\\in M^{|\\bar{x}|}$, one has $M\\models\\varphi(\\bar{a})$ if and only if $N\\models\\varphi(\\bar{a})$. The Tarski–Vaught test states that $M$ is an elementary substructure of $N$ if and only if for every $\\mathcal{L}_{\\mathrm{ring}}$-formula $\\psi(x,\\bar{a})$ with parameters $\\bar{a}$ from $M$, whenever $N\\models\\exists x\\,\\psi(x,\\bar{a})$ there exists $b\\in M$ such that $N\\models\\psi(b,\\bar{a})$.\n\nConsider the parameter-free existential formula $\\varphi(x)$ given by $x^2=2$. Define the quantity\n$$\nD \\;=\\; \\left|\\{x\\in N \\mid N \\models \\varphi(x)\\}\\right| \\;-\\; \\left|\\{x\\in M \\mid M \\models \\varphi(x)\\}\\right|.\n$$\nUsing only the above definitions and the Tarski–Vaught test, justify that $M$ is not an elementary substructure of $N$ and compute the exact value of $D$. Give your final numerical answer for $D$ as an exact integer (no rounding is needed).", "solution": "The problem requires us to justify that the structure $M=(\\mathbb{Q},+,\\times,0,1)$ is not an elementary substructure of $N=(\\mathbb{Q}(\\sqrt{2}),+,\\times,0,1)$ using the Tarski-Vaught test, and to compute a specific quantity $D$.\n\nFirst, we will perform the justification. The Tarski-Vaught test states that $M$ is an elementary substructure of $N$ if and only if for every $\\mathcal{L}_{\\mathrm{ring}}$-formula $\\psi(x,\\bar{a})$ with parameters $\\bar{a}$ from $M$, whenever $N\\models\\exists x\\,\\psi(x,\\bar{a})$, there must exist an element $b\\in M$ such that $N\\models\\psi(b,\\bar{a})$. To show that $M$ is not an elementary substructure of $N$, we must provide a counterexample to this condition. That is, we must find a formula $\\psi(x,\\bar{a})$ with parameters in $M$ such that $N\\models\\exists x\\,\\psi(x,\\bar{a})$ is true, but for all $b\\in M$, $N\\models\\psi(b,\\bar{a})$ is false.\n\nLet's consider the formula $\\varphi(x)$ given in the problem, which is $x^2=2$. This formula can be written in the language $\\mathcal{L}_{\\mathrm{ring}}=\\{0,1,+,\\times\\}$ as $x \\times x = 1+1$. This formula has one free variable, $x$, and no parameters. We can consider this as a formula $\\psi(x, \\bar{a})$ where the tuple of parameters $\\bar{a}$ is empty. The parameters are thus trivially from $M$.\n\nWe apply the Tarski-Vaught test to the existential sentence $\\exists x \\, (x^2=2)$.\n1.  We must check if $N \\models \\exists x \\, (x^2=2)$. This statement is true if there exists an element in the universe of $N$, which is $\\mathbb{Q}(\\sqrt{2})=\\{a+b\\sqrt{2}\\mid a,b\\in\\mathbb{Q}\\}$, that satisfies the equation $x^2=2$. The solutions to this equation are $x=\\sqrt{2}$ and $x=-\\sqrt{2}$. The element $\\sqrt{2}$ can be expressed as $0+1\\cdot\\sqrt{2}$, where $0 \\in \\mathbb{Q}$ and $1 \\in \\mathbb{Q}$. Thus, $\\sqrt{2} \\in \\mathbb{Q}(\\sqrt{2})$. Since there exists a witness for the existential statement in the universe of $N$, we conclude that $N \\models \\exists x \\, (x^2=2)$ is true.\n\n2.  If $M$ were an elementary substructure of $N$, the Tarski-Vaught test would require the existence of an element $b \\in M$ such that $N \\models (b^2=2)$. The universe of $M$ is the set of rational numbers, $\\mathbb{Q}$. Thus, we must check if there exists a $b \\in \\mathbb{Q}$ such that $b^2=2$. It is a well-established mathematical fact that $\\sqrt{2}$ is an irrational number. Therefore, there is no rational number $b$ whose square is $2$. This implies that for every element $b \\in M$, the statement $N \\models (b^2=2)$ is false.\n\nSince the premise of the Tarski-Vaught condition ($N \\models \\exists x \\, (x^2=2)$) is true, but its conclusion (there exists $b \\in M$ such that $N \\models (b^2=2)$) is false, the condition fails for the formula $x^2=2$. This demonstrates that $M$ is not an elementary substructure of $N$.\n\nNext, we compute the value of $D$, defined as:\n$$\nD \\;=\\; \\left|\\{x\\in N \\mid N \\models \\varphi(x)\\}\\right| \\;-\\; \\left|\\{x\\in M \\mid M \\models \\varphi(x)\\}\\right|\n$$\nwhere $\\varphi(x)$ is the formula $x^2=2$.\n\nThe first term is the cardinality of the set of solutions to $x^2=2$ in the structure $N$. The universe of $N$ is $\\mathbb{Q}(\\sqrt{2})$. The equation $x^2=2$ has two solutions in the field of real numbers, $x=\\sqrt{2}$ and $x=-\\sqrt{2}$. As shown before, $\\sqrt{2} = 0+1\\sqrt{2} \\in \\mathbb{Q}(\\sqrt{2})$ and $-\\sqrt{2} = 0+(-1)\\sqrt{2} \\in \\mathbb{Q}(\\sqrt{2})$. Since $\\mathbb{Q}(\\sqrt{2})$ is a field, the quadratic polynomial $x^2-2=0$ can have at most two roots. Thus, the set of solutions in $N$ is $\\{\\sqrt{2}, -\\sqrt{2}\\}$. The cardinality of this set is $2$.\nSo, $|\\{x\\in N \\mid N \\models x^2=2\\}| = 2$.\n\nThe second term is the cardinality of the set of solutions to $x^2=2$ in the structure $M$. The universe of $M$ is $\\mathbb{Q}$. We are looking for the number of rational numbers $x$ such that $x^2=2$. As established earlier, no such rational number exists. The set of solutions in $M$ is the empty set, $\\emptyset$. The cardinality of this set is $0$.\nSo, $|\\{x\\in M \\mid M \\models x^2=2\\}| = 0$.\n\nFinally, we calculate $D$:\n$$\nD = 2 - 0 = 2.\n$$", "answer": "$$\\boxed{2}$$", "id": "3040769"}, {"introduction": "Moving from algebraic structures, this exercise [@problem_id:3040786] explores a common point of confusion: the difference between being a substructure and being an elementary substructure. We will see that even when two structures agree on all statements without quantifiers, the power of existential quantifiers can expose crucial differences that prevent the substructure from being elementary. This problem uses the intuitive setting of the natural numbers, $\\mathbb{N}$, as a substructure of the integers, $\\mathbb{Z}$, to make this vital distinction clear.", "problem": "Let $\\mathcal{L}$ be the first-order language of First-Order Logic (FOL) with a single binary relation symbol $R$ and two constant symbols $0$ and $1$. Consider the $\\mathcal{L}$-structures $\\mathcal{M}$ and $\\mathcal{N}$ defined as follows:\n- The domain of $\\mathcal{M}$ is $M = \\mathbb{N}$, $R^{\\mathcal{M}}(m,n)$ holds if and only if $|m-n|=1$, and $0^{\\mathcal{M}}=0$, $1^{\\mathcal{M}}=1$.\n- The domain of $\\mathcal{N}$ is $N = \\mathbb{Z}$, $R^{\\mathcal{N}}(m,n)$ holds if and only if $|m-n|=1$, and $0^{\\mathcal{N}}=0$, $1^{\\mathcal{N}}=1$.\n\nStarting from the core definitions of substructure, quantifier-free formula, elementary substructure, and using the Tarski-Vaught test, do the following:\n1. Verify that $\\mathcal{M}$ is a substructure of $\\mathcal{N}$.\n2. Prove that $\\mathcal{M}$ and $\\mathcal{N}$ agree on all quantifier-free $\\mathcal{L}$-formulas with parameters from $M$.\n3. Construct an explicit existential $\\mathcal{L}$-formula with parameters from $M$ that is satisfied in $\\mathcal{N}$ but has no witness in $M$, and explain why this shows that $\\mathcal{M}$ is not an elementary substructure of $\\mathcal{N}$.\n\nLet $\\chi$ be the indicator defined by $\\chi=1$ if $\\mathcal{M}\\preceq\\mathcal{N}$ and $\\chi=0$ otherwise. Compute $\\chi$. Your final answer must be a single real number. No rounding is required.", "solution": "The problem requires a four-part analysis of the relationship between two $\\mathcal{L}$-structures, $\\mathcal{M}$ and $\\mathcal{N}$, culminating in the computation of an indicator variable $\\chi$. The language $\\mathcal{L}$ has one binary relation symbol $R$ and two constant symbols $0$ and $1$. The structures are defined as follows:\n- $\\mathcal{M}$ has domain $M = \\mathbb{N} = \\{0, 1, 2, \\dots\\}$. The interpretation of symbols are $R^{\\mathcal{M}}(m,n) \\iff |m-n|=1$, $0^{\\mathcal{M}}=0$, and $1^{\\mathcal{M}}=1$.\n- $\\mathcal{N}$ has domain $N = \\mathbb{Z} = \\{\\dots, -1, 0, 1, \\dots\\}$. The interpretation of symbols are $R^{\\mathcal{N}}(m,n) \\iff |m-n|=1$, $0^{\\mathcal{N}}=0$, and $1^{\\mathcal{N}}=1$.\n\n**1. Verification that $\\mathcal{M}$ is a substructure of $\\mathcal{N}$**\n\nTo verify that $\\mathcal{M}$ is a substructure of $\\mathcal{N}$, denoted $\\mathcal{M} \\subseteq \\mathcal{N}$, we must check three conditions based on the definition of a substructure.\n- **Condition 1: Domain Inclusion.** The domain of $\\mathcal{M}$ must be a subset of the domain of $\\mathcal{N}$. Here, the domain of $\\mathcal{M}$ is $M = \\mathbb{N}$ and the domain of $\\mathcal{N}$ is $N = \\mathbb{Z}$. It is a fundamental fact of set theory that $\\mathbb{N} \\subseteq \\mathbb{Z}$. This condition holds.\n- **Condition 2: Interpretation of Constants.** The interpretations of the constant symbols in $\\mathcal{L}$ must be the same in both structures. The language has two constant symbols, $0$ and $1$.\n    - For the constant symbol $0$, we have $0^{\\mathcal{M}} = 0$ and $0^{\\mathcal{N}} = 0$. Since $0 \\in M$ and the interpretations are identical, this is satisfied.\n    - For the constant symbol $1$, we have $1^{\\mathcal{M}} = 1$ and $1^{\\mathcal{N}} = 1$. Since $1 \\in M$ and the interpretations are identical, this is also satisfied.\n- **Condition 3: Interpretation of Relations.** For any $k$-ary relation symbol in $\\mathcal{L}$ and any elements $a_1, \\dots, a_k$ from the smaller domain $M$, the relation must hold in $\\mathcal{M}$ if and only if it holds in $\\mathcal{N}$. Our language has one binary relation symbol $R$. We must show that for any $m, n \\in M$, we have $R^{\\mathcal{M}}(m,n)$ if and only if $R^{\\mathcal{N}}(m,n)$.\n    - Let $m, n \\in M = \\mathbb{N}$.\n    - By definition of $\\mathcal{M}$, $R^{\\mathcal{M}}(m,n)$ is true if and only if $|m-n|=1$.\n    - Since $m, n \\in \\mathbb{N}$, they are also elements of $\\mathbb{Z}$. By definition of $\\mathcal{N}$, $R^{\\mathcal{N}}(m,n)$ is true if and only if $|m-n|=1$.\n    - The condition for the relation to hold is identical for elements in $M$. Thus, $R^{\\mathcal{M}}(m,n) \\iff R^{\\mathcal{N}}(m,n)$ for all $m,n \\in M$. This is equivalent to stating that $R^{\\mathcal{M}} = R^{\\mathcal{N}} \\cap (M \\times M)$. This condition holds.\n\nSince all three conditions are satisfied, $\\mathcal{M}$ is a substructure of $\\mathcal{N}$.\n\n**2. Agreement on Quantifier-Free Formulas**\n\nWe prove by induction on the complexity of quantifier-free formulas that for any such formula $\\phi(x_1, \\dots, x_k)$ and any parameters $a_1, \\dots, a_k \\in M$, we have $\\mathcal{M} \\models \\phi(a_1, \\dots, a_k)$ if and only if $\\mathcal{N} \\models \\phi(a_1, \\dots, a_k)$.\n\n- **Base Case: Atomic Formulas.** An atomic formula in $\\mathcal{L}$ can have the form $t_1 = t_2$ or $R(t_1, t_2)$, where $t_1$ and $t_2$ are terms. In $\\mathcal{L}$, terms are variables or the constants $0$ and $1$. Let an assignment $\\sigma$ map the free variables in the terms to elements in $M$. The interpretation of a term $t$ under this assignment, $t^{\\mathcal{M}}[\\sigma]$, is an element of $M$. Since the constant interpretations are the same in both structures, $t^{\\mathcal{M}}[\\sigma] = t^{\\mathcal{N}}[\\sigma]$.\n    - For $t_1 = t_2$: $\\mathcal{M} \\models (t_1=t_2)[\\sigma] \\iff t_1^{\\mathcal{M}}[\\sigma] = t_2^{\\mathcal{M}}[\\sigma]$. Since $t_1^{\\mathcal{M}}[\\sigma] = t_1^{\\mathcal{N}}[\\sigma]$ and $t_2^{\\mathcal{M}}[\\sigma] = t_2^{\\mathcal{N}}[\\sigma]$, this is equivalent to $t_1^{\\mathcal{N}}[\\sigma] = t_2^{\\mathcal{N}}[\\sigma]$, which in turn means $\\mathcal{N} \\models (t_1=t_2)[\\sigma]$.\n    - For $R(t_1, t_2)$: Let $m = t_1^{\\mathcal{M}}[\\sigma]$ and $n = t_2^{\\mathcal{M}}[\\sigma]$. Since the terms are evaluated with parameters from $M$, $m, n \\in M$. So, $m = t_1^{\\mathcal{N}}[\\sigma]$ and $n = t_2^{\\mathcal{N}}[\\sigma]$. We have $\\mathcal{M} \\models R(t_1, t_2)[\\sigma] \\iff R^{\\mathcal{M}}(m,n)$. From Part 1, we know that for $m,n \\in M$, $R^{\\mathcal{M}}(m,n) \\iff R^{\\mathcal{N}}(m,n)$. This is equivalent to $\\mathcal{N} \\models R(t_1, t_2)[\\sigma]$.\n- **Inductive Step.** Assume the property holds for quantifier-free formulas $\\psi_1$ and $\\psi_2$. We show it holds for $\\neg\\psi_1$ and $\\psi_1 \\land \\psi_2$. Let $\\vec{a} = (a_1, \\dots, a_k)$ be parameters from $M$.\n    - For $\\neg\\psi_1$: $\\mathcal{M} \\models \\neg\\psi_1(\\vec{a}) \\iff \\mathcal{M} \\not\\models \\psi_1(\\vec{a})$. By the induction hypothesis, this is equivalent to $\\mathcal{N} \\not\\models \\psi_1(\\vec{a})$, which is equivalent to $\\mathcal{N} \\models \\neg\\psi_1(\\vec{a})$.\n    - For $\\psi_1 \\land \\psi_2$: $\\mathcal{M} \\models (\\psi_1 \\land \\psi_2)(\\vec{a}) \\iff \\mathcal{M} \\models \\psi_1(\\vec{a})$ and $\\mathcal{M} \\models \\psi_2(\\vec{a})$. By the induction hypothesis on both $\\psi_1$ and $\\psi_2$, this is equivalent to $\\mathcal{N} \\models \\psi_1(\\vec{a})$ and $\\mathcal{N} \\models \\psi_2(\\vec{a})$, which is equivalent to $\\mathcal{N} \\models (\\psi_1 \\land \\psi_2)(\\vec{a})$.\n\nThe proof by induction is complete. $\\mathcal{M}$ and $\\mathcal{N}$ agree on all quantifier-free formulas with parameters from $M$.\n\n**3. Test for Elementary Substructure**\n\n$\\mathcal{M}$ is an elementary substructure of $\\mathcal{N}$, denoted $\\mathcal{M} \\preceq \\mathcal{N}$, if they agree on *all* formulas with parameters from $M$. The Tarski-Vaught test provides a necessary and sufficient condition: $\\mathcal{M} \\preceq \\mathcal{N}$ if and only if $\\mathcal{M} \\subseteq \\mathcal{N}$ and for every formula of the form $\\exists y \\, \\phi(y, \\vec{x})$ and every tuple of parameters $\\vec{a}$ from $M$, if $\\mathcal{N} \\models \\exists y \\, \\phi(y, \\vec{a})$, then there must exist a witness $b \\in M$ such that $\\mathcal{N} \\models \\phi(b, \\vec{a})$.\n\nTo show that $\\mathcal{M}$ is not an elementary substructure of $\\mathcal{N}$, we need to find a counterexample that violates this test. The key difference between the structures $\\mathcal{M}$ and $\\mathcal{N}$ is the existence of negative numbers in $N$. In $\\mathcal{M}$, the element $0$ has only one neighbor, $1$. In $\\mathcal{N}$, $0$ has two neighbors, $1$ and $-1$.\n\nLet's construct an existential formula that captures this difference. Consider the formula with one free variable $x$:\n$$ \\psi(x) \\equiv \\exists y (R(x, y) \\land \\neg(y = 1)) $$\nThis formula asserts that there exists a neighbor of $x$ that is not $1$. Let's use a parameter from $M$, namely $0^{\\mathcal{M}}=0$, for the variable $x$. The instantiated formula is:\n$$ \\exists y (R(0, y) \\land \\neg(y = 1)) $$\nHere, $0$ and $1$ are the constant symbols of the language, whose interpretations $0$ and $1$ are in $M$.\n\nLet's check this formula in $\\mathcal{N}$:\n- $\\mathcal{N} \\models \\exists y (R(0, y) \\land \\neg(y = 1))$?\nThis statement is true if there exists an element $b \\in N = \\mathbb{Z}$ such that $\\mathcal{N} \\models R(0, b)$ and $\\mathcal{N} \\models \\neg(b=1)$. The condition $R^{\\mathcal{N}}(0, b)$ means $|0-b|=1$, which implies $b=1$ or $b=-1$.\n- If we choose $b=1$, the clause $\\neg(b=1)$ becomes $\\neg(1=1)$, which is false.\n- If we choose $b=-1$, the clause $R(0, -1)$ is true since $|0-(-1)|=1$, and the clause $\\neg(-1=1)$ is also true.\nThus, $y=-1$ is a witness in $N$. The formula is satisfied in $\\mathcal{N}$.\n\nNow, we apply the Tarski-Vaught test. We have an existential formula $\\exists y \\, \\phi(y)$, where $\\phi(y) \\equiv R(0, y) \\land \\neg(y=1)$. We've shown $\\mathcal{N} \\models \\exists y \\, \\phi(y)$. The test requires that there must be a witness in $M$. That is, there must exist an element $b \\in M = \\mathbb{N}$ such that $\\mathcal{N} \\models \\phi(b)$.\nLet's check for such a $b \\in \\mathbb{N}$:\nWe need to find $b \\in \\mathbb{N}$ such that $R^{\\mathcal{N}}(0, b)$ and $\\neg(b=1)$.\nThe condition $R^{\\mathcal{N}}(0, b)$ implies $|0-b|=1$. Since $b \\in \\mathbb{N}$, the only solution is $b=1$.\nBut the formula also requires $\\neg(b=1)$, which would mean $\\neg(1=1)$. This is a contradiction.\nTherefore, there is no element $b \\in M$ that can serve as a witness.\n\nThe formula $\\exists y (R(0, y) \\land \\neg(y=1))$ is satisfied in $\\mathcal{N}$ (with witness $y=-1$), but the witness is not in $M$. The Tarski-Vaught test fails. This demonstrates that $\\mathcal{M}$ is not an elementary substructure of $\\mathcal{N}$.\n\n**4. Computation of $\\chi$**\n\nThe variable $\\chi$ is defined as $\\chi=1$ if $\\mathcal{M}\\preceq\\mathcal{N}$ and $\\chi=0$ otherwise.\nFrom the analysis in Part 3, we have rigorously proven that $\\mathcal{M}$ is not an elementary substructure of $\\mathcal{N}$.\nTherefore, the condition $\\mathcal{M} \\preceq \\mathcal{N}$ is false.\nThis implies that $\\chi$ must be assigned the value $0$.", "answer": "$$\\boxed{0}$$", "id": "3040786"}, {"introduction": "To demonstrate the broad applicability of model theory, our final practice problem [@problem_id:3040785] shifts the focus from number systems to graph theory. By examining a simple star graph and one of its induced subgraphs, we will use the Tarski-Vaught test to identify a property of a single vertex that is expressible in the larger graph but lacks a witness within the subgraph. This exercise highlights how first-order logic provides a universal language for analyzing structural properties across diverse mathematical domains.", "problem": "Let $\\mathcal{L}=\\{E\\}$ be the first-order language of simple graphs, where $E(x,y)$ is a binary relation symbol intended to be interpreted as symmetric and irreflexive adjacency. For a fixed integer $n\\geq 2$, define the $\\mathcal{L}$-structure $\\mathcal{G}_{n}$ with domain $V(\\mathcal{G}_{n})=\\{u,v_{1},\\dots,v_{n}\\}$ and interpretation $E^{\\mathcal{G}_{n}}$ given by $E^{\\mathcal{G}_{n}}(u,v_{i})$ for every $i\\in\\{1,\\dots,n\\}$, and no other adjacencies. Let $\\mathcal{S}_{n}$ be the induced substructure of $\\mathcal{G}_{n}$ on the domain $V(\\mathcal{S}_{n})=\\{v_{1},\\dots,v_{n}\\}$, so $E^{\\mathcal{S}_{n}}$ is empty.\n\nUsing only the core definitions of first-order structures, elementary substructures, and the Tarski–Vaught test, carry out the following:\n\n1. Construct a first-order formula $\\varphi(y,\\bar{a})$ in the language $\\mathcal{L}$ with parameters $\\bar{a}=(v_{1},\\dots,v_{n})$ from $V(\\mathcal{S}_{n})$ such that $\\mathcal{G}_{n}\\models \\exists y\\,\\varphi(y,\\bar{a})$ but there is no $b\\in V(\\mathcal{S}_{n})$ with $\\mathcal{G}_{n}\\models \\varphi(b,\\bar{a})$. Explain why this witnesses the failure of the Tarski–Vaught test for the pair $(\\mathcal{S}_{n},\\mathcal{G}_{n})$, hence $\\mathcal{S}_{n}$ is not an elementary substructure of $\\mathcal{G}_{n}$.\n\n2. Let $q(n)$ denote the minimal quantifier rank of a sentence of the form $\\exists y\\,\\varphi(y,\\bar{a})$, with parameters $\\bar{a}\\subseteq V(\\mathcal{S}_{n})$, that witnesses the failure of the Tarski–Vaught test for $(\\mathcal{S}_{n},\\mathcal{G}_{n})$ as in item 1. Determine $q(n)$ explicitly as a function of $n$. Your final answer must be a single real-valued number. No rounding is required.", "solution": "The problem asks us to investigate the relationship between two first-order structures, $\\mathcal{G}_n$ and $\\mathcal{S}_n$, in the language of graphs $\\mathcal{L}=\\{E\\}$. The structure $\\mathcal{G}_n$ is a star graph with a central vertex $u$ and $n \\geq 2$ leaf vertices $v_1, \\dots, v_n$. The domain is $V(\\mathcal{G}_n)=\\{u, v_1, \\dots, v_n\\}$. The binary relation $E$ is interpreted as adjacency, so $E^{\\mathcal{G}_n}(x,y)$ holds if and only if $\\{x,y\\} = \\{u, v_i\\}$ for some $i \\in \\{1, \\dots, n\\}$. The problem specifies that $E$ is irreflexive, so $E(x,x)$ is false for all $x$. The structure $\\mathcal{S}_n$ is the induced substructure of $\\mathcal{G}_n$ on the domain $V(\\mathcal{S}_n)=\\{v_1, \\dots, v_n\\}$. As there are no edges between any two vertices in $V(\\mathcal{S}_n)$ within $\\mathcal{G}_n$, the structure $\\mathcal{S}_n$ is an empty graph on $n$ vertices.\n\nWe will first demonstrate that $\\mathcal{S}_n$ is not an elementary substructure of $\\mathcal{G}_n$ by using the Tarski-Vaught test, and then determine the minimal quantifier rank of a formula that witnesses this failure.\n\n**Part 1: Failure of the Tarski-Vaught Test**\n\nA substructure $\\mathcal{M}$ of an $\\mathcal{L}$-structure $\\mathcal{N}$ is an elementary substructure, denoted $\\mathcal{M} \\preceq \\mathcal{N}$, if for every first-order formula $\\psi(x_1, \\dots, x_k)$ and any assignment of parameters $a_1, \\dots, a_k$ from the domain of $\\mathcal{M}$, we have $\\mathcal{M} \\models \\psi(a_1, \\dots, a_k)$ if and only if $\\mathcal{N} \\models \\psi(a_1, \\dots, a_k)$.\n\nThe Tarski-Vaught test provides an equivalent characterization: $\\mathcal{S}_n$ is an elementary substructure of $\\mathcal{G}_n$ if and only if for every first-order formula $\\varphi(y, x_1, \\dots, x_k)$ and for all parameters $a_1, \\dots, a_k$ from $V(\\mathcal{S}_n)$, if $\\mathcal{G}_n \\models \\exists y \\, \\varphi(y, a_1, \\dots, a_k)$, then there exists an element $b \\in V(\\mathcal{S}_n)$ such that $\\mathcal{G}_n \\models \\varphi(b, a_1, \\dots, a_k)$.\n\nTo show that $\\mathcal{S}_n$ is not an elementary substructure of $\\mathcal{G}_n$, we must find a formula and parameters that violate this condition. The set of parameters required by the problem statement is $\\bar{a}=(v_1, \\dots, v_n)$. We seek a formula $\\varphi(y, \\bar{a})$ such that $\\exists y \\, \\varphi(y, \\bar{a})$ is true in $\\mathcal{G}_n$, but the witness $y$ must be outside of $V(\\mathcal{S}_n)$. The only element in $V(\\mathcal{G}_n)$ but not in $V(\\mathcal{S}_n)$ is the central vertex $u$. A defining property of $u$ is its adjacency to all vertices $v_1, \\dots, v_n$. We can express this property with the following formula:\n$$ \\varphi(y, v_1, \\dots, v_n) := E(y, v_1) \\land E(y, v_2) \\land \\dots \\land E(y, v_n) $$\nThis can be written more compactly as $\\bigwedge_{i=1}^n E(y, v_i)$. The parameters are $\\bar{a}=(v_1, \\dots, v_n)$, which are all in $V(\\mathcal{S}_n)$.\n\nNow, we test the Tarski-Vaught condition with the sentence $\\exists y \\, \\varphi(y, \\bar{a})$.\nFirst, we evaluate its truth in $\\mathcal{G}_n$.\n$$ \\mathcal{G}_n \\models \\exists y \\, \\bigwedge_{i=1}^n E(y, v_i) $$\nThis statement is true. The witness is the vertex $y=u$. By the definition of $\\mathcal{G}_n$, $E^{\\mathcal{G}_n}(u, v_i)$ is true for all $i \\in \\{1, \\dots, n\\}$, so the conjunction $\\bigwedge_{i=1}^n E(u, v_i)$ is true in $\\mathcal{G}_n$.\n\nSecond, we check for the existence of a witness within the domain of the substructure, $V(\\mathcal{S}_n) = \\{v_1, \\dots, v_n\\}$. We must determine if there exists a $b \\in V(\\mathcal{S}_n)$ such that $\\mathcal{G}_n \\models \\varphi(b, \\bar{a})$.\nLet $b$ be an arbitrary element of $V(\\mathcal{S}_n)$. Then $b = v_j$ for some $j \\in \\{1, \\dots, n\\}$. We must check if $\\mathcal{G}_n \\models \\bigwedge_{i=1}^n E(v_j, v_i)$.\nAccording to the definition of $\\mathcal{G}_n$, there are no adjacencies between any two distinct vertices from the set $\\{v_1, \\dots, v_n\\}$. Furthermore, the relation $E$ is irreflexive, meaning $E(x,x)$ is always false. Therefore, for any $i, j \\in \\{1, \\dots, n\\}$, the atomic formula $E(v_j, v_i)$ is false in $\\mathcal{G}_n$. The conjunction $\\bigwedge_{i=1}^n E(v_j, v_i)$ is thus false for any choice of $v_j \\in V(\\mathcal{S}_n)$.\nConsequently, there is no element $b \\in V(\\mathcal{S}_n)$ that can serve as a witness for the existential sentence.\n\nThis constitutes a failure of the Tarski-Vaught test. We have found a formula $\\varphi(y, \\bar{a}) = \\bigwedge_{i=1}^n E(y, v_i)$ with parameters $\\bar{a}$ from $V(\\mathcal{S}_n)$ such that $\\mathcal{G}_n \\models \\exists y \\, \\varphi(y, \\bar{a})$ is true, but there is no $b \\in V(\\mathcal{S}_n)$ for which $\\mathcal{G}_n \\models \\varphi(b, \\bar{a})$ holds. Therefore, $\\mathcal{S}_n$ is not an elementary substructure of $\\mathcal{G}_n$.\n\n**Part 2: Minimal Quantifier Rank**\n\nWe are asked to find $q(n)$, the minimal quantifier rank of a sentence of the form $\\exists y\\,\\varphi(y,\\bar{a})$, with parameters $\\bar{a}\\subseteq V(\\mathcal{S}_{n})$, that witnesses the failure of the Tarski-Vaught test for $(\\mathcal{S}_{n},\\mathcal{G}_{n})$.\n\nThe quantifier rank of a formula is the maximum depth of nested quantifiers. The sentence form is $\\exists y\\,\\varphi(y,\\bar{a})$. Its quantifier rank is $1 + \\text{qr}(\\varphi)$, where $\\text{qr}(\\varphi)$ is the quantifier rank of $\\varphi$. To minimize the total rank, we should aim for the smallest possible value for $\\text{qr}(\\varphi)$, which is $0$. A formula has quantifier rank $0$ if and only if it is quantifier-free. A quantifier-free formula is a Boolean combination of atomic formulas.\n\nLet us try to construct such a witness sentence with a total quantifier rank of $1$. This requires finding a quantifier-free formula $\\varphi(y, \\bar{a})$ that works.\nConsider a minimal set of parameters. Let $\\bar{a} = \\{v_1\\}$. This is a valid choice since $v_1 \\in V(\\mathcal{S}_n)$ and the problem allows $\\bar{a} \\subseteq V(\\mathcal{S}_n)$.\nLet the formula be $\\varphi(y, v_1) := E(y, v_1)$. This is an atomic formula, hence it is quantifier-free, so $\\text{qr}(\\varphi)=0$.\n\nThe corresponding sentence is $\\exists y \\, E(y, v_1)$. The quantifier rank of this sentence is $1 + 0 = 1$.\nWe verify if this sentence witnesses the failure of the Tarski-Vaught test.\nFirst, we check the truth of $\\mathcal{G}_n \\models \\exists y \\, E(y, v_1)$. This is true, as demonstrated by the witness $y=u$, because $E^{\\mathcal{G}_n}(u, v_1)$ holds.\nSecond, we check for a witness in $V(\\mathcal{S}_n)$. We must determine if there exists a $b \\in V(\\mathcal{S}_n)$ such that $\\mathcal{G}_n \\models E(b, v_1)$. An element $b \\in V(\\mathcal{S}_n)$ must be of the form $v_j$ for some $j \\in \\{1, \\dots, n\\}$.\nThe statement $E(v_j, v_1)$ is false for all $j \\in \\{1, \\dots, n\\}$. If $j \\neq 1$, it is false because there are no edges between distinct leaf vertices. If $j = 1$, the statement $E(v_1, v_1)$ is false because the relation $E$ is irreflexive.\nThus, no element from $V(\\mathcal{S}_n)$ can act as a witness.\n\nThe sentence $\\exists y \\, E(y, v_1)$ successfully witnesses the failure of the Tarski-Vaught test, and its quantifier rank is $1$. This holds for any $n \\ge 2$.\nSo, for any $n \\ge 2$, there exists a witnessing sentence of quantifier rank $1$. This implies that the minimal quantifier rank, $q(n)$, is at most $1$.\nA sentence of the form $\\exists y\\,\\varphi(y,\\bar{a})$ must have at least one quantifier, namely $\\exists y$. Therefore, its quantifier rank must be at least $1$.\nCombining these two facts, $1 \\le q(n) \\le 1$, we must have $q(n) = 1$.\n\nThis holds for any integer $n \\ge 2$. Thus, $q(n)$ is the constant function $q(n)=1$. The problem asks for the determination of $q(n)$ as a function of $n$ and then for the final answer to be a single real-valued number. The only consistent interpretation is that the function $q(n)$ is constant, and the single number is the value of this function. The function is $q(n)=1$, and its value is $1$.", "answer": "$$\n\\boxed{1}\n$$", "id": "3040785"}]}
{"hands_on_practices": [{"introduction": "To truly understand ultraproducts, it's best to start with a concrete calculation. This exercise walks you through the fundamental mechanics of evaluating terms and formulas in an ultraproduct structure. By applying the definitions directly to a sequence of integer groups and a specific ultrafilter, you will gain hands-on experience with how component-wise operations and the \"voting\" principle of Łoś's theorem combine to determine properties of the resulting object [@problem_id:3059332].", "problem": "Let $\\mathcal{L}$ be the first-order language of ordered abelian groups, consisting of the function symbols $+$ and $-$, the constant symbol $0$, the binary relation symbol $<$, and one additional constant symbol $d$. For each $n \\in \\mathbb{N}$ with $\\mathbb{N} = \\{1,2,3,\\dots\\}$, define the $\\mathcal{L}$-structure $$G_{n} = \\left(\\mathbb{Z}, +, -, 0, <, d^{G_{n}}\\right),$$ where $\\left(\\mathbb{Z}, +, -, 0, <\\right)$ is the usual ordered abelian group of integers and the interpretation of $d$ in $G_{n}$ is given by\n$$d^{G_{n}} = \\begin{cases} 5n & \\text{if $n$ is even}, \\\\ 3n & \\text{if $n$ is odd}. \\end{cases}$$\nLet $U$ be a nonprincipal ultrafilter on $\\mathbb{N}$ such that the set of even numbers $$E = \\{n \\in \\mathbb{N} : \\text{$n$ is even}\\}$$ belongs to $U$. Consider the ultraproduct $$G = \\prod_{U} G_{n}.$$ Let $a \\in G$ be the element represented by the sequence $a_{n} = n$, that is, $$a = \\left[a_{n}\\right]_{U} = \\left[n\\right]_{U}.$$\n\nDefine the $\\mathcal{L}$-term $$t(x) = 4x - 1,$$ and the $\\mathcal{L}$-formula $$\\varphi(x) \\equiv t(x) < d.$$\n\nUsing only the core definitions of ordered abelian groups, ultrafilters, ultraproducts, and Łoś’s theorem in first-order logic (FOL), derive from first principles:\n\n1. The value of the term $t(x)$ at $a$ in the ultraproduct $G$, expressed as the corresponding equivalence class of a sequence in the product.\n2. The truth value of the formula $\\varphi(x)$ at $a$ in $G$, encoded numerically as $1$ if $\\varphi(a)$ holds in $G$ and $0$ otherwise.\n\nProvide your final answer as a single row matrix with two entries: the first entry is the element $t^{G}(a)$ represented as an equivalence class $\\left[\\cdots\\right]_{U}$, and the second entry is the truth-code $0$ or $1$. No rounding is required. Express your answer exactly.", "solution": "The problem requires the determination of two quantities related to the ultraproduct structure $G = \\prod_{U} G_{n}$: the value of a term $t(x)$ at a specific element $a \\in G$, and the truth value of a formula $\\varphi(x)$ evaluated at the same element. We will address each part systematically using the definitions of ultraproducts and Łoś's theorem.\n\nThe element $a \\in G$ is given by the equivalence class of the sequence $(a_{n})_{n \\in \\mathbb{N}}$ where $a_{n} = n$ for all $n \\in \\mathbb{N}$. We write this as $a = \\left[n\\right]_{U}$.\n\n**1. Evaluation of the term $t(x)$ at $a$**\n\nThe term is given by $t(x) = 4x - 1$. While the constants $4$ and $1$ are not explicitly in the language $\\mathcal{L}$, in the context of the structures $G_n$ (which are based on the integers $\\mathbb{Z}$), this is a standard abbreviation for a definable function. For any element $z$ in an abelian group, $4z$ is shorthand for $z+z+z+z$. The element $1$ is definable in the ordered group of integers $(\\mathbb{Z}, <, 0)$ as the smallest positive element. Thus, $t(x)$ corresponds to a well-defined term in the language of these structures.\n\nThe interpretation of a term in an ultraproduct is computed component-wise. If $a = [a_n]_U$, the value of the term $t(x)$ at $a$, denoted $t^{G}(a)$, is given by the equivalence class of the sequence formed by evaluating the term in each structure $G_n$ at the corresponding component $a_n$:\n$$t^{G}(a) = \\left[t^{G_n}(a_n)\\right]_{U}$$\nIn this problem, $a_n = n$. The universe of each $G_n$ is $\\mathbb{Z}$, where the function symbols are interpreted in the standard way. Therefore, the interpretation of the term $t(x)$ in $G_n$, applied to the element $a_n = n \\in \\mathbb{Z}$, is:\n$$t^{G_n}(n) = 4n - 1$$\nSubstituting this back into the expression for $t^{G}(a)$, we obtain the value of the term in the ultraproduct:\n$$t^{G}(a) = \\left[4n - 1\\right]_{U}$$\nThis is the equivalence class of the sequence whose $n$-th term is $4n-1$.\n\n**2. Truth value of the formula $\\varphi(x)$ at $a$**\n\nThe formula is $\\varphi(x) \\equiv t(x) < d$. We need to determine the truth value of $\\varphi(a)$ in the ultraproduct structure $G$, which is to say, we must determine if $G \\models \\varphi(a)$.\n\nŁoś's theorem provides the fundamental connection between truth in an ultraproduct and truth in the component structures. For a formula $\\psi(x_1, \\dots, x_k)$ and elements $b_1, \\dots, b_k \\in G$ given by $b_i = [b_{i,n}]_U$, the theorem states:\n$$G \\models \\psi(b_1, \\dots, b_k) \\iff \\{n \\in \\mathbb{N} : G_n \\models \\psi(b_{1,n}, \\dots, b_{k,n})\\} \\in U$$\nApplying this to our specific formula $\\varphi(x)$ and element $a = [n]_U$, we have:\n$$G \\models \\varphi(a) \\iff \\{n \\in \\mathbb{N} : G_n \\models \\varphi(n)\\} \\in U$$\nThe condition $G_n \\models \\varphi(n)$ means that the formula $\\varphi(n)$ is true when interpreted in the structure $G_n$. This is equivalent to:\n$$t^{G_n}(n) <^{G_n} d^{G_n}$$\nFrom the first part, we know $t^{G_n}(n) = 4n - 1$. The relation $<^{G_n}$ is the usual less-than relation on $\\mathbb{Z}$. So the inequality is:\n$$4n - 1 < d^{G_n}$$\nThe value of $d^{G_n}$ depends on whether $n$ is even or odd. We must analyze these two cases.\n\nCase 1: $n$ is even.\nThe set of even numbers is $E = \\{n \\in \\mathbb{N} : \\text{$n$ is even}\\}$. For $n \\in E$, the interpretation of $d$ in $G_n$ is $d^{G_n} = 5n$. The inequality becomes:\n$$4n - 1 < 5n$$\n$$-1 < n$$\nSince $n \\in \\mathbb{N} = \\{1, 2, 3, \\dots\\}$, the condition $n > -1$ is always true. Thus, the inequality holds for all even $n$.\n\nCase 2: $n$ is odd.\nFor $n \\in \\mathbb{N} \\setminus E$, the interpretation of $d$ in $G_n$ is $d^{G_n} = 3n$. The inequality becomes:\n$$4n - 1 < 3n$$\n$$n < 1$$\nSince $n \\in \\mathbb{N}$, the smallest possible value for $n$ is $1$. The condition $n<1$ is never true for any $n \\in \\mathbb{N}$. Thus, the inequality is false for all odd $n$.\n\nLet $S = \\{n \\in \\mathbb{N} : G_n \\models \\varphi(n)\\}$. Our analysis shows that $G_n \\models \\varphi(n)$ if and only if $n$ is even. Therefore, the set $S$ is precisely the set of even numbers:\n$$S = E = \\{n \\in \\mathbb{N} : \\text{$n$ is even}\\}$$\nAccording to Łoś's theorem, $G \\models \\varphi(a)$ if and only if $S \\in U$. The problem statement explicitly provides that $E \\in U$. Since $S=E$, it follows that $S \\in U$.\n\nWe conclude that the formula $\\varphi(a)$ is true in $G$. The problem asks for this truth value to be encoded as $1$ for true and $0$ for false. Therefore, the required numerical code is $1$.\n\nThe final answer consists of two parts: the element $t^G(a)$ and the truth-code for $\\varphi(a)$.\n1. $t^{G}(a) = \\left[4n - 1\\right]_{U}$\n2. The truth-code is $1$.\n\nThese two results are to be provided in a single row matrix.", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\left[4n - 1\\right]_{U} & 1\n\\end{pmatrix}\n}\n$$", "id": "3059332"}, {"introduction": "Beyond calculating with individual elements, ultraproducts are powerful tools for constructing new algebraic structures. This problem demonstrates this by asking you to determine the characteristic of a field built from an infinite family of finite fields. You will use Łoś's Theorem to show how a property that fails for every component structure (having characteristic $0$) can emerge in the ultraproduct, providing a beautiful example of a \"transfer principle\" at work [@problem_id:3059323].", "problem": "Let $P$ denote the set of all prime numbers and for each $p \\in P$ let $\\mathbb{F}_{p}$ be the finite field with $p$ elements, viewed as an $L_{\\mathrm{ring}}$-structure, where $L_{\\mathrm{ring}}$ is the language of rings $\\{0,1,+,\\times\\}$. Let $U$ be a nonprincipal ultrafilter on the index set $P$, and consider the ultraproduct\n$$\nK \\coloneqq \\prod_{p \\in P} \\mathbb{F}_{p} \\big/ U.\n$$\nUsing only the definitions of ultrafilter, ultraproduct, the characteristic of a ring, and Łoś's theorem, determine the characteristic of $K$ by proving that for every fixed positive integer $n$, the sentence $n \\cdot 1 = 0$ fails in $K$. Conclude the characteristic of $K$. Report your final answer as a single integer with no units.", "solution": "The problem requires us to determine the characteristic of the field $K$, which is defined as the ultraproduct $K \\coloneqq \\prod_{p \\in P} \\mathbb{F}_{p} / U$. Here, $P$ is the set of all prime numbers, $\\mathbb{F}_p$ is the finite field with $p$ elements for each $p \\in P$, and $U$ is a nonprincipal ultrafilter on the index set $P$.\n\nFirst, let us recall the definition of the characteristic of a ring. For a ring $R$ with a multiplicative identity $1_R$, the characteristic, denoted $\\mathrm{char}(R)$, is the smallest positive integer $n$ such that the sum of $n$ copies of $1_R$ equals the additive identity $0_R$. This can be written as $n \\cdot 1_R = 0_R$. If no such positive integer $n$ exists, the characteristic is defined to be $0$.\n\nThe problem specifies the use of Łoś's theorem, which is the fundamental tool for understanding the properties of ultraproducts. Łoś's theorem states that for any first-order sentence $\\sigma$ in the language of rings $L_{\\mathrm{ring}}$, the sentence $\\sigma$ is true in the ultraproduct $K$ if and only if the set of indices $p \\in P$ for which $\\sigma$ is true in the component structure $\\mathbb{F}_p$ is an element of the ultrafilter $U$. Symbolically:\n$$\nK \\models \\sigma \\iff \\{ p \\in P \\mid \\mathbb{F}_p \\models \\sigma \\} \\in U.\n$$\n\nWe are tasked to prove that for every fixed positive integer $n$, the sentence $n \\cdot 1 = 0$ fails in $K$, and from this, to deduce the characteristic of $K$.\n\nLet us fix an arbitrary positive integer $n \\in \\mathbb{Z}^{+}$. We consider the first-order sentence $\\sigma_n$ corresponding to the statement \"$n \\cdot 1 = 0$\". In the language of rings $L_{\\mathrm{ring}} = \\{0, 1, +, \\times \\}$, this sentence is expressed as:\n$$\n\\sigma_n \\equiv \\underbrace{1 + 1 + \\dots + 1}_{n \\text{ times}} = 0.\n$$\n\nAccording to Łoś's theorem, the sentence $\\sigma_n$ is true in $K$ if and only if the set of primes $p$ for which $\\sigma_n$ is true in $\\mathbb{F}_p$ belongs to the ultrafilter $U$. Let's call this set $S_n$:\n$$\nK \\models \\sigma_n \\iff S_n \\in U, \\quad \\text{where} \\quad S_n = \\{ p \\in P \\mid \\mathbb{F}_p \\models \\sigma_n \\}.\n$$\n\nNow, we must determine for which primes $p$ the sentence $\\sigma_n$ is true in the field $\\mathbb{F}_p$. The statement $\\mathbb{F}_p \\models \\sigma_n$ is equivalent to $n \\cdot 1_{\\mathbb{F}_p} = 0_{\\mathbb{F}_p}$. This condition holds if and only if the characteristic of the field $\\mathbb{F}_p$ divides the integer $n$. The characteristic of the field $\\mathbb{F}_p$ is precisely the prime $p$.\nTherefore, $\\mathbb{F}_p \\models \\sigma_n$ if and only if $p$ divides $n$.\n\nThis allows us to describe the set $S_n$ more explicitly:\n$$\nS_n = \\{ p \\in P \\mid p \\text{ divides } n \\}.\n$$\nThe elements of $S_n$ are the prime factors of the integer $n$. By the fundamental theorem of arithmetic, any integer $n \\ge 1$ has a unique prime factorization. The number of distinct prime factors of any given integer $n$ is finite. Consequently, the set $S_n$ is a finite set for any $n \\in \\mathbb{Z}^{+}$.\n\nNext, we must consider the properties of the ultrafilter $U$. The problem states that $U$ is a nonprincipal ultrafilter on the set of primes $P$, which is an infinite set. A crucial property of a nonprincipal ultrafilter on an infinite index set $I$ is that it contains no finite subsets of $I$. To see this, assume $F \\subset I$ is a finite set and $F \\in U$. Since $U$ is nonprincipal, for any element $i \\in I$, the singleton set $\\{i\\}$ is not in $U$. By the ultrafilter property, its complement $I \\setminus \\{i\\}$ must be in $U$. If $F = \\{i_1, i_2, \\dots, i_k\\}$ is a finite set, then $I \\setminus \\{i_j\\} \\in U$ for each $j=1, \\dots, k$. Since an ultrafilter is closed under finite intersections, it would follow that $\\bigcap_{j=1}^k (I \\setminus \\{i_j\\}) = I \\setminus F$ is in $U$. If we assume $F \\in U$, then we have both $F \\in U$ and $I \\setminus F \\in U$. Their intersection $F \\cap (I \\setminus F) = \\emptyset$ must also be in $U$. However, the empty set cannot be in any proper filter, and ultrafilters are by definition proper filters. This is a contradiction. Therefore, a nonprincipal ultrafilter on an infinite set cannot contain any finite sets.\n\nSince $S_n$ is a finite set for any $n \\in \\mathbb{Z}^{+}$ and $U$ is a nonprincipal ultrafilter on the infinite set $P$, it must be that $S_n \\notin U$.\n\nFrom Łoś's theorem, since $S_n \\notin U$, the sentence $\\sigma_n$ is false in $K$. That is, for every positive integer $n$,\n$$\nK \\not\\models (n \\cdot 1 = 0).\n$$\nThis means that for every $n \\in \\mathbb{Z}^{+}$, we have $n \\cdot 1_K \\neq 0_K$.\n\nHaving established this, we can now determine the characteristic of $K$. By definition, the characteristic is the *smallest* positive integer $n$ for which $n \\cdot 1_K = 0_K$. We have just shown that no such positive integer exists. When no such positive integer exists, the characteristic of the ring is defined to be $0$.\n\nTherefore, the characteristic of the field $K$ is $0$. It is a standard result that an ultraproduct of fields is a field, and in this case, $K$ is a field of characteristic $0$.", "answer": "$$\\boxed{0}$$", "id": "3059323"}, {"introduction": "Ultraproducts provide a powerful test for the expressive limits of a logical language. A direct consequence of Łoś's theorem is that any class of structures defined by first-order axioms must be closed under taking ultraproducts. This exercise challenges you to apply this criterion to prove that several intuitive mathematical properties, such as finiteness and connectedness, cannot be captured by any set of first-order sentences [@problem_id:3059330].", "problem": "You are given the following foundations to use in your reasoning. An ultrafilter $\\mathcal{U}$ on a set $I$ is a maximal proper filter on $I$; $\\mathcal{U}$ is nonprincipal if it contains no finite subsets of $I$. Given a family $\\{M_i\\}_{i\\in I}$ of structures in a fixed first-order language $\\mathcal{L}$ and an ultrafilter $\\mathcal{U}$ on $I$, the ultraproduct $\\prod_{i\\to \\mathcal{U}} M_i$ is the quotient of the direct product $\\prod_{i\\in I} M_i$ by the equivalence relation that identifies two sequences $\\bar{a}=(a_i)_{i\\in I}$ and $\\bar{b}=(b_i)_{i\\in I}$ whenever $\\{i\\in I : a_i=b_i\\}\\in \\mathcal{U}$. Łoś’s theorem (also known as the Fundamental Theorem of Ultraproducts) states that for every first-order formula $\\varphi(\\bar{x})$ in $\\mathcal{L}$ and sequences $\\bar{a}^1,\\dots,\\bar{a}^k\\in \\prod_{i\\in I} M_i$, one has\n$$\n\\prod_{i\\to \\mathcal{U}} M_i \\models \\varphi([\\bar{a}^1],\\dots,[\\bar{a}^k]) \\quad\\text{iff}\\quad \\{i\\in I : M_i \\models \\varphi(\\bar{a}^1_i,\\dots,\\bar{a}^k_i)\\} \\in \\mathcal{U}.\n$$\nA class $\\mathcal{K}$ of $\\mathcal{L}$-structures is first-order axiomatizable if there exists a (possibly infinite) set $\\Sigma$ of $\\mathcal{L}$-sentences such that $M\\in \\mathcal{K}$ if and only if $M\\models \\Sigma$. Such classes are closed under ultraproducts by Łoś’s theorem.\n\nConsider the following concrete setup. Let $I=\\mathbb{N}$ and let $\\mathcal{U}$ be a nonprincipal ultrafilter on $\\mathbb{N}$. In the language of undirected graphs with a single binary relation symbol $E$, let $G_n$ be the cycle graph $C_{2n}$ on $2n$ vertices, with adjacency relation $E$. In the empty language (no function, relation, or constant symbols), let $A_n$ be a set of cardinality $n$.\n\nUsing only the definitions above and Łoś’s theorem, analyze how ultraproducts can be used to produce counterexamples that show certain properties are not first-order axiomatizable. Select all properties below for which one can construct, via a nonprincipal ultraproduct $\\prod_{n\\to \\mathcal{U}} M_n$ of appropriately chosen $M_n$, a structure failing the property while almost all factors $M_n$ satisfy it (thereby demonstrating non-definability in first-order logic).\n\nA. The class of finite structures (in any nonempty signature).\n\nB. The class of connected undirected graphs.\n\nC. The class of undirected graphs of finite diameter.\n\nD. The class of acyclic undirected graphs.\n\nE. The class of algebraically closed fields of characteristic $0$.\n\nChoose all that apply.", "solution": "The problem asks to identify which of the given properties are not first-order axiomatizable, using a specific method of proof: constructing a sequence of structures $\\{M_n\\}_{n\\in\\mathbb{N}}$ that all satisfy a property $P$, but whose ultraproduct $M = \\prod_{n\\to \\mathcal{U}} M_n$ with respect to a nonprincipal ultrafilter $\\mathcal{U}$ fails to satisfy $P$. If such a construction is possible, it demonstrates that the class of structures with property $P$ is not closed under ultraproducts, and therefore, by the contrapositive of a direct consequence of Łoś's theorem, is not first-order axiomatizable.\n\n**A. The class of finite structures (in any nonempty signature).**\nLet us consider the sequence of structures $\\{A_n\\}_{n\\in\\mathbb{N}}$, where $A_n$ is a set of cardinality $n$. Each $A_n$ is a finite structure. The ultraproduct $A = \\prod_{n\\to \\mathcal{U}} A_n$ is infinite. To show this, consider the first-order sentence $\\phi_k$, \"there exist at least $k$ distinct elements.\" $A_n \\models \\phi_k$ if and only if $n \\ge k$. The set of indices $\\{n \\in \\mathbb{N} : n \\ge k\\}$ is cofinite, so it is in the nonprincipal ultrafilter $\\mathcal{U}$. By Łoś's theorem, $A \\models \\phi_k$ for every $k \\ge 1$, which implies $A$ is infinite. Thus, the property of being finite is not closed under ultraproducts and is not first-order axiomatizable.\n\n**B. The class of connected undirected graphs.**\nLet us consider the sequence of cycle graphs $\\{C_{2n}\\}_{n\\in\\mathbb{N}}$. Each $C_{2n}$ is connected. In the ultraproduct $G = \\prod_{n\\to \\mathcal{U}} C_{2n}$, consider the vertices represented by the sequences $a = (v_{n,0})_{n\\in\\mathbb{N}}$ and $b = (v_{n,n})_{n\\in\\mathbb{N}}$, where $v_{n,i}$ is the $i$-th vertex of $C_{2n}$. The distance between $v_{n,0}$ and $v_{n,n}$ in $C_{2n}$ is $n$. For any finite path length $k$, the set of indices $\\{n \\in \\mathbb{N} : d(v_{n,0}, v_{n,n}) \\le k\\}$ is $\\{n \\in \\mathbb{N} : n \\le k\\}$, which is a finite set. Since finite sets are not in $\\mathcal{U}$, by Łoś's theorem, there is no path of length $k$ between $[a]$ and $[b]$ in $G$. This holds for any $k$, so $[a]$ and $[b]$ are in different connected components, and $G$ is disconnected. Thus, connectedness is not a first-order property.\n\n**C. The class of undirected graphs of finite diameter.**\nUsing the same sequence of graphs $\\{C_{2n}\\}_{n\\in\\mathbb{N}}$, each graph has a finite diameter (equal to $n$). As shown for property B, the ultraproduct $G$ contains two vertices $[a]$ and $[b]$ at an infinite distance from each other. Therefore, the diameter of $G$ is infinite. The property of having a finite diameter is not closed under ultraproducts and is not first-order axiomatizable.\n\n**D. The class of acyclic undirected graphs.**\nA graph is acyclic if and only if it satisfies the infinite set of first-order sentences $\\{\\neg \\gamma_k : k \\ge 3\\}$, where $\\gamma_k$ asserts the existence of a cycle of length $k$. A class axiomatized by a set of first-order sentences is closed under ultraproducts. An ultraproduct of acyclic graphs is therefore always acyclic. The proposed construction is not possible.\n\n**E. The class of algebraically closed fields of characteristic 0.**\nThis class is axiomatizable by a set of first-order sentences (field axioms, axioms for every polynomial having a root, and axioms for characteristic 0). Therefore, this class is closed under ultraproducts. The proposed construction is not possible.\n\nBased on this analysis, the properties for which the construction is possible are A, B, and C.", "answer": "$$\\boxed{ABC}$$", "id": "3059330"}]}
{"hands_on_practices": [{"introduction": "This first practice explores the algebra of martingales. In many real-world applications, such as portfolio management, we build complex models by combining simpler ones. This exercise asks you to determine how to linearly combine a process with an upward tendency (a submartingale) and one with a downward tendency (a supermartingale) to create a new process that is guaranteed to have a downward or stable trend. Mastering this helps solidify the core definitions and the behavior of conditional expectations under linear transformations.", "problem": "In quantitative finance, stochastic processes are used to model the evolution of financial quantities over time. Consider a filtered probability space $(\\Omega, \\mathcal{F}, (\\mathcal{F}_n)_{n \\geq 0}, P)$. An analyst is working with two distinct models for assets.\n\nThe first process, $(X_n)_{n \\geq 0}$, represents the value of an asset that is generally expected to appreciate or hold its value. This is modeled as a **submartingale** with respect to the filtration $(\\mathcal{F}_n)$. A process $(M_n)_{n \\geq 0}$ is a submartingale if it is adapted to $(\\mathcal{F}_n)$, is integrable (i.e., $E[|M_n|] < \\infty$ for all $n$), and satisfies $E[M_{n+1} | \\mathcal{F}_n] \\geq M_n$ for all $n \\geq 0$.\n\nThe second process, $(Y_n)_{n \\geq 0}$, represents a risk factor that is expected to decay or remain stable. This is modeled as a **supermartingale** with respect to the same filtration $(\\mathcal{F}_n)$. A process $(M_n)_{n \\geq 0}$ is a supermartingale if it is adapted to $(\\mathcal{F}_n)$, is integrable, and satisfies $E[M_{n+1} | \\mathcal{F}_n] \\leq M_n$ for all $n \\geq 0$.\n\nThe analyst forms a new portfolio strategy, $(Z_n)_{n \\geq 0}$, by taking a linear combination of the two initial processes:\n$$Z_n = c_1 X_n + c_2 Y_n$$\nwhere $c_1$ and $c_2$ are non-zero, real-valued constants.\n\nThe goal is to construct a \"conservative\" portfolio, which is mathematically defined as a strategy that is itself a supermartingale. Which of the following conditions on the constants $c_1$ and $c_2$ guarantees that the process $(Z_n)_{n \\geq 0}$ is a supermartingale for *any* choice of a submartingale $X_n$ and a supermartingale $Y_n$ as described above?\n\nA. $c_1 \\leq 0$ and $c_2 \\geq 0$\n\nB. $c_1 \\geq 0$ and $c_2 \\leq 0$\n\nC. $c_1 \\geq 0$ and $c_2 \\geq 0$\n\nD. $c_1 \\leq 0$ and $c_2 \\leq 0$\n\nE. $c_1 + c_2 = 0$", "solution": "We are given a filtered probability space and two processes: a submartingale $(X_{n})_{n \\geq 0}$ and a supermartingale $(Y_{n})_{n \\geq 0}$ with respect to the same filtration $(\\mathcal{F}_{n})_{n \\geq 0}$. For fixed nonzero constants $c_{1},c_{2} \\in \\mathbb{R}$, define $Z_{n} = c_{1} X_{n} + c_{2} Y_{n}$. We seek conditions on $c_{1}$ and $c_{2}$ that guarantee $(Z_{n})_{n \\geq 0}$ is a supermartingale for any such $X$ and $Y$.\n\nFirst, note adaptedness and integrability are preserved under constant linear combinations: since $X_{n}$ and $Y_{n}$ are adapted to $(\\mathcal{F}_{n})$, $Z_{n}$ is adapted; and\n$$\nE[|Z_{n}|] \\leq |c_{1}|\\,E[|X_{n}|] + |c_{2}|\\,E[|Y_{n}|] < \\infty,\n$$\nso $Z_{n}$ is integrable for all $n$.\n\nTo verify the supermartingale property, we use linearity of conditional expectation:\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] = c_{1}\\,E[X_{n+1} \\mid \\mathcal{F}_{n}] + c_{2}\\,E[Y_{n+1} \\mid \\mathcal{F}_{n}].\n$$\nWe need\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] \\leq Z_{n} = c_{1} X_{n} + c_{2} Y_{n} \\quad \\text{a.s. for all } n \\geq 0.\n$$\nBecause $X$ is a submartingale and $Y$ is a supermartingale, we have\n$$\nE[X_{n+1} \\mid \\mathcal{F}_{n}] \\geq X_{n}, \\qquad E[Y_{n+1} \\mid \\mathcal{F}_{n}] \\leq Y_{n}.\n$$\nIf $c_{1} \\leq 0$ and $c_{2} \\geq 0$, then multiplying these inequalities by $c_{1}$ and $c_{2}$, respectively, and using the fact that multiplying by a nonpositive constant reverses the inequality while multiplying by a nonnegative constant preserves it, yields\n$$\nc_{1}\\,E[X_{n+1} \\mid \\mathcal{F}_{n}] \\leq c_{1} X_{n}, \\qquad c_{2}\\,E[Y_{n+1} \\mid \\mathcal{F}_{n}] \\leq c_{2} Y_{n}.\n$$\nAdding these inequalities gives\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] \\leq Z_{n},\n$$\nso $(Z_{n})_{n \\geq 0}$ is a supermartingale. Thus the condition $c_{1} \\leq 0$ and $c_{2} \\geq 0$ guarantees the desired property for any submartingale $X$ and supermartingale $Y$.\n\nWe now show that none of the other listed conditions guarantee that $(Z_{n})$ is a supermartingale for any choice of $X$ and $Y$.\n\n- For $c_{1} \\geq 0$ and $c_{2} \\leq 0$ (option B), take $Y_{n} \\equiv 0$ (a martingale, hence a supermartingale) and $X_{n} = n$ (deterministic submartingale). Then\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] - Z_{n} = c_{1}\\big(E[X_{n+1} \\mid \\mathcal{F}_{n}] - X_{n}\\big) = c_{1} > 0,\n$$\nwhich violates the supermartingale inequality.\n\n- For $c_{1} \\geq 0$ and $c_{2} \\geq 0$ (option C), the same example ($X_{n} = n$, $Y_{n} \\equiv 0$) gives\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] - Z_{n} = c_{1} > 0,\n$$\nso no guarantee of a supermartingale.\n\n- For $c_{1} \\leq 0$ and $c_{2} \\leq 0$ (option D), take $X_{n} \\equiv 0$ (a martingale, hence a submartingale) and $Y_{n} = -n$ (deterministic supermartingale). Then\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] - Z_{n} = c_{2}\\big(E[Y_{n+1} \\mid \\mathcal{F}_{n}] - Y_{n}\\big) = c_{2}(-1) \\geq 0,\n$$\nsince $c_{2} \\leq 0$, again violating the supermartingale inequality in general.\n\n- For $c_{1} + c_{2} = 0$ (option E), take $Y_{n} \\equiv 0$ and any strict submartingale $X$. Then $Z_{n} = c_{1} X_{n}$ and\n$$\nE[Z_{n+1} \\mid \\mathcal{F}_{n}] - Z_{n} = c_{1}\\big(E[X_{n+1} \\mid \\mathcal{F}_{n}] - X_{n}\\big),\n$$\nwhich is nonnegative if $c_{1} \\geq 0$, hence not guaranteed to be a supermartingale for arbitrary choices of $X$ and $Y$.\n\nTherefore, among the listed options, only $c_{1} \\leq 0$ and $c_{2} \\geq 0$ guarantees that $Z$ is a supermartingale for any submartingale $X$ and supermartingale $Y$.", "answer": "$$\\boxed{A}$$", "id": "1390382"}, {"introduction": "While a fair game itself is a martingale, the variance of your winnings is not; it tends to grow. This makes the squared process, $S_n^2$, a natural submartingale. A powerful technique in stochastic calculus is to create a true martingale by subtracting this predictable drift, a process known as compensation. This problem walks you through verifying that the \"compensated variance process\" is a martingale and then using this crucial property to make a forecast, a fundamental application of martingale theory.", "problem": "An algorithmic trading strategy is being tested in a simulated market designed to be \"fair,\" meaning there is no inherent upward or downward drift in prices. The profit or loss generated by the strategy on any given day, day $k$, is represented by a random variable $Y_k$. The daily outcomes $\\{Y_k\\}_{k \\ge 1}$ are assumed to be independent and identically distributed (i.i.d.) with an expected value $E[Y_k] = 0$ and a constant, non-zero variance $Var(Y_k) = \\sigma^2$.\n\nThe total cumulative profit or loss after $n$ days is the sum $S_n = \\sum_{k=1}^n Y_k$. A risk analyst defines a \"compensated variance process\" $M_n$ to analyze the strategy's risk profile. This process is defined as $M_n = S_n^2 - n\\sigma^2$.\n\nSuppose the daily standard deviation of the profit/loss is known to be $\\sigma = 350$. After a period of $n=8$ trading days, the cumulative profit is observed to be $S_8 = 2100$. Based on this information, calculate the expected value of the compensated variance process at day $n=20$. Express your answer as a single real number.", "solution": "We are given i.i.d. daily P/Ls $\\{Y_{k}\\}_{k \\ge 1}$ with $E[Y_{k}] = 0$ and $\\operatorname{Var}(Y_{k}) = \\sigma^{2}$. Define $S_{n} = \\sum_{k=1}^{n} Y_{k}$ and $M_{n} = S_{n}^{2} - n \\sigma^{2}$. Let $\\{\\mathcal{F}_{n}\\}$ be the natural filtration $\\mathcal{F}_{n} = \\sigma(Y_{1},\\dots,Y_{n})$.\n\nFirst, we show $\\{M_{n}\\}$ is a martingale. Using $S_{n+1} = S_{n} + Y_{n+1}$, we compute\n$$\nS_{n+1}^{2} = S_{n}^{2} + 2 S_{n} Y_{n+1} + Y_{n+1}^{2}.\n$$\nTaking conditional expectation given $\\mathcal{F}_{n}$ and using independence and mean zero,\n$$\nE[S_{n+1}^{2} \\mid \\mathcal{F}_{n}] = S_{n}^{2} + 2 S_{n} E[Y_{n+1} \\mid \\mathcal{F}_{n}] + E[Y_{n+1}^{2} \\mid \\mathcal{F}_{n}] = S_{n}^{2} + 0 + E[Y_{n+1}^{2}] = S_{n}^{2} + \\sigma^{2}.\n$$\nTherefore,\n$$\nE[M_{n+1} \\mid \\mathcal{F}_{n}] = E[S_{n+1}^{2} - (n+1)\\sigma^{2} \\mid \\mathcal{F}_{n}] = S_{n}^{2} + \\sigma^{2} - (n+1)\\sigma^{2} = S_{n}^{2} - n \\sigma^{2} = M_{n},\n$$\nso $\\{M_{n}\\}$ is a martingale.\n\nBy the martingale property for $20 \\ge 8$,\n$$\nE[M_{20} \\mid \\mathcal{F}_{8}] = M_{8}.\n$$\nGiven the observation $S_{8} = 2100$ and $\\sigma = 350$, we compute\n$$\nM_{8} = S_{8}^{2} - 8 \\sigma^{2} = 2100^{2} - 8 \\cdot 350^{2}.\n$$\nEvaluate each term:\n$$\n2100^{2} = 4{,}410{,}000, \\quad 350^{2} = 122{,}500, \\quad 8 \\cdot 122{,}500 = 980{,}000.\n$$\nHence,\n$$\nM_{8} = 4{,}410{,}000 - 980{,}000 = 3{,}430{,}000.\n$$\nTherefore,\n$$\nE[M_{20} \\mid S_{8} = 2100] = 3{,}430{,}000.\n$$", "answer": "$$\\boxed{3430000}$$", "id": "1390412"}, {"introduction": "It's tempting to assume that applying a \"nice\" function, like taking the maximum, to a supermartingale will preserve its properties. This exercise serves as a critical cautionary tale by asking you to verify if the maximum of two supermartingales is also a supermartingale. By constructing a classic counterexample with a simple random walk, you will develop a deeper intuition for the subtle ways these processes behave and uncover their connection to convex functions.", "problem": "Consider the following claim in probability theory:\n\n\"If $X = (X_n)_{n \\geq 0}$ and $Y = (Y_n)_{n \\geq 0}$ are two supermartingales with respect to the same filtration $(\\mathcal{F}_n)_{n \\geq 0}$, then the process $M = (M_n)_{n \\geq 0}$ defined by $M_n = \\max(X_n, Y_n)$ is also a supermartingale with respect to $(\\mathcal{F}_n)_{n \\geq 0}$.\"\n\nRecall that a process $Z = (Z_n)_{n \\geq 0}$ is adapted to a filtration $(\\mathcal{F}_n)_{n \\geq 0}$ if for each $n$, the random variable $Z_n$ is $\\mathcal{F}_n$-measurable. Such a process is a supermartingale if it is adapted, $E[|Z_n|] < \\infty$ for all $n$, and it satisfies $E[Z_{n+1} | \\mathcal{F}_n] \\leq Z_n$ for all $n \\geq 0$.\n\nLet $(\\xi_i)_{i \\geq 1}$ be a sequence of independent and identically distributed random variables with $P(\\xi_i = 1) = P(\\xi_i = -1) = 1/2$. Let $S_n$ be a simple symmetric random walk defined by $S_0 = 0$ and $S_n = \\sum_{i=1}^n \\xi_i$ for $n \\geq 1$. Let $(\\mathcal{F}_n)_{n \\geq 0}$ be the natural filtration generated by this random walk, i.e., $\\mathcal{F}_0 = \\{\\emptyset, \\Omega\\}$ and $\\mathcal{F}_n = \\sigma(\\xi_1, \\dots, \\xi_n)$ for $n \\geq 1$.\n\nWhich of the following pairs of processes $(X_n, Y_n)$ provides a valid counterexample to the claim above?\n\nA. $X_n = S_n$ and $Y_n = -S_n$\n\nB. $X_n = -n^2$ and $Y_n = -n^2 - 1$\n\nC. $X_n = S_n$ and $Y_n = S_n - 1$\n\nD. $X_n = S_n^2$ and $Y_n = 0$", "solution": "We analyze each option by verifying the supermartingale properties of the given processes and then checking whether the process defined by the pointwise maximum violates the supermartingale inequality.\n\nRecall that for the simple symmetric random walk, $S_{n+1} = S_n + \\xi_{n+1}$ with $E[\\xi_{n+1} \\mid \\mathcal{F}_n] = 0$ and $\\xi_{n+1}$ independent of $\\mathcal{F}_n$. Hence\n$$\nE[S_{n+1} \\mid \\mathcal{F}_n] = S_n + E[\\xi_{n+1} \\mid \\mathcal{F}_n] = S_n,\n$$\nso $(S_n)_{n \\geq 0}$ is a martingale. Therefore, both $(S_n)$ and $(-S_n)$ are supermartingales. Moreover, $S_n$ and any deterministic sequence are adapted to $(\\mathcal{F}_n)$, and all processes considered have finite first moments for each fixed $n$.\n\nOption A: $X_n = S_n$, $Y_n = -S_n$. Both $(X_n)$ and $(Y_n)$ are martingales, hence supermartingales. The maximum is\n$$\nM_n = \\max(S_n, -S_n) = |S_n|.\n$$\nWe compute the conditional expectation. Condition on $\\mathcal{F}_n$ and distinguish cases:\n- If $S_n = k$ with $k \\geq 1$, then $S_{n+1} \\in \\{k+1, k-1\\}$ with equal probabilities, so\n$$\nE[|S_{n+1}| \\mid \\mathcal{F}_n] = \\frac{|k+1| + |k-1|}{2} = \\frac{(k+1) + (k-1)}{2} = k = |S_n|.\n$$\n- If $S_n = -k$ with $k \\geq 1$, the same calculation gives $E[|S_{n+1}| \\mid \\mathcal{F}_n] = |S_n|$.\n- If $S_n = 0$, then $S_{n+1} \\in \\{1, -1\\}$ with equal probabilities, so\n$$\nE[|S_{n+1}| \\mid \\mathcal{F}_n] = \\frac{|1| + |-1|}{2} = 1 > 0 = |S_n|.\n$$\nTherefore, $E[M_{n+1} \\mid \\mathcal{F}_n] \\geq M_n$ with strict inequality on the event $\\{S_n = 0\\}$ of positive probability. Hence $(M_n)$ is a submartingale and fails the supermartingale inequality. This provides a valid counterexample to the claim.\n\nOption B: $X_n = -n^{2}$, $Y_n = -n^{2} - 1$. These are deterministic, adapted, and integrable. The supermartingale condition reduces to $X_{n+1} \\leq X_n$ and $Y_{n+1} \\leq Y_n$:\n$$\n-(n+1)^{2} \\leq -n^{2}, \\quad -(n+1)^{2} - 1 \\leq -n^{2} - 1,\n$$\nwhich are true for all $n$. The maximum is\n$$\nM_n = \\max(-n^{2}, -n^{2} - 1) = -n^{2} = X_n,\n$$\nwhich is a supermartingale. Thus this is not a counterexample.\n\nOption C: $X_n = S_n$, $Y_n = S_n - 1$. Since $S_n$ is a martingale, so is $S_n - 1$:\n$$\nE[S_{n+1} - 1 \\mid \\mathcal{F}_n] = E[S_{n+1} \\mid \\mathcal{F}_n] - 1 = S_n - 1 = Y_n.\n$$\nThe maximum satisfies\n$$\nM_n = \\max(S_n, S_n - 1) = S_n,\n$$\nwhich is a supermartingale. Thus this is not a counterexample.\n\nOption D: $X_n = S_n^{2}$, $Y_n = 0$. One has\n$$\nE[S_{n+1}^{2} \\mid \\mathcal{F}_n] = E[(S_n + \\xi_{n+1})^{2} \\mid \\mathcal{F}_n] = S_n^{2} + 2 S_n E[\\xi_{n+1} \\mid \\mathcal{F}_n] + E[\\xi_{n+1}^{2} \\mid \\mathcal{F}_n] = S_n^{2} + 1,\n$$\nso $(S_n^{2})$ is a submartingale, not a supermartingale. Therefore, this option does not satisfy the premise that both $X$ and $Y$ are supermartingales and cannot serve as a counterexample.\n\nConsequently, only Option A provides a valid counterexample: both inputs are supermartingales, and their pointwise maximum $(|S_n|)$ is not a supermartingale.", "answer": "$$\\boxed{A}$$", "id": "1390442"}]}
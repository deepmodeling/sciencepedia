{"hands_on_practices": [{"introduction": "The reflection principle often leads to remarkably elegant and surprisingly simple results. This first exercise, framed as an algorithmic trading problem, asks a conditional probability question about the past behavior of a random walk given its endpoint. You will apply the reflection principle, particularly in the form of the Ballot Theorem, to see how a seemingly complex scenario simplifies to a beautiful and intuitive answer. [@problem_id:1405585]", "problem": "An algorithmic trading bot analyzes the price of a volatile cryptocurrency. The bot models the price movement as a simple symmetric random walk. Starting from a reference price, which we set to $0$, the price changes by either +$1 or -$1 at the end of each minute with equal probability.\n\nThe bot is programmed with a specific risk-management rule: it will hold the asset as long as its price remains strictly above the initial purchase price. If the price ever returns to or drops below the initial price at any minute after the purchase, the bot immediately sells the asset.\n\nSuppose the bot purchases the asset and a period of $2n$ minutes elapses. It is observed that at the end of these $2n$ minutes, the asset's price is exactly $2k$ dollars above the initial price, where $n$ and $k$ are positive integers with $n \\ge k$.\n\nGiven this observation that the final price is $2k$, what is the probability that the bot did *not* sell the asset at any point during the $2n$ minute interval? Express your answer as a closed-form analytic expression in terms of $n$ and $k$.", "solution": "Let $\\{X_{t}\\}_{t=1}^{2n}$ be i.i.d. steps with $\\mathbb{P}(X_{t}=1)=\\mathbb{P}(X_{t}=-1)=\\frac{1}{2}$ and define the random walk $S_{0}=0$, $S_{t}=\\sum_{i=1}^{t}X_{i}$. The bot does not sell during the $2n$ minutes if and only if the path stays strictly above the initial price at all intermediate times, i.e., \n$$\nS_{t}>0 \\quad \\text{for all } t\\in\\{1,2,\\ldots,2n\\}.\n$$\n\nCondition on the observed final value $S_{2n}=2k$ with $n\\geq k\\geq 1$. Let $U$ and $D$ denote the total numbers of $+1$ and $-1$ steps, respectively. Then\n$$\nU-D=S_{2n}=2k,\\qquad U+D=2n \\;\\;\\Rightarrow\\;\\; U=n+k,\\; D=n-k.\n$$\nUnder this conditioning, all sequences with exactly $U=n+k$ up steps and $D=n-k$ down steps are equally likely, and their total number is\n$$\nN_{\\text{tot}}=\\binom{2n}{n+k}.\n$$\n\nLet $N_{+}$ be the number of such sequences whose partial sums are strictly positive at all times $t=1,\\ldots,2n$. The condition $S_{t}>0$ for all $t$ is equivalent to having, for every prefix of the sequence, strictly more up steps than down steps, i.e., $U_{t}>D_{t}$ for all $t$. By Bertrand’s ballot theorem, given $U>D$, the number of sequences with $U_{t}>D_{t}$ for all $t$ is\n$$\nN_{+}=\\frac{U-D}{U+D}\\,N_{\\text{tot}}=\\frac{(n+k)-(n-k)}{(n+k)+(n-k)}\\,\\binom{2n}{n+k}=\\frac{2k}{2n}\\,\\binom{2n}{n+k}.\n$$\nTherefore, the desired conditional probability is\n$$\n\\mathbb{P}\\!\\left(\\text{no sell during }2n\\ \\big|\\ S_{2n}=2k\\right)=\\frac{N_{+}}{N_{\\text{tot}}}=\\frac{2k}{2n}=\\frac{k}{n}.\n$$\nThis is a closed-form expression in terms of $n$ and $k$.", "answer": "$$\\boxed{\\frac{k}{n}}$$", "id": "1405585"}, {"introduction": "A crucial application of random walks is calculating 'first-passage times'—the probability that a process reaches a certain state for the very first time at a specific moment. This problem introduces an asymmetric walk starting from a non-zero position, adding a layer of realism common in physical models like the quantum dot scenario presented. Your task is to apply path-counting techniques derived from the reflection principle to determine the probability of this first-passage event. [@problem_id:1405595]", "problem": "A single-electron transistor (SET) is a device capable of controlling the movement of individual electrons. Consider a simplified model of a quantum dot within a SET, which can hold a net integer charge, measured in units of the elementary charge $e$. Initially, at time $t=0$, the dot has a net charge of $+1e$. At discrete time steps of duration $\\tau$, one electron either tunnels into the dot or tunnels out of the dot. The probability of an electron tunneling into the dot, thus decreasing the net charge by $1e$, is given by $p$. The probability of an electron tunneling out of the dot, increasing the net charge by $1e$, is $q=1-p$.\n\nThe system is operated in a regime where the probability of an electron tunneling in is $p=1/3$. The device is considered to have 'reset' when its net charge first becomes zero.\n\nCalculate the probability that the device resets for the first time at the exact moment $t=5\\tau$. Express your answer as an exact fraction in its simplest form.", "solution": "Model each time step by a random variable $X_{i}$ taking values $-1$ (an electron tunnels in) with probability $p$ and $+1$ (an electron tunnels out) with probability $q=1-p$. Let the net charge after $n$ steps be $S_{n}=1+\\sum_{i=1}^{n}X_{i}$ with $S_{0}=1$. The reset time is $T=\\min\\{n\\geq 1:S_{n}=0\\}$, and we wish to find $\\Pr(T=5)$ for $p=\\frac{1}{3}$, $q=\\frac{2}{3}$.\n\nTo have $S_{5}=0$ starting from $S_{0}=1$, the total number of down-steps $D$ and up-steps $U$ must satisfy $D+U=5$ and $1+U-D=0$, which gives $D=\\frac{5+1}{2}=3$ and $U=2$. Among all sequences with exactly $3$ down-steps and $2$ up-steps, the event $\\{T=5\\}$ is the subset of paths that do not hit $0$ at any earlier time. Since $S_{t}\\geq 1$ for all $t<5$ is equivalent to $U_{t}\\geq D_{t}$ for all $t<5$, the number of such sequences is given by the ballot/Catalan count\n$$\nN=\\frac{1}{k}\\binom{2k-2}{k-1}\\quad\\text{with}\\quad k=3,\n$$\nbecause here $D=k$ and $U=k-1$. Thus\n$$\nN=\\frac{1}{3}\\binom{4}{2}=2.\n$$\n\nEach admissible path has probability $p^{D}q^{U}=p^{3}q^{2}$. Therefore,\n$$\n\\Pr(T=5)=N\\,p^{3}q^{2}=2\\,p^{3}q^{2}.\n$$\nSubstituting $p=\\frac{1}{3}$ and $q=\\frac{2}{3}$ yields\n$$\n\\Pr(T=5)=2\\left(\\frac{1}{3}\\right)^{3}\\left(\\frac{2}{3}\\right)^{2}\n=2\\cdot\\frac{1}{27}\\cdot\\frac{4}{9}\n=\\frac{8}{243}.\n$$\nThis fraction is already in simplest form.", "answer": "$$\\boxed{\\frac{8}{243}}$$", "id": "1405595"}, {"introduction": "Moving beyond single probabilities, the reflection principle is a powerful tool for characterizing the entire statistical distribution of a constrained random walk. This exercise guides you to derive the probability distribution of a walk's final position, given the condition that it has never dropped below its starting point. Solving this requires combining the reflection principle with summation techniques to find a general formula, offering deeper insight into the structure of constrained stochastic processes. [@problem_id:1405580]", "problem": "A particle undergoes a one-dimensional simple symmetric random walk on the integers. Its position after $n$ steps is denoted by $S_n$, with the starting position being $S_0=0$. At each step, the particle moves one unit to the right ($+1$) or one unit to the left ($-1$) with equal probability. The position at step $n$ can be expressed as $S_n = \\sum_{i=1}^n X_i$, where the $X_i$ are independent, identically distributed random variables with $P(X_i=1) = P(X_i=-1) = 1/2$.\n\nIn an experiment, only the paths for which the particle's position remains non-negative are considered valid. That is, a path is valid only if $S_i \\geq 0$ for all time steps $i \\in \\{0, 1, \\dots, n\\}$.\n\nGiven that a path of length $n$ is valid, what is the conditional probability that its final position is $S_n = k$? Assume $k$ is a non-negative integer that has the same parity as $n$ (i.e., $n-k$ is an even number) and $k \\leq n$.\n\nChoose the correct expression for this conditional probability from the options below. In the options, $\\binom{n}{k}$ denotes the binomial coefficient \"n choose k\", and $\\lfloor x \\rfloor$ denotes the floor function, which gives the greatest integer less than or equal to $x$.\n\nA. $\\frac{\\binom{n}{(n+k)/2}}{\\binom{n}{\\lfloor n/2 \\rfloor}}$\n\nB. $\\frac{\\binom{n}{(n+k)/2} - \\binom{n-1}{(n+k)/2}}{\\binom{n}{\\lfloor n/2 \\rfloor}}$\n\nC. $\\frac{\\binom{n}{(n+k)/2}}{\\sum_{j=0}^{n} \\binom{n}{j}}$\n\nD. $\\frac{\\binom{n}{(n+k)/2} - \\binom{n}{(n+k+2)/2}}{\\binom{n}{\\lfloor n/2 \\rfloor}}$\n\nE. $\\frac{\\binom{n-1}{(n+k-2)/2}}{\\binom{n-1}{\\lfloor (n-1)/2 \\rfloor}}$", "solution": "Let $A$ be the event that the particle's final position is $S_n = k$.\nLet $B$ be the event that the particle's position remains non-negative for all steps, i.e., $S_i \\ge 0$ for all $i \\in \\{0, 1, \\dots, n\\}$.\nWe are asked to find the conditional probability $P(A|B)$.\n\nUsing the definition of conditional probability, we have:\n$$P(A|B) = \\frac{P(A \\cap B)}{P(B)}$$\nSince each of the $2^n$ possible paths of length $n$ is equally likely, this probability can be calculated as the ratio of the number of favorable paths:\n$$P(A|B) = \\frac{|A \\cap B|}{|B|}$$\nwhere $|A \\cap B|$ is the number of paths that end at $S_n=k$ and always stay non-negative, and $|B|$ is the total number of paths that always stay non-negative.\n\nFirst, let's calculate $|A \\cap B|$. This is the number of paths from $(0,0)$ to $(n,k)$ that do not touch the line $y=-1$. We can find this using the reflection principle.\nA path from $(0,0)$ to $(n,k)$ consists of $n$ steps. Let $u$ be the number of steps to the right ($+1$) and $d$ be the number of steps to the left ($-1$). We must have:\n$u + d = n$\n$u - d = k$\nSolving this system of equations gives $u = (n+k)/2$ and $d = (n-k)/2$. The total number of paths from $(0,0)$ to $(n,k)$ without any constraints is given by the binomial coefficient $\\binom{n}{u} = \\binom{n}{(n+k)/2}$.\n\nThe number of \"bad\" paths from $(0,0)$ to $(n,k)$ that touch or cross the line $y=-1$ can be found using the reflection principle. The number of such paths is equal to the total number of paths from a reflected starting point $(0, -2)$ to $(n,k)$. Note that a path hits integer level $-1$. Reflecting the starting point $(0,0)$ across the line $y=-1$ gives $(0,-2)$.\nFor a path from $(0,-2)$ to $(n,k)$:\nThe number of steps is $n$.\nThe net displacement is $k - (-2) = k+2$.\nLet $u'$ be the number of up steps and $d'$ be the number of down steps.\n$u' + d' = n$\n$u' - d' = k+2$\nSolving this gives $u' = (n+k+2)/2$. The number of \"bad\" paths is $\\binom{n}{u'} = \\binom{n}{(n+k+2)/2}$.\n\nThe number of \"good\" paths, $|A \\cap B|$, is the total number of paths minus the number of \"bad\" paths:\n$$|A \\cap B| = \\binom{n}{(n+k)/2} - \\binom{n}{(n+k+2)/2}$$\n\nNext, we calculate $|B|$, the total number of paths of length $n$ that stay non-negative. This is the sum of the number of non-negative paths to all possible final positions $k$.\n$$|B| = \\sum_{k} |\\{\\text{path to } S_n=k \\text{ with } S_i \\ge 0\\}|$$\nThe summation is over all possible values of $k$ (non-negative, same parity as $n$).\n$$|B| = \\sum_{k} \\left( \\binom{n}{(n+k)/2} - \\binom{n}{(n+k+2)/2} \\right)$$\nLet $j = (n+k)/2$. As $k$ increases by 2, $j$ increases by 1. The sum becomes a telescoping series.\nLet's find the range for $j$. The smallest possible value of $k$ is $0$ (if $n$ is even) or $1$ (if $n$ is odd).\nIf $n$ is even, smallest $k=0$, so smallest $j=n/2$.\nIf $n$ is odd, smallest $k=1$, so smallest $j=(n+1)/2$.\nIn both cases, the smallest value of $j$ is $\\lceil n/2 \\rceil$.\nThe largest possible value of $k$ is $n$, so the largest value of $j$ is $(n+n)/2 = n$.\n\nThe sum is:\n$$|B| = \\left(\\binom{n}{\\lceil n/2 \\rceil} - \\binom{n}{\\lceil n/2 \\rceil+1}\\right) + \\left(\\binom{n}{\\lceil n/2 \\rceil+1} - \\binom{n}{\\lceil n/2 \\rceil+2}\\right) + \\dots + \\left(\\binom{n}{n} - \\binom{n}{n+1}\\right)$$\nThis telescopes to:\n$$|B| = \\binom{n}{\\lceil n/2 \\rceil} - \\binom{n}{n+1}$$\nSince $\\binom{n}{n+1} = 0$, we have:\n$$|B| = \\binom{n}{\\lceil n/2 \\rceil}$$\nNote that $\\binom{n}{\\lceil n/2 \\rceil} = \\binom{n}{\\lfloor n/2 \\rfloor}$ because $\\lceil n/2 \\rceil + \\lfloor n/2 \\rfloor = n$. So we can write $|B| = \\binom{n}{\\lfloor n/2 \\rfloor}$.\n\nFinally, we compute the conditional probability:\n$$P(A|B) = \\frac{|A \\cap B|}{|B|} = \\frac{\\binom{n}{(n+k)/2} - \\binom{n}{(n+k+2)/2}}{\\binom{n}{\\lfloor n/2 \\rfloor}}$$\n\nThis matches option D.", "answer": "$$\\boxed{D}$$", "id": "1405580"}]}
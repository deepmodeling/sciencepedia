{"hands_on_practices": [{"introduction": "The best way to develop an intuition for a new number-theoretic function is to get your hands dirty and compute some values. This first exercise invites you to calculate the sum of divisors function, $\\sigma(n)$, for a set of small integers using only its fundamental definition. By working through these examples, you will not only practice the basics but also have the opportunity to discover for yourself a crucial property of the $\\sigma(n)$ function, which forms the basis for more advanced analysis [@problem_id:3093508].", "problem": "Let $\\sigma(n)$ denote the sum of all positive divisors of the positive integer $n$. Using only the definition of $\\sigma(n)$, the Unique Factorization Theorem (UFT), and basic consequences you can justify from these (such as properties of divisors under multiplication when the greatest common divisor (gcd) is $1$), compute $\\sigma(n)$ explicitly for $n \\in \\{\\,1,2,3,4,5,6,8,10,12\\,\\}$. As part of your reasoning, you may use the finite geometric-series identity, provided you justify where it arises in this context. Briefly identify at least one general pattern you observe from your computations and explain why it holds based on your derivation rather than by appeal to any pre-stated formula for $\\sigma(n)$. \n\nReport your final numerical results in the given order as a single row vector $(\\sigma(1),\\sigma(2),\\sigma(3),\\sigma(4),\\sigma(5),\\sigma(6),\\sigma(8),\\sigma(10),\\sigma(12))$. No rounding is required.", "solution": "The problem is valid as it is a well-posed mathematical question within the domain of number theory, based on established definitions and theorems, and is free of any scientific or logical flaws.\n\nLet $\\sigma(n)$ be the function that represents the sum of all positive divisors of a positive integer $n$. Formally, $\\sigma(n) = \\sum_{d|n, d0} d$. We are asked to compute $\\sigma(n)$ for $n \\in \\{\\,1, 2, 3, 4, 5, 6, 8, 10, 12\\,\\}$ using this definition and the Unique Factorization Theorem (UFT).\n\nThe UFT states that every integer greater than $1$ either is a prime number itself or can be represented as a product of prime numbers, and that, moreover, this representation is unique, up to the order of the factors. A consequence is that any divisor of an integer $n = p_1^{k_1} p_2^{k_2} \\cdots p_r^{k_r}$ must be of the form $d = p_1^{a_1} p_2^{a_2} \\cdots p_r^{a_r}$ where $0 \\le a_i \\le k_i$ for all $i \\in \\{1, 2, \\dots, r\\}$.\n\nWe proceed with the computations.\n\nFor $n=1$:\nThe only positive divisor of $1$ is $1$.\n$\\sigma(1) = 1$.\n\nFor prime numbers $n \\in \\{\\,2, 3, 5\\,\\}$:\nThe divisors of a prime number $p$ are $1$ and $p$.\n- For $n=2$: The divisors are $1$ and $2$. $\\sigma(2) = 1 + 2 = 3$.\n- For $n=3$: The divisors are $1$ and $3$. $\\sigma(3) = 1 + 3 = 4$.\n- For $n=5$: The divisors are $1$ and $5$. $\\sigma(5) = 1 + 5 = 6$.\n\nFor prime powers $n \\in \\{\\,4, 8\\,\\}$:\n- For $n=4=2^2$: According to the UFT, the divisors of $2^2$ are integers of the form $2^a$ where $0 \\le a \\le 2$. These are $2^0=1$, $2^1=2$, and $2^2=4$.\nThe sum is $\\sigma(4) = 1 + 2 + 4 = 7$.\n- For $n=8=2^3$: The divisors of $2^3$ are integers of the form $2^a$ where $0 \\le a \\le 3$. These are $2^0=1$, $2^1=2$, $2^2=4$, and $2^3=8$.\nThe sum is $\\sigma(8) = 1 + 2 + 4 + 8 = 15$.\nThe sum of divisors for a prime power $p^k$ is a finite geometric series: $\\sigma(p^k) = \\sum_{j=0}^{k} p^j$. The identity for this sum is $\\frac{p^{k+1}-1}{p-1}$. For example, $\\sigma(2^3) = \\frac{2^{3+1}-1}{2-1} = \\frac{16-1}{1} = 15$.\n\nFor composite numbers with distinct prime factors $n \\in \\{\\,6, 10, 12\\,\\}$:\nWe first establish a general property for $\\sigma(n)$ when $n$ is a product of two coprime integers. Let $n=ab$ where $\\gcd(a,b)=1$. By the UFT, $a$ and $b$ share no prime factors. Any divisor $d$ of $n$ must have a prime factorization composed of primes dividing $a$ and/or $b$. Since the prime sets are disjoint, any divisor $d$ of $n=ab$ can be uniquely written as a product $d_1 d_2$, where $d_1$ is a divisor of $a$ and $d_2$ is a divisor of $b$. Conversely, any such product $d_1 d_2$ is a divisor of $n$. This establishes a one-to-one correspondence between the divisors of $n$ and pairs of divisors $(d_1, d_2)$ of $a$ and $b$.\nThus, the sum of divisors of $n$ is:\n$$ \\sigma(n) = \\sigma(ab) = \\sum_{d_1|a, d_2|b} d_1 d_2 $$\nThis double summation can be factored as a product of two independent sums:\n$$ \\sigma(ab) = \\left( \\sum_{d_1|a} d_1 \\right) \\left( \\sum_{d_2|b} d_2 \\right) = \\sigma(a) \\sigma(b) $$\nThis property, where $\\sigma(ab) = \\sigma(a)\\sigma(b)$ for $\\gcd(a,b)=1$, is known as multiplicativity. We now apply this derived property.\n\n- For $n=6=2 \\cdot 3$: Since $\\gcd(2,3)=1$, we can use the multiplicative property.\n$\\sigma(6) = \\sigma(2) \\sigma(3) = (1+2)(1+3) = 3 \\cdot 4 = 12$.\nAlternatively, listing divisors: $\\{1, 2, 3, 6\\}$. Sum: $1+2+3+6 = 12$.\n\n- For $n=10=2 \\cdot 5$: Since $\\gcd(2,5)=1$, we have:\n$\\sigma(10) = \\sigma(2) \\sigma(5) = (1+2)(1+5) = 3 \\cdot 6 = 18$.\nAlternatively, listing divisors: $\\{1, 2, 5, 10\\}$. Sum: $1+2+5+10 = 18$.\n\n- For $n=12=4 \\cdot 3=2^2 \\cdot 3$: Since $\\gcd(4,3)=1$, we have:\n$\\sigma(12) = \\sigma(4) \\sigma(3) = \\sigma(2^2) \\sigma(3)$.\nFrom our earlier calculations, $\\sigma(4)=7$ and $\\sigma(3)=4$.\n$\\sigma(12) = 7 \\cdot 4 = 28$.\nAlternatively, listing divisors: $\\{1, 2, 3, 4, 6, 12\\}$. Sum: $1+2+3+4+6+12 = 28$.\n\nSummary of results:\n$\\sigma(1) = 1$\n$\\sigma(2) = 3$\n$\\sigma(3) = 4$\n$\\sigma(4) = 7$\n$\\sigma(5) = 6$\n$\\sigma(6) = 12$\n$\\sigma(8) = 15$\n$\\sigma(10) = 18$\n$\\sigma(12) = 28$\n\nA general pattern observed from these computations is the multiplicativity of the $\\sigma$ function. That is, for any two positive integers $m$ and $n$ with $\\gcd(m,n)=1$, it holds that $\\sigma(mn) = \\sigma(m)\\sigma(n)$. This was demonstrated in the computations for $\\sigma(6)$, $\\sigma(10)$, and $\\sigma(12)$. The reason this property holds, as derived above, is a direct consequence of the Unique Factorization Theorem. The theorem guarantees that if $m$ and $n$ share no prime factors, then the set of divisors of $mn$ is precisely the set of all possible products of a divisor of $m$ and a divisor of $n$. When we sum these products, the sum factors into the product of the individual sums of divisors, leading to $\\sigma(mn) = \\sigma(m)\\sigma(n)$.\n\nThe final results are presented as a row vector in the requested order.\n$$ (\\sigma(1), \\sigma(2), \\sigma(3), \\sigma(4), \\sigma(5), \\sigma(6), \\sigma(8), \\sigma(10), \\sigma(12)) = (1, 3, 4, 7, 6, 12, 15, 18, 28) $$", "answer": "$$ \\boxed{\\begin{pmatrix} 1  3  4  7  6  12  15  18  28 \\end{pmatrix}} $$", "id": "3093508"}, {"introduction": "Having built some intuition, we now move from observation to formalization. This practice challenges you to derive the general formula for $\\sigma(n)$ based on a number's prime factorization, a technique central to analytic number theory. You will then apply this powerful formula to compute $\\sigma(360)$ and verify the result by the laborious, but confidence-building, method of direct summation, solidifying your understanding of why the formula works and how efficient it is [@problem_id:3093515].", "problem": "Let $n \\in \\mathbb{N}$ and define the sum of divisors function $\\sigma(n)$ to be the sum of all positive divisors of $n$. Starting only from this definition and basic properties of divisors, do the following:\n\n- Establish that if $\\gcd(m,n)=1$ then $\\sigma(mn)=\\sigma(m)\\sigma(n)$ by reasoning directly from the way divisors of $mn$ arise from divisors of $m$ and divisors of $n$.\n- For a prime $p$ and exponent $a \\in \\mathbb{Z}_{\\ge 0}$, derive $\\sigma(p^{a})$ from the definition by enumerating the divisors of $p^{a}$ and evaluating the resulting finite geometric series using standard summation facts.\n- Factor $360$ into prime powers, use your results to compute $\\sigma(360)$, and then verify your computation by directly listing all positive divisors of $360$ and summing them without invoking multiplicativity or any closed-form beyond straightforward addition.\n\nExpress your final answer as an exact integer. No rounding is required.", "solution": "We begin from the definition: for $n \\in \\mathbb{N}$, the sum of divisors function $\\sigma(n)$ is the sum of all positive divisors of $n$.\n\nFirst, we establish multiplicativity for coprime arguments. Suppose $\\gcd(m,n)=1$. Every positive divisor of $mn$ can be written uniquely as $d=ab$ where $a \\mid m$ and $b \\mid n$, because the prime factors of $m$ and $n$ are disjoint. Therefore,\n$$\n\\sigma(mn)\n=\\sum_{d \\mid mn} d\n=\\sum_{a \\mid m} \\sum_{b \\mid n} ab\n=\\left(\\sum_{a \\mid m} a\\right)\\left(\\sum_{b \\mid n} b\\right)\n=\\sigma(m)\\sigma(n).\n$$\nThus, $\\sigma$ is multiplicative on coprime arguments.\n\nSecond, we compute $\\sigma(p^{a})$ for a prime $p$ and integer $a \\ge 0$. The positive divisors of $p^{a}$ are precisely $p^{0},p^{1},\\dots,p^{a}$. Hence\n$$\n\\sigma(p^{a})=\\sum_{j=0}^{a} p^{j}.\n$$\nThis is a finite geometric series with ratio $p$, so by the standard geometric sum identity,\n$$\n\\sigma(p^{a})=\\frac{p^{a+1}-1}{p-1}.\n$$\n\nNow we factor $360$ into prime powers. We have\n$$\n360=36 \\cdot 10= (2^{2}\\cdot 3^{2}) \\cdot (2 \\cdot 5)=2^{3}\\cdot 3^{2}\\cdot 5^{1}.\n$$\nBy multiplicativity over coprime factors and the prime power formula just derived,\n$$\n\\sigma(360)=\\sigma(2^{3})\\sigma(3^{2})\\sigma(5^{1})\n=\\left(\\sum_{j=0}^{3}2^{j}\\right)\\left(\\sum_{j=0}^{2}3^{j}\\right)\\left(\\sum_{j=0}^{1}5^{j}\\right)\n=\\left(1+2+4+8\\right)\\left(1+3+9\\right)\\left(1+5\\right).\n$$\nCompute each sum:\n$$\n1+2+4+8=15, \\quad 1+3+9=13, \\quad 1+5=6.\n$$\nTherefore,\n$$\n\\sigma(360)=15 \\cdot 13 \\cdot 6=195 \\cdot 6=1170.\n$$\n\nFinally, we verify this result by direct divisor summation, listing all positive divisors of $360$ and summing them without invoking multiplicativity. Since $360=2^{3}\\cdot 3^{2}\\cdot 5^{1}$, every positive divisor has the form $2^{a}3^{b}5^{c}$ with $a \\in \\{0,1,2,3\\}$, $b \\in \\{0,1,2\\}$, and $c \\in \\{0,1\\}$. Enumerating:\n\n- For $c=0$ and $b=0$: $1,2,4,8$ with sum $1+2+4+8=15$.\n- For $c=0$ and $b=1$: $3,6,12,24$ with sum $3+6+12+24=45$.\n- For $c=0$ and $b=2$: $9,18,36,72$ with sum $9+18+36+72=135$.\n- For $c=1$ and $b=0$: $5,10,20,40$ with sum $5+10+20+40=75$.\n- For $c=1$ and $b=1$: $15,30,60,120$ with sum $15+30+60+120=225$.\n- For $c=1$ and $b=2$: $45,90,180,360$ with sum $45+90+180+360=675$.\n\nAdding these partial sums,\n$$\n15+45+135+75+225+675=(15+45+135)+(75+225+675)=195+975=1170.\n$$\nThis matches the multiplicative computation, confirming that\n$$\n\\sigma(360)=1170.\n$$", "answer": "$$\\boxed{1170}$$", "id": "3093515"}, {"introduction": "This final practice bridges the gap between theoretical calculation and modern computational number theory. Instead of computing a single value, you will investigate the global behavior of the ratio $\\sigma(n)/n$, which is central to the study of abundant, deficient, and perfect numbers. By writing a program to find the number that maximizes this ratio within a given bound, you will see how the formula for $\\sigma(n)$ enables efficient exploration of complex numerical landscapes and reveals fascinating patterns, such as the emergence of near-primorials as champions [@problem_id:3093519].", "problem": "You are to write a complete program that empirically investigates the extremal behavior of the sum of divisors function. Let $\\sigma(n)$ denote the sum of the positive divisors of a positive integer $n$. The objective is to compute, for several upper bounds $B$, the integer $n$ with $1 \\le n \\le B$ that maximizes the ratio $\\sigma(n)/n$, and to analyze the structure of this maximizer. Your work must be built from first principles: use only the Fundamental Theorem of Arithmetic, the definition of divisors, and the standard geometric-series identity, and derive any intermediate steps you need from these bases. Do not assume or quote special-purpose formulas beyond those foundations.\n\nDefinitions and requirements:\n- The function $\\sigma(n)$ is defined by $\\sigma(n) = \\sum_{d \\mid n} d$, where the sum runs over all positive divisors $d$ of $n$.\n- A prime factorization exists and is unique by the Fundamental Theorem of Arithmetic: every $n \\ge 2$ has a unique decomposition $n = \\prod_{i=1}^{k} p_i^{a_i}$ with $p_1  p_2  \\cdots  p_k$ primes and $a_i \\in \\mathbb{N}$.\n- A primorial is defined as $p_k\\# = \\prod_{i=1}^{k} p_i$ for $k \\ge 1$, where $p_i$ denotes the $i$-th prime.\n- For this problem, say that an integer $n \\ge 2$ is near-primorial if its prime divisor set is exactly $\\{p_1, p_2, \\dots, p_k\\}$ for some $k \\ge 1$ (i.e., it contains every prime up to $p_k$ and no larger primes) and if its exponents are nonincreasing with respect to increasing primes, that is, writing $n = \\prod_{i=1}^{k} p_i^{a_i}$, one has $a_1 \\ge a_2 \\ge \\cdots \\ge a_k \\ge 1$. By convention in this task, $n=1$ is neither primorial nor near-primorial.\n\nTasks:\n- Starting from the definition of $\\sigma(n)$ and the Fundamental Theorem of Arithmetic, derive a computable expression for $\\sigma(n)$ in terms of the prime-power decomposition of $n$. Your derivation must rely only on the facts that (i) the divisors of a prime power are of the form $p^j$ and (ii) the finite geometric series identity. Use the logically necessary step that the sum of divisors is multiplicative over relatively prime inputs, justifying this property from the structure of divisors when $\\gcd(m,n)=1$ (where $\\gcd$ denotes the Greatest Common Divisor (GCD)).\n- Design an algorithm that, for a given bound $B$, computes $\\sigma(n)$ for all $1 \\le n \\le B$ efficiently by factoring each $n$ and applying your derived expression. For comparing ratios $\\sigma(n)/n$ across different $n$ without floating-point ambiguity, compare exact integers via cross-multiplication and use a smallest-$n$ tiebreak when equal ratios occur.\n- For each bound $B$ in the test suite below, determine the smallest $n^\\ast \\in [1,B]$ that maximizes $\\sigma(n)/n$, compute the value of $\\sigma(n^\\ast)/n^\\ast$, and classify whether $n^\\ast$ is primorial and whether it is near-primorial (under the definition above).\n\nTest suite:\n- Use the bounds $B \\in \\{\\,1,\\,10,\\,100,\\,1000,\\,10^4\\,\\}$.\n\nOutput specification:\n- For each bound $B$ in the order listed above, produce an item of the form $[B, n^\\ast, r, \\text{is\\_primorial}, \\text{is\\_near\\_primorial}]$ where:\n  - $B$ and $n^\\ast$ are integers.\n  - $r$ is the real number $\\sigma(n^\\ast)/n^\\ast$, rounded to exactly twelve decimal places in computation but printed as a standard floating-point literal (it may omit trailing zeros).\n  - $\\text{is\\_primorial}$ and $\\text{is\\_near\\_primorial}$ are Boolean values indicating the classifications defined above.\n- Final output format: Your program should produce a single line of output containing the results as a comma-separated list of these per-bound items, enclosed in square brackets. Concretely, the program must print a single line like $[[\\cdots],[\\cdots],[\\cdots],[\\cdots],[\\cdots]]$ corresponding to $B \\in \\{\\,1,\\,10,\\,100,\\,1000,\\,10^4\\,\\}$ in that order.\n\nNumerical units:\n- This is a purely mathematical task; no physical units or angle units are involved.\n\nBoundary and edge cases to consider:\n- The case $B=1$ is a boundary where only $n=1$ is admissible; ensure that the primorial and near-primorial indicators follow the conventions above.\n- Consider the possibility of ties in $\\sigma(n)/n$; break ties by choosing the smallest $n$.\n- Ensure the factorization-based computation and multiplicativity remain correct for prime powers and general composite numbers by construction from first principles.", "solution": "The problem requires finding the integer $n^*$, in a given range $1 \\le n \\le B$, that maximizes the ratio of the sum of its divisors, $\\sigma(n)$, to itself. This requires a multi-step process: first, the derivation of a computable formula for $\\sigma(n)$ from foundational principles; second, the design of an efficient and precise algorithm to identify the maximizer $n^*$; and third, the classification of $n^*$ according to specified number-theoretic properties.\n\n### 1. Derivation of the Expression for $\\sigma(n)$\n\nThe derivation begins with the definition $\\sigma(n) = \\sum_{d|n, d0} d$ and proceeds based on the Fundamental Theorem of Arithmetic, which guarantees a unique prime factorization for any integer $n \\ge 2$.\n\n#### 1.1. Case of a Prime Power\n\nLet $n$ be a power of a single prime, $n = p^a$ for some prime $p$ and integer $a \\ge 1$. The positive divisors of $p^a$ are precisely the powers of $p$ from $p^0$ to $p^a$.\n$$\n\\text{Divisors of } p^a = \\{1, p, p^2, \\ldots, p^a\\}\n$$\nThe sum of these divisors is therefore:\n$$\n\\sigma(p^a) = \\sum_{j=0}^{a} p^j = 1 + p + p^2 + \\cdots + p^a\n$$\nThis is a finite geometric series with first term $1$, ratio $p$, and $a+1$ terms. Using the standard identity for the sum of a finite geometric series, $\\sum_{j=0}^{m} r^j = \\frac{r^{m+1}-1}{r-1}$, we obtain:\n$$\n\\sigma(p^a) = \\frac{p^{a+1}-1}{p-1}\n$$\n\n#### 1.2. Multiplicativity of the $\\sigma$ Function\n\nNext, we establish that $\\sigma$ is a multiplicative function. A function $f$ on the positive integers is multiplicative if $f(mn) = f(m)f(n)$ whenever $\\gcd(m, n) = 1$.\n\nLet $m$ and $n$ be two coprime integers. By the Fundamental Theorem of Arithmetic, their prime factorizations are disjoint. Let $d$ be any divisor of the product $mn$. Any prime factor of $d$ must also be a prime factor of $mn$. Since the sets of prime factors of $m$ and $n$ are disjoint, $d$ can be uniquely written as a product $d = d_m d_n$, where $d_m$ is a divisor of $m$ and $d_n$ is a divisor of $n$. This establishes a bijection between the set of divisors of $mn$ and the Cartesian product of the sets of divisors of $m$ and $n$.\n\nThe sum of divisors of $mn$ can thus be expressed as:\n$$\n\\sigma(mn) = \\sum_{d | mn} d = \\sum_{d_m | m, d_n | n} d_m d_n\n$$\nThis double summation can be factored due to the distributive property of multiplication over addition:\n$$\n\\sigma(mn) = \\left( \\sum_{d_m | m} d_m \\right) \\left( \\sum_{d_n | n} d_n \\right) = \\sigma(m) \\sigma(n)\n$$\nThus, the function $\\sigma(n)$ is multiplicative.\n\n#### 1.3. General Formula for $\\sigma(n)$\n\nLet the prime factorization of an integer $n  1$ be $n = \\prod_{i=1}^{k} p_i^{a_i}$, where $p_i$ are distinct primes and $a_i \\ge 1$. The terms $p_i^{a_i}$ are pairwise coprime. By repeated application of the multiplicative property, we have:\n$$\n\\sigma(n) = \\sigma\\left(\\prod_{i=1}^{k} p_i^{a_i}\\right) = \\prod_{i=1}^{k} \\sigma(p_i^{a_i})\n$$\nSubstituting the formula for a prime power from Section 1.1 yields the general expression for $\\sigma(n)$:\n$$\n\\sigma(n) = \\prod_{i=1}^{k} \\frac{p_i^{a_i+1}-1}{p_i-1}\n$$\n\n### 2. Analysis and Maximization of the Ratio $\\sigma(n)/n$\n\nThe objective is to maximize the ratio $\\sigma(n)/n$. Using the derived formula for $\\sigma(n)$:\n$$\n\\frac{\\sigma(n)}{n} = \\frac{\\prod_{i=1}^{k} \\sigma(p_i^{a_i})}{\\prod_{i=1}^{k} p_i^{a_i}} = \\prod_{i=1}^{k} \\frac{\\sigma(p_i^{a_i})}{p_i^{a_i}}\n$$\nFor a single prime power $p^a$, the ratio is:\n$$\n\\frac{\\sigma(p^a)}{p^a} = \\frac{p^{a+1}-1}{p^a(p-1)} = \\frac{p - p^{-a}}{p-1} = \\frac{p}{p-1}\\left(1 - \\frac{1}{p^{a+1}}\\right)\n$$\nThe full ratio is therefore:\n$$\n\\frac{\\sigma(n)}{n} = \\prod_{i=1}^{k} \\frac{p_i}{p_i-1}\\left(1 - \\frac{1}{p_i^{a_i+1}}\\right)\n$$\nTo maximize this product:\n1.  The term $\\frac{p}{p-1}$ is always greater than $1$ and decreases as $p$ increases. This indicates that maximizers should be constructed from the smallest possible primes ($2, 3, 5, \\dots$).\n2.  The term $\\left(1 - \\frac{1}{p^{a+1}}\\right)$ increases with the exponent $a$. This indicates that for a fixed set of prime factors, higher exponents lead to a larger ratio.\n\nThese properties suggest that numbers with a large $\\sigma(n)/n$ ratio, known as abundant numbers, are typically composed of many small prime factors with potentially high exponents. The maximizers for a given bound $B$ are a specific class of such numbers, known as superabundant numbers.\n\n### 3. Algorithmic Design\n\nFor a given upper bound $B$, the integer $n^*$ maximizing $\\sigma(n)/n$ over $n \\in [1, B]$ can be found through a systematic search.\n\n1.  **Iterative Search**: The algorithm iterates through each integer $n$ from $1$ to $B$. It maintains the current maximizer, $n_{max}$, and the corresponding maximum ratio, $(\\sigma/n)_{max}$.\n\n2.  **Prime Factorization**: For each $n$, its prime factorization, $n = \\prod p_i^{a_i}$, is determined. For the given bounds (up to $10^4$), this can be done efficiently by trial division against a pre-computed list of primes generated by a sieve (e.g., Sieve of Eratosthenes).\n\n3.  **Computation of $\\sigma(n)$**: Using the factorization, $\\sigma(n)$ is calculated with the formula derived in Section 1.3. All calculations should use arbitrary-precision integer arithmetic to avoid overflow and precision loss.\n\n4.  **Ratio Comparison**: To avoid floating-point inaccuracies, the comparison of the current ratio $\\sigma(n)/n$ with the stored maximum ratio $\\sigma(n_{max})/n_{max}$ is performed using integer cross-multiplication. The condition $\\frac{\\sigma(n)}{n}  \\frac{\\sigma(n_{max})}{n_{max}}$ is equivalent to $\\sigma(n) \\cdot n_{max}  \\sigma(n_{max}) \\cdot n$.\n\n5.  **Tie-Breaking**: The problem requires that in case of a tie in the ratio, the smaller $n$ is chosen. By iterating $n$ in ascending order, the first time a maximum ratio is encountered, it is associated with the smallest possible $n$. Any subsequent $n'$ with the same ratio will be larger, so no update is necessary, adhering to the tie-breaking rule.\n\n6.  **Classification of $n^*$**: Once the loop completes and $n^*$ is found, it is classified:\n    *   **Primorial**: An integer $n$ is a primorial if it is the product of the first $k$ primes, $n = p_k\\#$, for some $k \\ge 1$. This is checked by generating primorials $p_1\\#, p_2\\#, \\dots$ until they equal or exceed $n^*$.\n    *   **Near-Primorial**: An integer $n \\ge 2$ is near-primorial if its prime factors are exactly the first $k$ primes, $\\{p_1, \\dots, p_k\\}$, and the corresponding exponents $a_1, \\dots, a_k$ are non-increasing ($a_1 \\ge a_2 \\ge \\dots \\ge a_k \\ge 1$). This is verified by inspecting the computed prime factorization of $n^*$.\n\n### 4. Implementation\n\nThe implemented program follows the described algorithm. It first pre-computes primes up to the maximum bound $B_{max} = 10^4$. It then iterates from $n=1$ to $B_{max}$, calculating $\\sigma(n)$ from its factorization and updating the maximal ratio and corresponding $n^*$ as it goes. At each specified bound $B$ from the test suite, the current champion $n^*$ and its properties are recorded. The final results are assembled into a list of lists and printed in the specified format.", "answer": "[[1, 1, 1.0, False, False],[10, 6, 2.0, True, True],[100, 60, 2.8, False, True],[1000, 840, 3.428571428571, False, True],[10000, 5040, 3.838095238095, False, True]]", "id": "3093519"}]}
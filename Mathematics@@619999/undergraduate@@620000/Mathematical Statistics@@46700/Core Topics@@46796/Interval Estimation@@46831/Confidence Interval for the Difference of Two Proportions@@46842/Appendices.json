{"hands_on_practices": [{"introduction": "The first step in mastering statistical comparison is learning how to compute and interpret the fundamental tool itself. This exercise provides a classic scenario comparing voter turnout in two counties, allowing you to practice the core calculation of a confidence interval for the difference between two population proportions. By working through this problem [@problem_id:1907971], you will solidify your understanding of how to use sample data to estimate a range of plausible values for the true difference between two groups.", "problem": "A political science researcher is investigating voter participation in two neighboring counties, County A and County B. To estimate the difference in voter turnout rates during the most recent election, the researcher draws random samples of registered voters from the official records of each county.\n\nFrom a random sample of $n_A = 650$ registered voters in County A, the researcher finds that $x_A = 429$ individuals voted.\nFrom a random sample of $n_B = 580$ registered voters in County B, the researcher finds that $x_B = 348$ individuals voted.\n\nThe researcher aims to estimate the true difference in the proportions of voter turnout, $p_A - p_B$, where $p_A$ is the true proportion of registered voters who voted in County A and $p_B$ is the true proportion for County B.\n\nConstruct a 95% confidence interval for the difference $p_A - p_B$. Present your final answer as an interval with a lower bound and an upper bound. Round both bounds of the confidence interval to four significant figures.", "solution": "We denote the true turnout proportions by $p_{A}$ and $p_{B}$ and their sample estimates by $\\hat{p}_{A}$ and $\\hat{p}_{B}$. From the samples,\n$$\n\\hat{p}_{A}=\\frac{x_{A}}{n_{A}}=\\frac{429}{650}=\\frac{33}{50}=0.66,\\quad \\hat{p}_{B}=\\frac{x_{B}}{n_{B}}=\\frac{348}{580}=\\frac{87}{145}=\\frac{3}{5}=0.6,\n$$\nso the point estimate for the difference is\n$$\n\\hat{p}_{A}-\\hat{p}_{B}=0.66-0.6=0.06.\n$$\nFor large independent samples, a $(1-\\alpha)$ confidence interval for $p_{A}-p_{B}$ is given by\n$$\n(\\hat{p}_{A}-\\hat{p}_{B}) \\pm z_{1-\\alpha/2}\\sqrt{\\frac{\\hat{p}_{A}(1-\\hat{p}_{A})}{n_{A}}+\\frac{\\hat{p}_{B}(1-\\hat{p}_{B})}{n_{B}}}.\n$$\nWith $\\alpha=0.05$, $z_{1-\\alpha/2}=z_{0.975}\\approx 1.96$. Compute the standard error terms exactly:\n$$\n\\hat{p}_{A}(1-\\hat{p}_{A})=\\frac{33}{50}\\cdot\\frac{17}{50}=\\frac{561}{2500},\\quad \\frac{\\hat{p}_{A}(1-\\hat{p}_{A})}{n_{A}}=\\frac{561}{2500\\cdot 650}=\\frac{561}{1,625,000},\n$$\n$$\n\\hat{p}_{B}(1-\\hat{p}_{B})=\\frac{3}{5}\\cdot\\frac{2}{5}=\\frac{6}{25},\\quad \\frac{\\hat{p}_{B}(1-\\hat{p}_{B})}{n_{B}}=\\frac{6}{25\\cdot 580}=\\frac{3}{7250}.\n$$\nThus the variance estimate is\n$$\n\\frac{561}{1,625,000}+\\frac{3}{7250}=\\frac{35,769}{47,125,000},\n$$\nso the standard error is\n$$\n\\mathrm{SE}=\\sqrt{\\frac{35,769}{47,125,000}}\\approx 0.0275504.\n$$\nThe margin of error is\n$$\n\\mathrm{ME}=1.96\\times \\mathrm{SE}\\approx 1.96\\times 0.0275504\\approx 0.0539988.\n$$\nTherefore, the $95\\%$ confidence interval for $p_{A}-p_{B}$ is\n$$\n0.06\\pm 0.0539988 \\;\\Rightarrow\\; \\left(0.06-0.0539988,\\;0.06+0.0539988\\right)\\approx \\left(0.0060012,\\;0.1139988\\right).\n$$\nRounding both bounds to four significant figures gives\n$$\n\\left(0.006001,\\;0.1140\\right).\n$$", "answer": "$$\\boxed{\\begin{pmatrix}0.006001 & 0.1140\\end{pmatrix}}$$", "id": "1907971"}, {"introduction": "Beyond analyzing existing data, a crucial skill for any researcher is planning an effective study. This practice shifts our focus from analysis to design, asking the question: \"How large a sample do we need?\" By determining the minimum sample size required to achieve a specific margin of error [@problem_id:1907997], you learn how to ensure your experiment has enough statistical power and precision before you even begin collecting data.", "problem": "A software development company is conducting an A/B test to compare the user engagement of two new User Interface (UI) designs for their mobile application's main call-to-action button. Let $p_1$ be the true proportion of users who click the button with Design A, and $p_2$ be the true proportion of users who click the button with Design B. The company wishes to estimate the difference in these proportions, $p_1 - p_2$. They plan to use two independent and equally sized random samples of users for the test.\n\nWhat is the minimum integer sample size, $n$, required for each UI design group to estimate the difference $p_1 - p_2$ with a margin of error of at most 0.03, at a 98% confidence level? Since this is a preliminary study, you should make the most conservative assumption about the unknown proportions $p_1$ and $p_2$.", "solution": "We want a two-sided confidence interval for the difference of two independent proportions with equal sample sizes per group. Let $\\hat{p}_{1}$ and $\\hat{p}_{2}$ be the sample proportions from samples of size $n$ each. The standard Wald $(1-\\alpha)$ confidence interval for $p_{1}-p_{2}$ is\n$$\n(\\hat{p}_{1}-\\hat{p}_{2}) \\pm z_{1-\\alpha/2}\\,\\sqrt{\\frac{\\hat{p}_{1}(1-\\hat{p}_{1})}{n}+\\frac{\\hat{p}_{2}(1-\\hat{p}_{2})}{n}}.\n$$\nThe margin of error is therefore\n$$\n\\text{ME}=z_{1-\\alpha/2}\\,\\sqrt{\\frac{\\hat{p}_{1}(1-\\hat{p}_{1})}{n}+\\frac{\\hat{p}_{2}(1-\\hat{p}_{2})}{n}}.\n$$\nFor a preliminary and conservative design, we maximize the variance terms by taking $\\hat{p}_{1}=\\hat{p}_{2}=\\frac{1}{2}$, since $p(1-p)$ is maximized at $p=\\frac{1}{2}$ with value $\\frac{1}{4}$. Thus\n$$\n\\text{SE}_{\\max}=\\sqrt{\\frac{\\frac{1}{4}}{n}+\\frac{\\frac{1}{4}}{n}}=\\sqrt{\\frac{1}{2n}}.\n$$\nImposing the desired margin of error requirement $\\text{ME}\\leq 0.03$ at confidence level $0.98$ (so $\\alpha=0.02$ and $z_{1-\\alpha/2}=z_{0.99}$) gives\n$$\nz_{0.99}\\,\\sqrt{\\frac{1}{2n}} \\leq 0.03.\n$$\nSolving for $n$,\n$$\n\\sqrt{\\frac{1}{2n}} \\leq \\frac{0.03}{z_{0.99}}\n\\quad\\Longrightarrow\\quad\n\\frac{1}{2n} \\leq \\left(\\frac{0.03}{z_{0.99}}\\right)^{2}\n\\quad\\Longrightarrow\\quad\nn \\geq \\frac{z_{0.99}^{2}}{2\\cdot 0.03^{2}}.\n$$\nWith $z_{0.99}\\approx 2.3263$, we obtain\n$$\nn \\geq \\frac{(2.3263)^{2}}{2\\cdot (0.03)^{2}}\n= \\frac{5.411671}{0.0018}\n\\approx 3006.48.\n$$\nTherefore, the minimum integer sample size per group is\n$$\nn=\\lceil 3006.48\\rceil=3007.\n$$", "answer": "$$\\boxed{3007}$$", "id": "1907997"}, {"introduction": "Effective experimental design is often about optimizing limited resources. Building upon the concept of sample size, this problem explores the optimal allocation of a fixed total sample across two groups to achieve the most precise estimate possible. Solving this problem [@problem_id:1907982] will give you insight into how the underlying variability of the proportions, $\\tilde{p}_A$ and $\\tilde{p}_B$, influences the efficiency of your study design, leading to a more powerful and cost-effective A/B test.", "problem": "A team of data scientists is comparing the performance of two proprietary Machine Learning (ML) classification algorithms, which we will call Algorithm A and Algorithm B. The goal is to estimate the difference between their true accuracy rates, $p_A - p_B$, where $p_A$ and $p_B$ represent the true probabilities that Algorithm A and Algorithm B, respectively, correctly classify a randomly chosen data point from a specific population.\n\nThe team has a fixed budget that allows for a total of $N$ data points to be used for testing. These $N$ points must be partitioned into two disjoint sets: one of size $n_A$ for testing Algorithm A, and another of size $n_B$ for testing Algorithm B, such that $n_A + n_B = N$. The team's objective is to choose the allocation of sample sizes, $n_A$ and $n_B$, in a way that minimizes the width of the large-sample confidence interval for the difference $p_A - p_B$.\n\nFor planning purposes, the team relies on prior pilot studies that provide estimates for the accuracy rates: $\\tilde{p}_A$ for Algorithm A and $\\tilde{p}_B$ for Algorithm B. The width of a standard large-sample $100(1-\\alpha)\\%$ confidence interval for $p_A - p_B$ is given by $W = 2z_{\\alpha/2}\\sqrt{\\frac{p_A(1-p_A)}{n_A} + \\frac{p_B(1-p_B)}{n_B}}$. For the purpose of experimental design, the unknown true proportions $p_A$ and $p_B$ in this formula are replaced by their prior estimates $\\tilde{p}_A$ and $\\tilde{p}_B$.\n\nAssuming that $N$ is large enough so that the optimal choices for $n_A$ and $n_B$ are non-zero, determine the optimal allocation ratio $\\frac{n_A}{n_B}$ that minimizes the expected width of the confidence interval. Express your answer as a symbolic expression in terms of $\\tilde{p}_A$ and $\\tilde{p}_B$.", "solution": "The goal is to find the allocation of sample sizes $n_A$ and $n_B$ that minimizes the width of the confidence interval for the difference of two proportions, $p_A - p_B$, subject to the constraint $n_A + n_B = N$.\n\nThe width of the confidence interval, $W$, is given. For planning purposes, we use the prior estimates $\\tilde{p}_A$ and $\\tilde{p}_B$ in place of the true proportions $p_A$ and $p_B$. The expression for the width becomes:\n$$ W(n_A, n_B) = 2z_{\\alpha/2}\\sqrt{\\frac{\\tilde{p}_A(1-\\tilde{p}_A)}{n_A} + \\frac{\\tilde{p}_B(1-\\tilde{p}_B)}{n_B}} $$\nMinimizing $W$ is equivalent to minimizing its square, $W^2$, as the width is always non-negative. It is also equivalent to minimizing the term under the square root, as $z_{\\alpha/2}$ is a positive constant. Let's define the function to be minimized as:\n$$ f(n_A, n_B) = \\frac{\\tilde{p}_A(1-\\tilde{p}_A)}{n_A} + \\frac{\\tilde{p}_B(1-\\tilde{p}_B)}{n_B} $$\nFor notational simplicity, let's denote the variance estimates as $\\sigma_A^2 = \\tilde{p}_A(1-\\tilde{p}_A)$ and $\\sigma_B^2 = \\tilde{p}_B(1-\\tilde{p}_B)$. The function to minimize is:\n$$ f(n_A, n_B) = \\frac{\\sigma_A^2}{n_A} + \\frac{\\sigma_B^2}{n_B} $$\nWe have the constraint $n_A + n_B = N$, which can be written as $n_B = N - n_A$. We can substitute this into the function $f$ to express it in terms of a single variable, $n_A$.\n$$ g(n_A) = f(n_A, N - n_A) = \\frac{\\sigma_A^2}{n_A} + \\frac{\\sigma_B^2}{N - n_A} $$\nTo find the value of $n_A$ that minimizes this function, we take the derivative of $g(n_A)$ with respect to $n_A$ and set it to zero.\n$$ \\frac{dg}{dn_A} = \\frac{d}{dn_A} \\left( \\frac{\\sigma_A^2}{n_A} + \\frac{\\sigma_B^2}{N - n_A} \\right) $$\n$$ \\frac{dg}{dn_A} = -\\frac{\\sigma_A^2}{n_A^2} - \\frac{\\sigma_B^2}{(N - n_A)^2} \\cdot (-1) = -\\frac{\\sigma_A^2}{n_A^2} + \\frac{\\sigma_B^2}{(N - n_A)^2} $$\nSetting the derivative to zero to find the critical point:\n$$ -\\frac{\\sigma_A^2}{n_A^2} + \\frac{\\sigma_B^2}{(N - n_A)^2} = 0 $$\n$$ \\frac{\\sigma_B^2}{(N - n_A)^2} = \\frac{\\sigma_A^2}{n_A^2} $$\nSince sample sizes and variances are positive, we can take the positive square root of both sides:\n$$ \\frac{\\sigma_B}{N - n_A} = \\frac{\\sigma_A}{n_A} $$\nNow, we solve for $n_A$ in terms of $N$, $\\sigma_A$, and $\\sigma_B$.\n$$ n_A \\sigma_B = (N - n_A) \\sigma_A $$\n$$ n_A \\sigma_B = N \\sigma_A - n_A \\sigma_A $$\n$$ n_A \\sigma_A + n_A \\sigma_B = N \\sigma_A $$\n$$ n_A (\\sigma_A + \\sigma_B) = N \\sigma_A $$\n$$ n_A = N \\frac{\\sigma_A}{\\sigma_A + \\sigma_B} $$\nTo check if this corresponds to a minimum, we can examine the second derivative of $g(n_A)$:\n$$ \\frac{d^2g}{dn_A^2} = \\frac{d}{dn_A} \\left( -\\sigma_A^2 n_A^{-2} + \\sigma_B^2 (N - n_A)^{-2} \\right) = 2\\sigma_A^2 n_A^{-3} + 2\\sigma_B^2 (N - n_A)^{-3} = \\frac{2\\sigma_A^2}{n_A^3} + \\frac{2\\sigma_B^2}{(N-n_A)^3} $$\nSince $n_A > 0$, $n_B = N - n_A > 0$, and the variance estimates $\\sigma_A^2, \\sigma_B^2$ are non-negative, the second derivative is always positive. This confirms that our critical point corresponds to a minimum.\n\nNow we find the corresponding optimal value for $n_B$:\n$$ n_B = N - n_A = N - N \\frac{\\sigma_A}{\\sigma_A + \\sigma_B} = N \\left( 1 - \\frac{\\sigma_A}{\\sigma_A + \\sigma_B} \\right) = N \\left( \\frac{\\sigma_A + \\sigma_B - \\sigma_A}{\\sigma_A + \\sigma_B} \\right) $$\n$$ n_B = N \\frac{\\sigma_B}{\\sigma_A + \\sigma_B} $$\nThe problem asks for the optimal ratio $\\frac{n_A}{n_B}$.\n$$ \\frac{n_A}{n_B} = \\frac{N \\frac{\\sigma_A}{\\sigma_A + \\sigma_B}}{N \\frac{\\sigma_B}{\\sigma_A + \\sigma_B}} = \\frac{\\sigma_A}{\\sigma_B} $$\nFinally, we substitute back the original expressions for $\\sigma_A$ and $\\sigma_B$:\n$$ \\frac{n_A}{n_B} = \\frac{\\sqrt{\\tilde{p}_A(1-\\tilde{p}_A)}}{\\sqrt{\\tilde{p}_B(1-\\tilde{p}_B)}} $$\nThis can be written as a single square root:\n$$ \\frac{n_A}{n_B} = \\sqrt{\\frac{\\tilde{p}_A(1-\\tilde{p}_A)}{\\tilde{p}_B(1-\\tilde{p}_B)}} $$\nThis result shows that to minimize the confidence interval width, the total sample size $N$ should be allocated in proportion to the standard deviations of the respective Bernoulli distributions.", "answer": "$$ \\boxed{\\sqrt{\\frac{\\tilde{p}_A(1-\\tilde{p}_A)}{\\tilde{p}_B(1-\\tilde{p}_B)}}} $$", "id": "1907982"}]}
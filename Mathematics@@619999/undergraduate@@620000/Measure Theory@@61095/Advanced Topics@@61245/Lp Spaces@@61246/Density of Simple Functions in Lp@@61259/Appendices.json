{"hands_on_practices": [{"introduction": "The density theorem tells us that simple functions can approximate any $L^p$ function, but how do we find the *best* approximation on a given partition? This first practice dives into this question in the context of the $L^1$ norm, which measures the average absolute error. You will discover that the optimal choice for the constant value on each piece of the partition is not the average value, but rather the median of the function on that interval [@problem_id:1414848].", "problem": "Consider the function $f(x) = \\sin(\\pi x)$ on the interval $[0, 1]$, which is equipped with the standard Lebesgue measure. The interval is partitioned into four subintervals of equal length: $I_1 = [0, 1/4]$, $I_2 = (1/4, 1/2]$, $I_3 = (1/2, 3/4]$, and $I_4 = (3/4, 1]$.\n\nWe are interested in approximating $f(x)$ with a simple function $\\phi(x)$ of the form\n$$ \\phi(x) = \\sum_{k=1}^{4} c_k \\chi_{I_k}(x) $$\nwhere each $c_k$ is a real constant and $\\chi_{I_k}(x)$ is the characteristic function for the interval $I_k$.\n\nThe quality of the approximation is measured by the $L^1$ norm of the difference, defined as $\\| g \\|_{L^1([0,1])} = \\int_0^1 |g(x)| dx$. The best approximation is the function $\\phi(x)$ that minimizes this error, i.e., it minimizes $\\|f - \\phi\\|_{L^1([0,1])}$.\n\nDetermine the unique ordered quadruple of real constants $(c_1, c_2, c_3, c_4)$ that defines this best simple function approximation. Provide your answer as an ordered quadruple of exact analytic expressions.", "solution": "We minimize the error in the form\n$$\\|f-\\phi\\|_{L^{1}([0,1])}=\\sum_{k=1}^{4}\\int_{I_{k}}|f(x)-c_{k}|\\,dx,$$\nso the optimal constants are obtained independently by minimizing, for each interval $I_{k}$,\n$$F_{k}(c)=\\int_{I_{k}}|f(x)-c|\\,dx.$$\nFor any integrable function on a set with Lebesgue measure, $F_{k}(c)$ is convex in $c$ and satisfies, for every $c$ not equal to $f(x)$ on a set of positive measure,\n$$\\frac{d}{dc}F_{k}(c)=\\int_{I_{k}}\\operatorname{sgn}(c-f(x))\\,dx=m\\{x\\in I_{k}:f(x)<c\\}-m\\{x\\in I_{k}:f(x)>c\\},$$\nwhere $m$ denotes Lebesgue measure. Hence any minimizer $c$ satisfies\n$$m\\{x\\in I_{k}:f(x)\\le c\\}\\ge \\tfrac{1}{2}m(I_{k})\\quad\\text{and}\\quad m\\{x\\in I_{k}:f(x)\\ge c\\}\\ge \\tfrac{1}{2}m(I_{k}),$$\nthat is, $c$ is a median of $f$ on $I_{k}$. If $f$ is strictly monotone and continuous on $I_{k}=[a,b]$, this median is unique and equals $f$ evaluated at the midpoint, because the set where $f(x)\\le c$ (or $\\ge c$) occupies exactly half the interval only when $x=(a+b)/2$.\n\nFor $f(x)=\\sin(\\pi x)$ on $[0,1]$, $f$ is strictly increasing on $[0,\\tfrac{1}{2}]$ and strictly decreasing on $[\\tfrac{1}{2},1]$. On each $I_{k}$, $f$ is strictly monotone and continuous. Therefore, the unique minimizer on $I_{k}$ is\n$$c_{k}=f\\!\\left(\\frac{a_{k}+b_{k}}{2}\\right),$$\nwhere $I_{k}=[a_{k},b_{k}]$ (the open/closed endpoints are irrelevant to the integral). The midpoints are\n$$\\frac{0+\\tfrac{1}{4}}{2}=\\frac{1}{8},\\quad \\frac{\\tfrac{1}{4}+\\tfrac{1}{2}}{2}=\\frac{3}{8},\\quad \\frac{\\tfrac{1}{2}+\\tfrac{3}{4}}{2}=\\frac{5}{8},\\quad \\frac{\\tfrac{3}{4}+1}{2}=\\frac{7}{8}.$$\nThus\n$$c_{1}=\\sin\\!\\left(\\frac{\\pi}{8}\\right),\\quad c_{2}=\\sin\\!\\left(\\frac{3\\pi}{8}\\right),\\quad c_{3}=\\sin\\!\\left(\\frac{5\\pi}{8}\\right),\\quad c_{4}=\\sin\\!\\left(\\frac{7\\pi}{8}\\right).$$\nUsing $\\sin(\\pi-\\theta)=\\sin(\\theta)$ gives $c_{3}=\\sin\\!\\left(\\frac{3\\pi}{8}\\right)$ and $c_{4}=\\sin\\!\\left(\\frac{\\pi}{8}\\right)$. Employing half-angle identities,\n$$\\sin\\!\\left(\\frac{\\pi}{8}\\right)=\\frac{\\sqrt{2-\\sqrt{2}}}{2},\\qquad \\sin\\!\\left(\\frac{3\\pi}{8}\\right)=\\cos\\!\\left(\\frac{\\pi}{8}\\right)=\\frac{\\sqrt{2+\\sqrt{2}}}{2}.$$\nTherefore, the unique ordered quadruple is\n$$\\left(\\frac{\\sqrt{2-\\sqrt{2}}}{2},\\ \\frac{\\sqrt{2+\\sqrt{2}}}{2},\\ \\frac{\\sqrt{2+\\sqrt{2}}}{2},\\ \\frac{\\sqrt{2-\\sqrt{2}}}{2}\\right).$$\nUniqueness follows from the strict monotonicity of $f$ on each subinterval, which yields a unique median and hence a unique minimizer for each $c_{k}$.", "answer": "$$\\boxed{\\begin{pmatrix}\\frac{\\sqrt{2-\\sqrt{2}}}{2} & \\frac{\\sqrt{2+\\sqrt{2}}}{2} & \\frac{\\sqrt{2+\\sqrt{2}}}{2} & \\frac{\\sqrt{2-\\sqrt{2}}}{2}\\end{pmatrix}}$$", "id": "1414848"}, {"introduction": "There are several standard methods to construct a sequence of simple functions that converge to a given function. This exercise [@problem_id:1414869] asks you to build and compare two such approximations for the exponential function. By contrasting a method based on partitioning the function's domain with one based on partitioning its range, you will gain practical insight into the techniques used in the formal proofs of the density theorem.", "problem": "In measure theory, a key result is that any function in an $L^p$ space can be approximated by a sequence of simple functions. This problem explores the quantitative performance of two standard methods for constructing such simple function approximations for the function $f(x) = e^x$ on the interval $[0,1]$. The approximation error is measured using the $L^1$ norm, defined for a real-valued function $g$ on $[a,b]$ as $\\|g\\|_{L^1} = \\int_a^b |g(x)|dx$.\n\nLet $f(x) = e^x$ for $x \\in [0,1]$. We will construct two simple function approximations to $f$ using $n=2$ partitions.\n\n1.  **Domain Partitioning Simple Function, $s_2(x)$**: The domain $[0,1]$ is partitioned into two equal subintervals: $I_0 = [0, 1/2)$ and $I_1 = [1/2, 1]$. The simple function $s_2(x)$ is defined to be constant on each subinterval, taking the value of $f(x)$ at the left endpoint of that subinterval. That is, $s_2(x) = f(0)$ for $x \\in I_0$ and $s_2(x) = f(1/2)$ for $x \\in I_1$.\n\n2.  **Range Partitioning Simple Function, $\\phi_2(x)$**: The range of $f$ on $[0,1]$ is $[1, e]$. This range is partitioned into two equal subintervals. Let the partition points be $y_0 = 1$, $y_1 = 1 + (e-1)/2$, and $y_2=e$. This divides the domain $[0,1]$ into two sets based on the function's values: $E_0 = \\{x \\in [0,1] \\mid y_0 \\leq f(x) < y_1\\}$ and $E_1 = \\{x \\in [0,1] \\mid y_1 \\leq f(x) \\leq y_2\\}$. The simple function $\\phi_2(x)$ is defined as $\\phi_2(x) = y_0$ for $x \\in E_0$ and $\\phi_2(x) = y_1$ for $x \\in E_1$.\n\nLet $E_D = \\|f - s_2\\|_{L^1}$ be the approximation error for the domain partitioning method and $E_R = \\|f - \\phi_2\\|_{L^1}$ be the approximation error for the range partitioning method.\n\nCalculate the ratio $\\frac{E_D}{E_R}$. Your answer should be a single closed-form analytic expression.", "solution": "Let $f(x)=\\exp(x)$ on $[0,1]$. For the domain-partition simple function $s_{2}$, we have $s_{2}(x)=1$ on $[0,\\frac{1}{2})$ and $s_{2}(x)=\\exp\\!\\left(\\frac{1}{2}\\right)$ on $[\\frac{1}{2},1]$. Since $\\exp(x)$ is increasing on $[0,1]$, we can drop absolute values. Thus\n$$\nE_{D}=\\int_{0}^{\\frac{1}{2}}\\big(\\exp(x)-1\\big)\\,dx+\\int_{\\frac{1}{2}}^{1}\\big(\\exp(x)-\\exp\\!\\left(\\tfrac{1}{2}\\right)\\big)\\,dx.\n$$\nCompute each term:\n$$\n\\int_{0}^{\\frac{1}{2}}\\big(\\exp(x)-1\\big)\\,dx=\\big[\\exp(x)-x\\big]_{0}^{\\frac{1}{2}}=\\exp\\!\\left(\\tfrac{1}{2}\\right)-1-\\tfrac{1}{2}=\\exp\\!\\left(\\tfrac{1}{2}\\right)-\\tfrac{3}{2},\n$$\n$$\n\\int_{\\frac{1}{2}}^{1}\\big(\\exp(x)-\\exp\\!\\left(\\tfrac{1}{2}\\right)\\big)\\,dx=\\big[\\exp(x)\\big]_{\\frac{1}{2}}^{1}-\\exp\\!\\left(\\tfrac{1}{2}\\right)\\big(1-\\tfrac{1}{2}\\big)=\\exp(1)-\\tfrac{3}{2}\\exp\\!\\left(\\tfrac{1}{2}\\right).\n$$\nTherefore\n$$\nE_{D}=\\exp(1)-\\tfrac{1}{2}\\exp\\!\\left(\\tfrac{1}{2}\\right)-\\tfrac{3}{2}.\n$$\n\nFor the range-partition simple function $\\phi_{2}$, the range $[1,\\exp(1)]$ is split at $y_{1}=1+\\tfrac{\\exp(1)-1}{2}=\\tfrac{1+\\exp(1)}{2}$. Let $a=\\ln(y_{1})=\\ln\\!\\left(\\tfrac{1+\\exp(1)}{2}\\right)$. Then $\\phi_{2}(x)=1$ on $[0,a)$ and $\\phi_{2}(x)=y_{1}$ on $[a,1]$. Since $\\exp$ is increasing, the absolute values drop, and\n$$\nE_{R}=\\int_{0}^{a}\\big(\\exp(x)-1\\big)\\,dx+\\int_{a}^{1}\\big(\\exp(x)-y_{1}\\big)\\,dx.\n$$\nCompute:\n$$\n\\int_{0}^{a}\\big(\\exp(x)-1\\big)\\,dx=\\big[\\exp(x)-x\\big]_{0}^{a}=(\\exp(a)-1)-a=(y_{1}-1)-a,\n$$\n$$\n\\int_{a}^{1}\\big(\\exp(x)-y_{1}\\big)\\,dx=\\big[\\exp(x)\\big]_{a}^{1}-y_{1}(1-a)=\\exp(1)-\\exp(a)-y_{1}(1-a)=\\exp(1)-2y_{1}+y_{1}a.\n$$\nHence\n$$\nE_{R}=(y_{1}-1)-a+\\exp(1)-2y_{1}+y_{1}a=\\exp(1)-1-y_{1}-a+y_{1}a.\n$$\nSubstituting $y_{1}=\\tfrac{1+\\exp(1)}{2}$ and $a=\\ln\\!\\left(\\tfrac{1+\\exp(1)}{2}\\right)$ gives\n$$\nE_{R}=\\frac{\\exp(1)-3}{2}+\\frac{\\exp(1)-1}{2}\\,\\ln\\!\\left(\\frac{1+\\exp(1)}{2}\\right).\n$$\n\nTherefore, the ratio is\n$$\n\\frac{E_{D}}{E_{R}}=\\frac{\\exp(1)-\\tfrac{1}{2}\\exp\\!\\left(\\tfrac{1}{2}\\right)-\\tfrac{3}{2}}{\\tfrac{1}{2}\\big[(\\exp(1)-3)+(\\exp(1)-1)\\ln\\!\\left(\\tfrac{1+\\exp(1)}{2}\\right)\\big]}=\\frac{2\\exp(1)-\\exp\\!\\left(\\tfrac{1}{2}\\right)-3}{(\\exp(1)-3)+(\\exp(1)-1)\\ln\\!\\left(\\tfrac{1+\\exp(1)}{2}\\right)}.\n$$", "answer": "$$\\boxed{\\frac{2\\exp(1)-\\exp\\!\\left(\\frac{1}{2}\\right)-3}{\\left(\\exp(1)-3\\right)+\\left(\\exp(1)-1\\right)\\ln\\!\\left(\\frac{1+\\exp(1)}{2}\\right)}}$$", "id": "1414869"}, {"introduction": "Beyond just knowing that convergence occurs, in many applications we need to understand *how fast* it happens. This final exercise elevates our analysis to the $L^2$ space and explores a powerful approximation technique using local averages over shrinking dyadic intervals. Your task is to calculate the precise rate of convergence, a result that connects the density of simple functions to fundamental ideas in approximation theory and the theory of martingales [@problem_id:1414908].", "problem": "Consider the measure space $([0,1], \\mathcal{B}, \\lambda)$, where $\\mathcal{B}$ is the Borel sigma-algebra on $[0,1]$ and $\\lambda$ is the Lebesgue measure. For any integer $n \\ge 0$, we partition the interval $[0,1]$ into $2^n$ dyadic subintervals of equal length, $I_{n,k} = [k/2^n, (k+1)/2^n]$ for $k = 0, 1, \\dots, 2^n-1$.\n\nLet $f(x)=x$ be a function on $[0,1]$. We construct a sequence of simple functions $(f_n)_{n \\ge 0}$ where for each $n$, the function $f_n$ is constant on each subinterval $I_{n,k}$. The constant value of $f_n$ on $I_{n,k}$ is defined as the average value of $f$ over that subinterval:\n$$\nf_n(x) = \\frac{1}{\\lambda(I_{n,k})} \\int_{I_{n,k}} f(y) \\, d\\lambda(y) \\quad \\text{for } x \\in I_{n,k}.\n$$\nThese functions are elements of the space $L^2([0,1])$, which is equipped with the norm $\\|g\\|_{L^2} = \\left(\\int_0^1 |g(x)|^2 \\, dx\\right)^{1/2}$.\n\nCalculate the value of the limit:\n$$\nL = \\lim_{n \\to \\infty} 2^n \\|f_n - f\\|_{L^2}.\n$$\nExpress your answer as a single closed-form analytic expression.", "solution": "Let $h=2^{-n}$ and $a_{n,k}=k 2^{-n}$. Then $I_{n,k}=[a_{n,k},a_{n,k}+h]$. By definition,\n$$\nf_{n}(x)=\\frac{1}{\\lambda(I_{n,k})}\\int_{I_{n,k}} y\\,d\\lambda(y)=\\frac{1}{h}\\int_{a_{n,k}}^{a_{n,k}+h} y\\,dy \\quad \\text{for } x\\in I_{n,k}.\n$$\nCompute the integral:\n$$\n\\int_{a_{n,k}}^{a_{n,k}+h} y\\,dy=\\left.\\frac{y^{2}}{2}\\right|_{a_{n,k}}^{a_{n,k}+h}=\\frac{(a_{n,k}+h)^{2}-a_{n,k}^{2}}{2}=\\frac{2a_{n,k}h+h^{2}}{2}=a_{n,k}h+\\frac{h^{2}}{2}.\n$$\nDividing by $h$ gives\n$$\nf_{n}(x)=a_{n,k}+\\frac{h}{2}, \\quad x\\in I_{n,k}.\n$$\nHence on $I_{n,k}$,\n$$\nf(x)-f_{n}(x)=x-\\left(a_{n,k}+\\frac{h}{2}\\right).\n$$\nThe $L^{2}$ error squared is\n$$\n\\|f_{n}-f\\|_{L^{2}}^{2}=\\sum_{k=0}^{2^{n}-1}\\int_{a_{n,k}}^{a_{n,k}+h}\\left(x-\\left(a_{n,k}+\\frac{h}{2}\\right)\\right)^{2}dx.\n$$\nFor each $k$, set $t=x-(a_{n,k}+h/2)$ so that $t\\in[-h/2,h/2]$. Then\n$$\n\\int_{a_{n,k}}^{a_{n,k}+h}\\left(x-\\left(a_{n,k}+\\frac{h}{2}\\right)\\right)^{2}dx=\\int_{-h/2}^{h/2} t^{2}\\,dt=\\left.\\frac{t^{3}}{3}\\right|_{-h/2}^{h/2}=\\frac{h^{3}}{12}.\n$$\nSince there are $2^{n}$ intervals,\n$$\n\\|f_{n}-f\\|_{L^{2}}^{2}=2^{n}\\cdot\\frac{h^{3}}{12}=\\frac{2^{n}\\cdot 2^{-3n}}{12}=\\frac{2^{-2n}}{12}.\n$$\nTherefore,\n$$\n\\|f_{n}-f\\|_{L^{2}}=\\frac{2^{-n}}{\\sqrt{12}},\n$$\nand\n$$\nL=\\lim_{n\\to\\infty}2^{n}\\|f_{n}-f\\|_{L^{2}}=\\lim_{n\\to\\infty}2^{n}\\cdot\\frac{2^{-n}}{\\sqrt{12}}=\\frac{1}{\\sqrt{12}}.\n$$", "answer": "$$\\boxed{\\frac{1}{\\sqrt{12}}}$$", "id": "1414908"}]}
{"hands_on_practices": [{"introduction": "To get our hands dirty, let's begin with a direct application of the Skorokhod construction. This first exercise provides a concrete, step-by-step walkthrough of the quantile transform method, which is the workhorse behind many constructive proofs of the theorem. By considering a simple sequence of discrete random variables converging in distribution to zero, we will build a new sequence of random variables on a common probability space and watch them converge almost surely, solidifying our understanding of the theorem's core mechanics.", "problem": "Consider a sequence of discrete random variables $\\{X_n\\}_{n=1}^{\\infty}$. For each integer $n \\ge 1$, the random variable $X_n$ is defined by the probabilities $P(X_n = 1/n) = 1/2$ and $P(X_n = -1/n) = 1/2$. This sequence converges in distribution to a constant random variable $X=0$.\n\nSkorokhod's representation theorem provides a powerful method for converting convergence in distribution into almost sure convergence. It states that if a sequence of real-valued random variables $\\{X_n\\}$ converges in distribution to a random variable $X$, then there exists a single probability space $(\\Omega, \\mathcal{F}, P)$ and a new sequence of random variables $\\{Y_n\\}$ and a random variable $Y$ defined on this space with the following properties:\n1. For each $n$, $Y_n$ has the same distribution as $X_n$.\n2. $Y$ has the same distribution as $X$.\n3. The sequence $\\{Y_n\\}$ converges to $Y$ almost surely.\n\nYour task is to explicitly construct the sequence $\\{Y_n\\}$ for the given $\\{X_n\\}$. We will use the standard construction where the common probability space is the unit interval with the Lebesgue measure, i.e., $(\\Omega, \\mathcal{F}, P) = ([0,1], \\mathcal{B}([0,1]), \\lambda)$, where $\\mathcal{B}([0,1])$ is the Borel sigma-algebra and $\\lambda$ is the Lebesgue measure. On this space, each random variable $Y_n$ can be represented as a measurable function $Y_n(u)$ for $u \\in (0,1]$.\n\nDetermine the explicit functional form of $Y_n(u)$ for $u \\in (0,1]$. Your answer should be expressed as a piecewise function of $u$ and $n$.", "solution": "We are given the sequence $\\{X_{n}\\}_{n=1}^{\\infty}$ with $P(X_{n}=\\frac{1}{n})=\\frac{1}{2}$ and $P(X_{n}=-\\frac{1}{n})=\\frac{1}{2}$, and $X=0$ as the limit in distribution. To construct $\\{Y_{n}\\}$ on $([0,1],\\mathcal{B}([0,1]),\\lambda)$ so that $Y_{n}\\overset{d}{=}X_{n}$ for each $n$, $Y\\overset{d}{=}X$, and $Y_{n}\\to Y$ almost surely, we use the inverse transform method.\n\nLet $U$ denote the identity random variable on $([0,1],\\lambda)$, i.e., $U(u)=u$. For each $n$, let $F_{n}$ be the cumulative distribution function of $X_{n}$. Since $X_{n}$ has mass $\\frac{1}{2}$ at $-\\frac{1}{n}$ and $\\frac{1}{2}$ at $\\frac{1}{n}$, we have\n$$\nF_{n}(x)=\n\\begin{cases}\n0, & x<-\\frac{1}{n},\\\\\n\\frac{1}{2}, & -\\frac{1}{n}\\le x<\\frac{1}{n},\\\\\n1, & x\\ge \\frac{1}{n}.\n\\end{cases}\n$$\nDefine the right-continuous generalized inverse (quantile) function\n$$\nF_{n}^{-1}(u)=\\inf\\{x\\in\\mathbb{R}:F_{n}(x)\\ge u\\}, \\quad u\\in(0,1].\n$$\nFrom the form of $F_{n}$, we compute\n$$\nF_{n}^{-1}(u)=\n\\begin{cases}\n-\\frac{1}{n}, & 0<u\\le \\frac{1}{2},\\\\\n\\frac{1}{n}, & \\frac{1}{2}<u\\le 1.\n\\end{cases}\n$$\nSet $Y_{n}(u)=F_{n}^{-1}(u)$ for $u\\in(0,1]$. Then $Y_{n}$ has the same distribution as $X_{n}$ because $U$ is uniform on $(0,1]$ and the inverse transform preserves the distribution. Moreover, for every fixed $u\\in(0,1]\\setminus\\{\\frac{1}{2}\\}$, we have $|Y_{n}(u)|=\\frac{1}{n}\\to 0$, hence $Y_{n}(u)\\to 0$. Since the set $\\{\\frac{1}{2}\\}$ has Lebesgue measure zero, it follows that $Y_{n}\\to 0$ almost surely. Taking $Y(u)\\equiv 0$ yields $Y\\overset{d}{=}X$ and completes the Skorokhod representation.\n\nTherefore, the explicit functional form for $u\\in(0,1]$ is\n$$\nY_{n}(u)=\n\\begin{cases}\n-\\frac{1}{n}, & 0<u\\le \\frac{1}{2},\\\\\n\\frac{1}{n}, & \\frac{1}{2}<u\\le 1.\n\\end{cases}\n$$", "answer": "$$\\boxed{Y_{n}(u)=\\begin{cases}-\\frac{1}{n}, & 0<u\\le \\frac{1}{2},\\\\[4pt]\\frac{1}{n}, & \\frac{1}{2}<u\\le 1.\\end{cases}}$$", "id": "1388075"}, {"introduction": "Having seen the construction for discrete distributions, we now turn our attention to the continuous case. This practice demonstrates that the quantile transform method is a universal tool, working just as elegantly for random variables with continuous distributions. We will explore a sequence of uniform distributions, whose clean mathematical forms allow us to clearly see the resulting random variables converge to their limit for *every* outcome, providing a useful contrast to cases where convergence is only 'almost' sure.", "problem": "Consider a sequence of probability distributions $(\\mu_n)_{n\\ge 2}$, where for each integer $n \\ge 2$, $\\mu_n$ is the uniform distribution on the interval $[0, 1 - 1/n]$. Let $\\mu$ be the uniform distribution on the interval $[0,1]$. It is given that the sequence of measures $(\\mu_n)$ converges weakly to $\\mu$.\n\nThe Skorokhod representation theorem guarantees the existence of a common probability space $(\\Omega, \\mathcal{F}, P)$ and a sequence of real-valued random variables $(Y_n)_{n\\ge 2}$ and a random variable $Y$ defined on this space, such that:\n1. The probability law of $Y_n$ is $\\mu_n$ for each $n \\ge 2$.\n2. The probability law of $Y$ is $\\mu$.\n3. $Y_n(\\omega) \\to Y(\\omega)$ for $P$-almost every $\\omega \\in \\Omega$.\n\nYour task is to provide an explicit construction of such random variables. Specifically, using the probability space $(\\Omega, \\mathcal{F}, P) = ([0,1], \\mathcal{B}, \\lambda)$, where $[0,1]$ is the unit interval, $\\mathcal{B}$ is its Borel sigma-algebra, and $\\lambda$ is the Lebesgue measure, find the functional forms of $Y_n(\\omega)$ and $Y(\\omega)$ for $\\omega \\in [0,1]$.\n\nPresent your answer as a pair of functions $(Y_n(\\omega), Y(\\omega))$.", "solution": "We aim to construct random variables on the probability space $([0,1], \\mathcal{B}, \\lambda)$ whose laws are $\\mu_n$ and $\\mu$ and such that $Y_n \\to Y$ almost surely.\n\nFirst, let $U(\\omega) = \\omega$ for $\\omega \\in [0,1]$. Since $\\lambda$ is the Lebesgue measure, $U$ is uniformly distributed on $[0,1]$.\n\nDefine $Y(\\omega)$ to have law $\\mu$, the uniform distribution on $[0,1]$. The cumulative distribution function of $\\mu$ is $F(x) = 0$ for $x < 0$, $F(x) = x$ for $x \\in [0,1]$, and $F(x) = 1$ for $x \\ge 1$. Its quantile function (generalized inverse) is $F^{-1}(u) = u$ for $u \\in [0,1]$. Using the probability integral transform, set\n$$\nY(\\omega) = F^{-1}(U(\\omega)) = U(\\omega) = \\omega.\n$$\nThus $Y$ has law $\\mu$.\n\nFor each $n \\ge 2$, define $Y_n$ to have law $\\mu_n$, the uniform distribution on $[0, 1 - \\frac{1}{n}]$. The cumulative distribution function of $\\mu_n$ is\n$$\nF_n(x) = \\begin{cases}\n0, & x < 0, \\\\\n\\frac{x}{1 - \\frac{1}{n}}, & x \\in [0, 1 - \\frac{1}{n}], \\\\\n1, & x \\ge 1 - \\frac{1}{n}.\n\\end{cases}\n$$\nThe generalized inverse (quantile function) is\n$$\nF_n^{-1}(u) = \\left(1 - \\frac{1}{n}\\right) u, \\quad u \\in [0,1].\n$$\nDefine\n$$\nY_n(\\omega) = F_n^{-1}(U(\\omega)) = \\left(1 - \\frac{1}{n}\\right)\\omega.\n$$\nTo verify the law of $Y_n$, compute for $x \\in \\mathbb{R}$:\n$$\nP(Y_n \\le x) = \\lambda\\left(\\left\\{\\omega \\in [0,1] : \\left(1 - \\frac{1}{n}\\right)\\omega \\le x\\right\\}\\right)\n= \\lambda\\left(\\left\\{\\omega \\le \\frac{x}{1 - \\frac{1}{n}}\\right\\}\\right)\n= \\begin{cases}\n0, & x < 0, \\\\\n\\frac{x}{1 - \\frac{1}{n}}, & x \\in [0, 1 - \\frac{1}{n}], \\\\\n1, & x \\ge 1 - \\frac{1}{n},\n\\end{cases}\n$$\nwhich is exactly $F_n(x)$, so the law of $Y_n$ is $\\mu_n$.\n\nFinally, almost sure convergence holds pointwise for all $\\omega \\in [0,1]$:\n$$\nY_n(\\omega) = \\left(1 - \\frac{1}{n}\\right)\\omega \\to \\omega = Y(\\omega) \\quad \\text{as } n \\to \\infty.\n$$\nTherefore, on $([0,1], \\mathcal{B}, \\lambda)$, an explicit construction is $Y_n(\\omega) = \\left(1 - \\frac{1}{n}\\right)\\omega$ and $Y(\\omega) = \\omega$.", "answer": "$$\\boxed{\\begin{pmatrix}\\left(1 - \\frac{1}{n}\\right)\\omega & \\omega\\end{pmatrix}}$$", "id": "1460421"}, {"introduction": "The \"almost sure\" in almost sure convergence is a point of subtlety that deserves a closer look. This final practice problem is designed to illuminate this very concept by examining a scenario where the constructed sequence of random variables does not converge at every point. By analyzing a sequence of Bernoulli trials whose success probability oscillates around its limit, we will pinpoint exactly why the convergence fails for a specific outcome, thus gaining a deeper appreciation for why the theorem's guarantee is for almost every outcome, not all of them.", "problem": "Let $(\\mathbb{R}, \\mathcal{B}(\\mathbb{R}))$ be the real line with its Borel sigma-algebra. A probability measure $\\mu$ on this space can be characterized by its cumulative distribution function (CDF), $F(x) = \\mu((-\\infty, x])$. Weak convergence of a sequence of probability measures, $\\mu_n \\Rightarrow \\mu$, is equivalent to the pointwise convergence of their CDFs, $F_n(x) \\to F(x)$, at all points $x$ where $F$ is continuous.\n\nA powerful tool to connect weak convergence to the stronger notion of almost sure convergence is the quantile transform. Given a CDF $F$, its associated quantile function (or generalized inverse) is defined as $F^{-1}(u) = \\inf\\{y \\in \\mathbb{R} : F(y) \\geq u\\}$ for $u \\in (0, 1)$. If we consider the probability space $(\\Omega, \\mathcal{F}, P) = ((0, 1), \\mathcal{B}((0, 1)), \\lambda)$, where $\\lambda$ is the Lebesgue measure, then for any CDF $F$, the random variable $X(\\omega) = F^{-1}(\\omega)$ has $F$ as its CDF.\n\nNow, consider a sequence of discrete probability measures $\\mu_n$ for $n=1, 2, 3, \\ldots$, defined on the set $\\{0, 1\\}$. The measures are given by $\\mu_n(\\{1\\}) = p_n$ and $\\mu_n(\\{0\\}) = 1-p_n$, where the sequence of probabilities is $p_n = \\frac{1}{2} + \\frac{(-1)^n}{n+3}$. This sequence of measures converges weakly to a limit measure $\\mu$.\n\nUsing the quantile transform method described above on the probability space $((0, 1), \\lambda)$, we can construct a sequence of random variables $Y_n$ with laws $\\mu_n$ and a random variable $Y$ with law $\\mu$. The Skorokhod representation theorem guarantees that $Y_n \\to Y$ almost surely. However, this does not mean that the convergence is pointwise for all $\\omega \\in (0,1)$.\n\nIdentify the set of all points $\\omega \\in (0, 1)$ for which the sequence of real numbers $Y_n(\\omega)$ does not converge to $Y(\\omega)$.", "solution": "We are given Bernoulli measures $\\mu_{n}$ on $\\{0,1\\}$ with\n$$\n\\mu_{n}(\\{1\\})=p_{n},\\qquad \\mu_{n}(\\{0\\})=1-p_{n},\\qquad p_{n}=\\frac{1}{2}+\\frac{(-1)^{n}}{n+3}.\n$$\nLet $\\mu$ be the weak limit, which is the Bernoulli measure with parameter $p=\\lim_{n\\to\\infty}p_{n}=\\frac{1}{2}$.\n\nFor each $n$, the CDF $F_{n}$ of $\\mu_{n}$ is\n$$\nF_{n}(x)=\\begin{cases}\n0,& x<0,\\\\\n1-p_{n},& 0\\le x<1,\\\\\n1,& x\\ge 1,\n\\end{cases}\n$$\nand the CDF $F$ of $\\mu$ is\n$$\nF(x)=\\begin{cases}\n0,& x<0,\\\\\n\\frac{1}{2},& 0\\le x<1,\\\\\n1,& x\\ge 1.\n\\end{cases}\n$$\n\nOn $((0,1),\\lambda)$, define quantile transforms\n$$\nY_{n}(\\omega)=F_{n}^{-1}(\\omega),\\qquad Y(\\omega)=F^{-1}(\\omega),\\qquad \\omega\\in(0,1),\n$$\nwhere $F^{-1}(u)=\\inf\\{y\\in\\mathbb{R}:F(y)\\ge u\\}$.\n\nFrom the forms of $F_{n}$ and $F$, their quantile functions satisfy\n$$\nY_{n}(\\omega)=\\begin{cases}\n0,& \\omega\\le 1-p_{n},\\\\\n1,& \\omega>1-p_{n},\n\\end{cases}\n\\qquad\nY(\\omega)=\\begin{cases}\n0,& \\omega\\le \\frac{1}{2},\\\\\n1,& \\omega>\\frac{1}{2}.\n\\end{cases}\n$$\nSet\n$$\nt_{n}=1-p_{n}=\\frac{1}{2}-\\frac{(-1)^{n}}{n+3}=\\frac{1}{2}+\\frac{(-1)^{n+1}}{n+3}.\n$$\nThen $t_{n}\\to \\frac{1}{2}$, with $t_{n}<\\frac{1}{2}$ for $n$ even and $t_{n}>\\frac{1}{2}$ for $n$ odd. Thus\n$$\nY_{n}(\\omega)=\\mathbf{1}_{\\{\\omega>t_{n}\\}},\\qquad Y(\\omega)=\\mathbf{1}_{\\{\\omega>\\frac{1}{2}\\}}.\n$$\n\nWe analyze pointwise convergence by cases.\n\n1) If $\\omega<\\frac{1}{2}$, then for all odd $n$, $t_{n}>\\frac{1}{2}>\\omega$ so $\\omega\\le t_{n}$ and $Y_{n}(\\omega)=0$. For even $n$, $t_{n}=\\frac{1}{2}-\\frac{1}{n+3}\\uparrow \\frac{1}{2}$, hence there exists $N$ such that for all even $n\\ge N$, $t_{n}>\\omega$, so $Y_{n}(\\omega)=0$. Therefore $Y_{n}(\\omega)\\to 0=Y(\\omega)$.\n\n2) If $\\omega>\\frac{1}{2}$, then for all even $n$, $t_{n}<\\frac{1}{2}<\\omega$ so $\\omega>t_{n}$ and $Y_{n}(\\omega)=1$. For odd $n$, $t_{n}=\\frac{1}{2}+\\frac{1}{n+3}\\downarrow \\frac{1}{2}$, hence there exists $N$ such that for all odd $n\\ge N$, $t_{n}<\\omega$, so $Y_{n}(\\omega)=1$. Therefore $Y_{n}(\\omega)\\to 1=Y(\\omega)$.\n\n3) If $\\omega=\\frac{1}{2}$, then $Y(\\frac{1}{2})=0$, while\n$$\nY_{n}\\!\\left(\\frac{1}{2}\\right)=\\begin{cases}\n0,& \\frac{1}{2}\\le t_{n}\\ \\text{(odd $n$)},\\\\\n1,& \\frac{1}{2}>t_{n}\\ \\text{(even $n$)},\n\\end{cases}\n$$\nso $Y_{n}\\!\\left(\\frac{1}{2}\\right)$ alternates between $0$ and $1$ and does not converge.\n\nHence the set of all $\\omega\\in(0,1)$ where $Y_{n}(\\omega)$ does not converge to $Y(\\omega)$ is the singleton $\\{\\frac{1}{2}\\}$. This is a null set under $\\lambda$, so $Y_{n}\\to Y$ almost surely, consistent with Skorokhod’s theorem.", "answer": "$$\\boxed{\\left\\{\\frac{1}{2}\\right\\}}$$", "id": "1460424"}]}
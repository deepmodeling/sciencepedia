{"hands_on_practices": [{"introduction": "Before diving into the expected time to complete a collection, let's explore a foundational question about the collection process itself. This problem challenges you to think about the sequence of collection and reveals a surprising, elegant symmetry in the process. Understanding why any single item is equally likely to be the last one you find provides deep intuition for the uniform randomness at the heart of the Coupon Collector's Problem [@problem_id:1405927].", "problem": "In the popular online game \"Chronos Convergence,\" players can collect a set of $n$ distinct digital artifacts. These artifacts are obtained by opening \"Time Capsules.\" Each time a capsule is opened, it reveals one of the $n$ artifacts, chosen uniformly at random and independently of all previous openings. This means a player can receive duplicates of artifacts they already possess.\n\nAmong the $n$ artifacts, one is designated as the \"Legendary Keystone.\" A player's collection is considered complete only when they have acquired at least one of each of the $n$ unique artifacts.\n\nAssume a player starts with no artifacts. Determine the probability that the Legendary Keystone is the very last *new* artifact the player acquires, thereby completing the entire collection. Express your answer as a closed-form analytic expression in terms of $n$.", "solution": "Let the $n$ distinct artifacts be labeled by $\\{1,2,\\dots,n\\}$, and let artifact $L$ denote the Legendary Keystone. Consider the sequence of discoveries of new artifacts (i.e., the first time each distinct artifact is obtained). Let $Y_{1},Y_{2},\\dots,Y_{n}$ be the identities of the artifacts at the moments when a new artifact is first acquired; thus $\\{Y_{1},\\dots,Y_{n}\\}$ is a permutation of the $n$ labels.\n\nFix any $k\\in\\{1,\\dots,n\\}$. Suppose $k-1$ distinct artifacts have already been collected. At the next time a new artifact is obtained, the conditional probability that it is any particular one among the $n-(k-1)$ not yet seen is computed as follows. On any single draw, the probability to obtain a specific not-yet-seen artifact is $\\frac{1}{n}$, and the probability to obtain any not-yet-seen artifact is $\\frac{n-(k-1)}{n}$. By the definition of conditional probability,\n$$\n\\Pr(\\text{next new artifact is a given one}\\mid \\text{next draw is new})\n=\\frac{\\frac{1}{n}}{\\frac{n-(k-1)}{n}}=\\frac{1}{n-(k-1)}.\n$$\nTherefore, for any fixed permutation $(y_{1},y_{2},\\dots,y_{n})$ of the $n$ artifacts, its probability as the order of first appearances is\n$$\n\\Pr(Y_{1}=y_{1},\\dots,Y_{n}=y_{n})\n=\\prod_{k=1}^{n}\\frac{1}{n-(k-1)}=\\frac{1}{n!}.\n$$\nThus the order of first appearances is uniformly distributed over all $n!$ permutations. The event that the Legendary Keystone $L$ is the last new artifact corresponds to all permutations with $L$ in the $n$-th position, of which there are $(n-1)!$. Hence\n$$\n\\Pr(Y_{n}=L)=\\frac{(n-1)!}{n!}=\\frac{1}{n}.\n$$\nThis is the desired probability.", "answer": "$$\\boxed{\\frac{1}{n}}$$", "id": "1405927"}, {"introduction": "The classic Coupon Collector's Problem assumes a single pool of items, but real-world applications, like the video game scenario in this problem, often involve multiple categories with different costs or acquisition methods. This exercise demonstrates how to break down a complex problem into smaller, independent subproblems [@problem_id:1405952]. By applying the core expectation formula to each subproblem and combining the results, you'll practice using the powerful principle of linearity of expectation.", "problem": "A video game features a system where players can acquire cosmetic items. There are a total of $n$ distinct items available. These items are divided into two tiers: a \"Standard\" tier with $n-k$ unique items and a \"Mythic\" tier with $k$ unique items, where $1 \\le k < n$.\n\nItems are obtained from two different types of in-game containers:\n1.  A \"Standard Cache\" costs $C$ units of in-game currency to open and grants the player one item selected uniformly at random from the $n-k$ Standard items.\n2.  A \"Mythic Cache\" costs $2C$ units of currency to open and grants the player one item selected uniformly at random from the $k$ Mythic items.\n\nA player can choose to open either type of cache at any time. A dedicated collector wants to acquire the complete set of all $n$ items. To do this, they will purchase Standard Caches until all Standard items are collected, and they will purchase Mythic Caches until all Mythic items are collected.\n\nWhat is the total expected amount of currency the collector must spend to obtain at least one of each of the $n$ distinct items? Provide your answer as a closed-form analytic expression in terms of $n$, $k$, and $C$.", "solution": "The Standard and Mythic collections are independent subproblems because opening one type of cache does not affect the distribution of items in the other type. By linearity of expectation, the total expected currency spent is the sum of the expected amounts required to complete the Standard set and the Mythic set.\n\nConsider first the Standard set with $m_{s}=n-k$ distinct items. Each Standard Cache yields one item uniformly among these $m_{s}$ items. This is the classical coupon collector problem. If $j$ distinct items have already been collected, the probability that the next Standard Cache gives a new item is $(m_{s}-j)/m_{s}$. The expected number of additional Standard Caches to obtain the next new item is therefore\n$$\n\\frac{1}{(m_{s}-j)/m_{s}}=\\frac{m_{s}}{m_{s}-j}.\n$$\nSumming over $j=0,1,\\ldots,m_{s}-1$ gives the expected number of Standard Caches to complete the Standard set:\n$$\n\\sum_{j=0}^{m_{s}-1}\\frac{m_{s}}{m_{s}-j}\n=m_{s}\\sum_{i=1}^{m_{s}}\\frac{1}{i}.\n$$\nSince each Standard Cache costs $C$, the expected currency spent on Standard Caches is\n$$\nC\\,m_{s}\\sum_{i=1}^{m_{s}}\\frac{1}{i}\n= C\\,(n-k)\\sum_{i=1}^{n-k}\\frac{1}{i}.\n$$\n\nNow consider the Mythic set with $m_{m}=k$ distinct items. By the same coupon collector reasoning, the expected number of Mythic Caches needed is\n$$\n\\sum_{j=0}^{k-1}\\frac{k}{k-j}\n= k\\sum_{i=1}^{k}\\frac{1}{i}.\n$$\nEach Mythic Cache costs $2C$, so the expected currency spent on Mythic Caches is\n$$\n2C\\,k\\sum_{i=1}^{k}\\frac{1}{i}.\n$$\n\nAdding both contributions, the total expected amount of currency required to obtain at least one of each of the $n$ items is\n$$\nC\\,(n-k)\\sum_{i=1}^{n-k}\\frac{1}{i} \\;+\\; 2C\\,k\\sum_{i=1}^{k}\\frac{1}{i}.\n$$\nEquivalently, writing in terms of harmonic numbers $H_{m}=\\sum_{i=1}^{m}\\frac{1}{i}$, this is $C\\left((n-k)H_{n-k}+2kH_{k}\\right)$.", "answer": "$$\\boxed{C\\,(n-k)\\sum_{i=1}^{n-k}\\frac{1}{i}\\;+\\;2C\\,k\\sum_{i=1}^{k}\\frac{1}{i}}$$", "id": "1405952"}, {"introduction": "A key insight from the Coupon Collector's Problem is that finding the last few items takes a disproportionately long time. This exercise zooms in on this \"endgame\" of the collection process, asking you to calculate the expected effort needed to finish once you are close to completion [@problem_id:1405915]. It introduces the use of asymptotic approximations for large numbers, a critical skill in fields like computer science and statistical physics for understanding the behavior of systems at scale.", "problem": "A global health organization is monitoring the evolution of a virus by sequencing samples. It is known that there are $N$ distinct key mutations that can define a major variant. The sequencing process is modeled such that at each time step, one of the $N$ variants is observed, with each variant being equally likely to be the one observed, independent of past observations.\n\nThe organization has set two major milestones: the 'Vigilance' milestone, achieved when $N - \\sqrt{N}$ distinct variants have been identified, and the 'Completion' milestone, achieved when all $N$ distinct variants have been identified.\n\nA team of analysts is tasked with forecasting resource allocation. Suppose the 'Vigilance' milestone has just been reached. Assuming $N$ is a very large number, derive an approximate closed-form expression for the expected number of additional samples that must be sequenced to reach the 'Completion' milestone. Your expression should be in terms of $N$ and may use the Euler-Mascheroni constant, which is denoted by $\\gamma$.", "solution": "Model the sequencing outcomes as the classical coupon collector with $N$ equally likely coupons (variants). Let $K$ be the number of distinct variants already observed. At the instant the 'Vigilance' milestone is reached, $K = N - \\sqrt{N}$, so the number of unseen variants is $m = \\sqrt{N}$.\n\nCondition on the current state with $r$ unseen variants. The probability that the next sample reveals a new variant is $r/N$, hence the waiting time to discover one new variant is geometric with mean $N/r$. By linearity of expectation, the expected additional samples to go from $m$ unseen variants down to $0$ is\n$$\n\\sum_{r=1}^{m} \\frac{N}{r} \\;=\\; N \\sum_{r=1}^{m} \\frac{1}{r} \\;=\\; N H_{m},\n$$\nwhere $H_{m}$ is the $m$-th harmonic number. Substituting $m=\\sqrt{N}$ gives the exact conditional expectation\n$$\n\\mathbb{E}[\\text{additional samples}\\mid K=N-\\sqrt{N}] \\;=\\; N\\,H_{\\sqrt{N}}.\n$$\nFor large $N$, use the asymptotic expansion of the harmonic numbers:\n$$\nH_{m} \\;=\\; \\ln m \\;+\\; \\gamma \\;+\\; \\frac{1}{2m} \\;-\\; \\frac{1}{12 m^{2}} \\;+\\; \\mathcal{O}\\!\\left(m^{-4}\\right).\n$$\nWith $m=\\sqrt{N}$ this yields\n$$\nH_{\\sqrt{N}} \\;=\\; \\ln \\sqrt{N} \\;+\\; \\gamma \\;+\\; \\frac{1}{2\\sqrt{N}} \\;-\\; \\frac{1}{12 N} \\;+\\; \\mathcal{O}\\!\\left(N^{-2}\\right).\n$$\nMultiplying by $N$ gives the large-$N$ approximation\n$$\n\\mathbb{E}[\\text{additional samples}] \\;=\\; \\frac{N}{2}\\ln N \\;+\\; \\gamma N \\;+\\; \\frac{1}{2}\\sqrt{N} \\;-\\; \\frac{1}{12} \\;+\\; \\mathcal{O}\\!\\left(N^{-1}\\right).\n$$\nAn approximate closed-form expression keeping the dominant terms in $N$ is therefore\n$$\n\\frac{N}{2}\\ln N \\;+\\; \\gamma N.\n$$", "answer": "$$\\boxed{\\frac{N}{2}\\ln N+\\gamma N}$$", "id": "1405915"}]}
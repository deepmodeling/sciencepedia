{"hands_on_practices": [{"introduction": "The Floyd-Warshall algorithm is a prime example of dynamic programming, building up a solution by iteratively considering more possibilities. This first exercise focuses on the single most critical step of the algorithm: the update rule. By calculating the shortest path between two nodes while allowing only a small, specified set of intermediate vertices ([@problem_id:1370950]), you will gain direct experience with the core logic that underpins this powerful all-pairs shortest path method.", "problem": "In a small, experimental data center, five processing nodes, labeled $N_1, N_2, N_3, N_4, N_5$, are interconnected. The performance of the network is characterized by the latency, in milliseconds (ms), for sending a data packet directly from one node to another. Due to specialized hardware optimizations, some direct links can have a negative latency, effectively reducing the total time of a multi-hop data transfer.\n\nThe known direct latencies are as follows:\n- From $N_1$ to $N_2$: 3 ms\n- From $N_1$ to $N_3$: 8 ms\n- From $N_1$ to $N_5$: -2 ms\n- From $N_2$ to $N_4$: 1 ms\n- From $N_2$ to $N_5$: 7 ms\n- From $N_3$ to $N_2$: 4 ms\n- From $N_4$ to $N_1$: 2 ms\n- From $N_4$ to $N_3$: -5 ms\n- From $N_5$ to $N_4$: 6 ms\n\nIf a direct path between two nodes is not listed, it is considered to have an infinitely large latency. The latency from any node to itself is 0 ms.\n\nA path from a source node $N_i$ to a destination node $N_j$ can route through a set of intermediate nodes. Let's define $L(i, j, k)$ as the minimum possible latency for a path from node $N_i$ to node $N_j$ that is only allowed to use nodes from the set $\\{N_1, N_2, \\dots, N_k\\}$ as intermediate stops. A direct path from $N_i$ to $N_j$ has no intermediate stops.\n\nCalculate the value of $L(4, 2, 3)$. Express your final answer in milliseconds.", "solution": "We use the standard Floyd–Warshall dynamic programming for shortest paths with restricted intermediate nodes. Let $w(i,j)$ be the direct latency from $N_{i}$ to $N_{j}$, with $w(i,j)=\\infty$ if not listed and $w(i,i)=0$. Define\n$$\nL(i,j,0)=w(i,j), \\quad L(i,j,k)=\\min\\big(L(i,j,k-1),\\,L(i,k,k-1)+L(k,j,k-1)\\big),\n$$\nwhich restricts intermediate nodes to the set $\\{N_{1},\\dots,N_{k}\\}$.\n\nWe need $L(4,2,3)$. First, from the data:\n$$\nw(1,2)=3,\\quad w(1,3)=8,\\quad w(1,5)=-2,\\quad w(2,4)=1,\\quad w(2,5)=7,\n$$\n$$\nw(3,2)=4,\\quad w(4,1)=2,\\quad w(4,3)=-5,\\quad w(5,4)=6,\n$$\nand all other $w(i,j)=\\infty$ except $w(i,i)=0$.\n\nInitialization ($k=0$) for needed pairs:\n$$\nL(4,2,0)=\\infty,\\quad L(4,1,0)=2,\\quad L(1,2,0)=3,\\quad L(4,3,0)=-5,\\quad L(3,2,0)=4.\n$$\n\nStep $k=1$ (allowing $N_{1}$ as intermediate):\n$$\nL(4,2,1)=\\min\\big(L(4,2,0),\\,L(4,1,0)+L(1,2,0)\\big)=\\min(\\infty,\\,2+3)=5,\n$$\nand for later use,\n$$\nL(4,3,1)=\\min(L(4,3,0),\\,L(4,1,0)+L(1,3,0)\\big)=\\min(-5,\\,2+8)=-5,\n$$\n$$\nL(3,2,1)=\\min(L(3,2,0),\\,L(3,1,0)+L(1,2,0)\\big)=\\min(4,\\,\\infty+3)=4.\n$$\n\nStep $k=2$ (allowing $\\{N_{1},N_{2}\\}$ as intermediates):\n$$\nL(4,2,2)=L(4,2,1)=5 \\quad\\text{(endpoint } N_2 \\text{ cannot be intermediate)}\n$$\nand for later use,\n$$\nL(4,3,2)=\\min\\big(L(4,3,1),\\,L(4,2,1)+L(2,3,1)\\big)=\\min(-5,\\,5+\\infty)=-5,\n$$\n$$\nL(3,2,2)=L(3,2,1)=4 \\quad\\text{(endpoint } N_2 \\text{ cannot be intermediate)}\n$$\n\nStep $k=3$ (allowing $\\{N_{1},N_{2},N_{3}\\}$ as intermediates):\n$$\nL(4,2,3)=\\min\\big(L(4,2,2),\\,L(4,3,2)+L(3,2,2)\\big)=\\min(5,\\,-5+4)=-1.\n$$\n\nTherefore, the minimum possible latency from $N_{4}$ to $N_{2}$ using only $\\{N_{1},N_{2},N_{3}\\}$ as intermediate nodes is $-1$ ms.", "answer": "$$\\boxed{-1}$$", "id": "1370950"}, {"introduction": "Having practiced the core update rule, we now scale up to see its effect across the entire graph. This practice involves performing the first full iteration of the Floyd-Warshall algorithm, where we consider all possible paths that pass through the first vertex. Completing the distance matrix $D^{(1)}$ ([@problem_id:1370977]) will help you understand how information about new, shorter paths propagates through the matrix in a structured and systematic way.", "problem": "A small-scale datacenter consists of four servers, labeled 1, 2, 3, and 4. The network administrator has measured the direct communication latency (in milliseconds) between certain pairs of servers. The latencies are represented by a weighted directed graph where an edge from server $i$ to server $j$ has a weight equal to the latency. The initial matrix of direct latencies, $D^{(0)}$, is given below. An entry of $\\infty$ indicates that there is no direct connection between the servers.\n\n$$\nD^{(0)} = \\begin{pmatrix}\n0 & 8 & \\infty & 1 \\\\\n\\infty & 0 & 1 & \\infty \\\\\n4 & \\infty & 0 & \\infty \\\\\n\\infty & 2 & 9 & 0\n\\end{pmatrix}\n$$\n\nTo find the shortest communication time between all pairs of servers, the administrator uses the Floyd-Warshall algorithm. The algorithm iteratively computes a sequence of matrices $D^{(k)}$, where the entry $D^{(k)}_{ij}$ represents the shortest path from server $i$ to server $j$ using only intermediate servers from the set $\\{1, 2, \\dots, k\\}$.\n\nDetermine the matrix $D^{(1)}$ that results from the first full iteration (i.e., for $k=1$) of the Floyd-Warshall algorithm. Your answer should be the complete $4 \\times 4$ matrix.", "solution": "We apply the Floyd–Warshall update for $k=1$. The recurrence is\n$$\nD^{(1)}_{ij}=\\min\\!\\left(D^{(0)}_{ij},\\,D^{(0)}_{i1}+D^{(0)}_{1j}\\right).\n$$\n- For $i=1$, since $D^{(0)}_{11}=0$, we have $D^{(0)}_{11}+D^{(0)}_{1j}=D^{(0)}_{1j}$ for all $j$, hence $D^{(1)}_{1j}=D^{(0)}_{1j}$. Thus row $1$ remains $\\big(0,\\,8,\\,\\infty,\\,1\\big)$.\n- For $i=2$, $D^{(0)}_{21}=\\infty$, so $D^{(0)}_{21}+D^{(0)}_{1j}=\\infty$ for all $j$, hence $D^{(1)}_{2j}=D^{(0)}_{2j}$. Thus row $2$ remains $\\big(\\infty,\\,0,\\,1,\\,\\infty\\big)$.\n- For $i=3$, $D^{(0)}_{31}=4$ is finite, so compute each $j$:\n$$\n\\begin{aligned}\nD^{(1)}_{31}&=\\min\\!\\big(4,\\,4+0\\big)=4,\\\\\nD^{(1)}_{32}&=\\min\\!\\big(\\infty,\\,4+8\\big)=12,\\\\\nD^{(1)}_{33}&=\\min\\!\\big(0,\\,4+\\infty\\big)=0,\\\\\nD^{(1)}_{34}&=\\min\\!\\big(\\infty,\\,4+1\\big)=5.\n\\end{aligned}\n$$\nThus row $3$ becomes $\\big(4,\\,12,\\,0,\\,5\\big)$.\n- For $i=4$, $D^{(0)}_{41}=\\infty$, so $D^{(1)}_{4j}=D^{(0)}_{4j}$. Thus row $4$ remains $\\big(\\infty,\\,2,\\,9,\\,0\\big)$.\n\nTherefore,\n$$\nD^{(1)}=\\begin{pmatrix}\n0 & 8 & \\infty & 1\\\\\n\\infty & 0 & 1 & \\infty\\\\\n4 & 12 & 0 & 5\\\\\n\\infty & 2 & 9 & 0\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\n0 & 8 & \\infty & 1\\\\\n\\infty & 0 & 1 & \\infty\\\\\n4 & 12 & 0 & 5\\\\\n\\infty & 2 & 9 & 0\n\\end{pmatrix}}$$", "id": "1370977"}, {"introduction": "The true power of an algorithm often lies not just in what it computes, but in how its results can be used to uncover deeper insights. This final practice moves beyond the mechanics of the Floyd-Warshall algorithm to an elegant application of its output. By using the final all-pairs shortest path matrix, you will devise a test to determine if a graph is bipartite ([@problem_id:1370948]), revealing how path lengths encode fundamental structural properties of the graph.", "problem": "Consider an undirected, unweighted, and connected graph $G$ with $n$ vertices, labeled $v_1, v_2, \\dots, v_n$. The Floyd-Warshall algorithm is executed on this graph to compute the all-pairs shortest path distance matrix, denoted by $D$. The entry $D_{ij}$ in this matrix represents the length of the shortest path between vertex $v_i$ and vertex $v_j$. By definition, $D_{ii} = 0$ for all $i$, and $D_{ij} = D_{ji}$ for all pairs $(i, j)$.\n\nA graph is defined as bipartite if its vertices can be divided into two disjoint and independent sets, $U$ and $V$, such that every edge in the graph connects a vertex in $U$ to one in $V$. An equivalent property is that a graph is bipartite if and only if it contains no cycles of odd length.\n\nBased on the final distance matrix $D$, which one of the following conditions is both necessary and sufficient for the graph $G$ to be bipartite?\n\nA. For every triple of vertices $(v_i, v_j, v_k)$, the parity of the shortest distance $D_{ij}$ is the same as the parity of the sum of distances $D_{ik} + D_{kj}$. That is, $D_{ij} \\equiv (D_{ik} + D_{kj}) \\pmod 2$.\n\nB. For every pair of distinct vertices $(v_i, v_j)$, the shortest distance $D_{ij}$ is an even integer.\n\nC. There exists a vertex $v_k$ such that for any other vertex $v_i$, the shortest distance $D_{ki}$ is an even integer.\n\nD. For every triple of vertices $(v_i, v_j, v_k)$, the triangle inequality holds for the parities: $D_{ij} \\pmod 2 \\le (D_{ik} \\pmod 2) + (D_{kj} \\pmod 2)$.\n\nE. For any chosen vertex $v_i$, the maximum value in its corresponding row of the distance matrix, $\\max_{j} D_{ij}$, is odd.", "solution": "We formalize bipartiteness via a two-coloring function. A graph $G$ is bipartite if and only if there exists a map $c: V(G) \\to \\{0,1\\}$ such that every edge has endpoints of different colors. In such a graph, any path alternates partitions at each step, hence for any vertices $v_{i},v_{j}$ the parity of the length of any path from $v_{i}$ to $v_{j}$ is fixed and equals $c(v_{i})+c(v_{j}) \\pmod 2$. In particular, the parity of the shortest path length satisfies\n$$\nD_{ij} \\equiv c(v_{i})+c(v_{j}) \\pmod 2.\n$$\n\nWe now analyze each option.\n\nFirst, prove that condition A is necessary. Assume $G$ is bipartite with coloring $c$. For any triple $(v_{i},v_{j},v_{k})$,\n$$\nD_{ij} \\equiv c(v_{i})+c(v_{j}) \\pmod 2,\\quad\nD_{ik} \\equiv c(v_{i})+c(v_{k}) \\pmod 2,\\quad\nD_{kj} \\equiv c(v_{k})+c(v_{j}) \\pmod 2.\n$$\nAdding the last two congruences and using addition modulo $2$ gives\n$$\nD_{ik}+D_{kj} \\equiv \\big(c(v_{i})+c(v_{k})\\big)+\\big(c(v_{k})+c(v_{j})\\big) \\equiv c(v_{i})+c(v_{j}) \\equiv D_{ij} \\pmod 2,\n$$\nso $D_{ij} \\equiv D_{ik}+D_{kj} \\pmod 2$ holds for all triples, i.e., A holds.\n\nNext, prove that condition A is sufficient. Suppose for all triples $(v_{i},v_{j},v_{k})$ we have $D_{ij} \\equiv D_{ik}+D_{kj} \\pmod 2$. Fix an arbitrary root $v_{r}$ and define\n$$\nc(v_{i}) \\equiv D_{ri} \\pmod 2.\n$$\nLet $(v_{u},v_{v})$ be any edge. Then $D_{uv}=1$. Using the assumed condition with $(i,j,k)=(u,v,r)$,\n$$\nD_{uv} \\equiv D_{ur}+D_{rv} \\pmod 2 \\;\\Longrightarrow\\; 1 \\equiv D_{ru}+D_{rv} \\pmod 2,\n$$\nso $D_{ru}$ and $D_{rv}$ have opposite parity, i.e., $c(v_{u}) \\neq c(v_{v})$. Therefore every edge connects opposite colors, and the sets $\\{v: c(v)=0\\}$ and $\\{v: c(v)=1\\}$ form a bipartition. Hence A is sufficient.\n\nThus A is both necessary and sufficient.\n\nWe now refute the remaining options:\n\nB. In any connected unweighted graph with at least two vertices, there is an edge $(v_{u},v_{v})$ with $D_{uv}=1$, which is odd. Hence it is impossible that all $D_{ij}$ for $i \\neq j$ are even. So B is neither necessary nor sufficient.\n\nC. If there exists $v_{k}$ with all $D_{ki}$ even, then for any neighbor $v_{u}$ of $v_{k}$ we would have $D_{ku}=1$, which is odd, a contradiction. Thus C cannot hold in any nontrivial connected graph and is neither necessary nor sufficient.\n\nD. This condition is not sufficient: in a triangle graph, $D_{ij}=1$ for $i \\neq j$, and for any triple $(v_{i},v_{j},v_{k})$ with $k \\notin \\{i,j\\}$ we have $D_{ij} \\pmod 2 = 1 \\le 1+1 = (D_{ik} \\pmod 2)+(D_{kj} \\pmod 2)$, so the condition holds, yet the graph is not bipartite. Hence D fails as a characterization.\n\nE. This is false in bipartite graphs in general. For example, in a path on three vertices, an endpoint has maximum distance $2$, which is even. Hence E is not necessary.\n\nTherefore, the only condition that is both necessary and sufficient is A.", "answer": "$$\\boxed{A}$$", "id": "1370948"}]}
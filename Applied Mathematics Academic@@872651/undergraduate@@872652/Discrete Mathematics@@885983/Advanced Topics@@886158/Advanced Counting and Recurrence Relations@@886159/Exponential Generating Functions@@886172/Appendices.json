{"hands_on_practices": [{"introduction": "This first exercise explores a fundamental combinatorial scenario: assigning distinct items to distinct categories such that no category is left empty. In mathematics, this is equivalent to counting surjective (onto) functions. We will see how exponential generating functions (EGFs) provide a powerful and systematic framework for solving such problems, where the EGF for a non-empty set, $e^x - 1$, becomes a key building block. [@problem_id:1369365]", "problem": "A video game designer is creating a new level that consists of $n$ distinct challenges. Each of these challenges must be categorized as exactly one of three types: a Puzzle, a Combat encounter, or a Trap. To ensure a balanced and engaging experience for the player, the design blueprint for the level mandates that there must be at least one challenge of each of the three types.\n\nYour task is to determine the total number of distinct ways the designer can categorize the $n$ challenges according to these rules. Provide a closed-form analytic expression for this number in terms of $n$.", "solution": "We use exponential generating functions (EGFs) to solve this problem. We are assigning $n$ distinct challenges to 3 distinct categories (Puzzle, Combat, Trap), with the constraint that each category must receive at least one challenge.\n\nFor a single category, the set of challenges assigned to it must be non-empty. The EGF for assigning challenges to a single category, ensuring it gets at least one, is:\n$$C(x) = \\frac{x^1}{1!} + \\frac{x^2}{2!} + \\frac{x^3}{3!} + \\dots = \\exp(x) - 1$$\nSince there are three distinct and labeled categories (Puzzle, Combat, and Trap), and the assignments to each are independent, we use the product rule for EGFs. The total EGF for the valid assignments is the product of the EGFs for each category:\n$$G(x) = (\\exp(x) - 1) \\cdot (\\exp(x) - 1) \\cdot (\\exp(x) - 1) = (\\exp(x) - 1)^3$$\nTo find the number of ways for $n$ challenges, we need to find the coefficient of $\\frac{x^n}{n!}$ in the series expansion of $G(x)$. Let this number be $a_n$.\n\nWe expand the expression using the binomial theorem:\n$$G(x) = \\binom{3}{0}\\exp(x)^3 - \\binom{3}{1}\\exp(x)^2 + \\binom{3}{2}\\exp(x)^1 - \\binom{3}{3}\\exp(x)^0$$\n$$G(x) = \\exp(3x) - 3\\exp(2x) + 3\\exp(x) - 1$$\nNow, we find the coefficient of $\\frac{x^n}{n!}$ in this series, which is $a_n$:\n$$a_n = [x^n/n!] G(x) = [x^n/n!](\\exp(3x) - 3\\exp(2x) + 3\\exp(x) - 1)$$\nUsing the fact that $[x^n/n!] \\exp(ax) = a^n$, and assuming $n > 0$, we get:\n$$a_n = 3^n - 3 \\cdot 2^n + 3 \\cdot 1^n - 0$$\nThus, the number of ways is $3^{n} - 3 \\cdot 2^{n} + 3$. This result is also equivalent to $3! S(n,3)$, where $S(n,3)$ is the Stirling number of the second kind.", "answer": "$$\\boxed{3^{n} - 3 \\cdot 2^{n} + 3}$$", "id": "1369365"}, {"introduction": "Many counting problems involve constructing sequences with specific constraints on the frequency of their components. This practice asks for the number of ternary sequences where the counts of '0's and '1's are restricted by parity (even or odd). This is a classic application where EGFs shine, as we can encode parity constraints using the hyperbolic functions $\\cosh(x)$ and $\\sinh(x)$ and combine them using the EGF product rule to find the solution. [@problem_id:1369372]", "problem": "Consider sequences of length $n$ formed using the digits from the set $\\{0, 1, 2\\}$. We are interested in constructing sequences that satisfy two specific conditions:\n1. The digit '0' must appear an even number of times.\n2. The digit '1' must appear an odd number of times.\nThere are no restrictions on the number of times the digit '2' can appear.\n\nFind a closed-form expression for the total number of such sequences of length $n$, where $n$ is a positive integer.", "solution": "We use exponential generating functions (EGFs) to solve this problem. We are constructing a sequence of length $n$ by assigning a digit to each of $n$ distinct positions. This is equivalent to partitioning the $n$ positions into three sets (positions for '0', '1', and '2') and counting the valid partitions.\n\nWe determine the EGF for each digit based on its allowed frequency:\n1.  **Digit '0' (even count):** The EGF for an even number of occurrences is $G_0(x) = \\sum_{k=0}^{\\infty} \\frac{x^{2k}}{(2k)!} = \\cosh(x) = \\frac{e^x + e^{-x}}{2}$.\n2.  **Digit '1' (odd count):** The EGF for an odd number of occurrences is $G_1(x) = \\sum_{k=0}^{\\infty} \\frac{x^{2k+1}}{(2k+1)!} = \\sinh(x) = \\frac{e^x - e^{-x}}{2}$.\n3.  **Digit '2' (unrestricted count):** The EGF for an unrestricted number of occurrences is $G_2(x) = \\sum_{k=0}^{\\infty} \\frac{x^k}{k!} = \\exp(x)$.\n\nBy the product rule for EGFs, the generating function for the total number of valid sequences is the product of these individual EGFs:\n$$G(x) = G_0(x) G_1(x) G_2(x) = \\left(\\frac{e^x + e^{-x}}{2}\\right) \\left(\\frac{e^x - e^{-x}}{2}\\right) e^x$$\nUsing the identity $(a+b)(a-b) = a^2 - b^2$, we simplify the product:\n$$G(x) = \\frac{(e^x)^2 - (e^{-x})^2}{4} e^x = \\frac{e^{2x} - e^{-2x}}{4} e^x = \\frac{e^{3x} - e^{-x}}{4}$$\nWe are looking for the number of sequences of length $n$, which is the coefficient of $\\frac{x^n}{n!}$ in $G(x)$. Let this number be $a_n$.\n$$a_n = n! [x^n] G(x) = n! [x^n] \\left( \\frac{1}{4}e^{3x} - \\frac{1}{4}e^{-x} \\right)$$\nUsing the expansion $e^{ax} = \\sum_{k=0}^{\\infty} \\frac{a^k x^k}{k!}$, we find the coefficient of $x^n$:\n$$[x^n] G(x) = \\frac{1}{4} \\frac{3^n}{n!} - \\frac{1}{4} \\frac{(-1)^n}{n!}$$\nTherefore, the number of sequences is:\n$$a_n = n! \\left( \\frac{3^n - (-1)^n}{4n!} \\right) = \\frac{3^n - (-1)^n}{4}$$\nThis is the closed-form expression for the number of such sequences of length $n$.", "answer": "$$\\boxed{\\frac{3^{n}-(-1)^{n}}{4}}$$", "id": "1369372"}, {"introduction": "This final practice presents a problem that elegantly combines two combinatorial actions: assigning properties and then arranging the items. We are asked to count arrangements of distinct books, each colored red or blue, with an odd number of red books. While the final step is a simple permutation, the crucial first step of counting valid color assignments can be modeled cleanly using EGFs, illustrating how this tool can be a key part of a multi-stage solution. [@problem_id:1369393]", "problem": "A librarian is tasked with arranging a set of $n$ unique, newly acquired books on a single, long shelf. Before placing them, each book must be given a sticker, which can be either red or blue. The librarian must create an arrangement of all $n$ books such that the number of books with red stickers is odd. Find a closed-form expression for the total number of distinct arrangements possible, in terms of the positive integer $n$.", "solution": "The problem consists of two independent steps: first, coloring the $n$ distinct books, and second, arranging them on a shelf.\n\n**Step 1: Count the number of valid colorings using EGFs.**\nWe partition the $n$ books into two sets: the set of red-stickered books ($S_R$) and the set of blue-stickered books ($S_B$). The constraint is that the size of $S_R$ must be odd.\nThe EGF for choosing a set of books to be red, with the constraint that the set size must be odd, is:\n$$R(x) = \\sum_{k \\text{ odd}} \\frac{x^k}{k!} = \\sinh(x)$$\nThe EGF for choosing a set of books to be blue, with no size constraint, is:\n$$B(x) = \\sum_{k=0}^{\\infty} \\frac{x^k}{k!} = \\exp(x)$$\nThe total number of ways to partition the $n$ books into a red set and a blue set according to these rules is given by the coefficient of $\\frac{x^n}{n!}$ in the product of the two EGFs:\n$$G(x) = R(x) B(x) = \\sinh(x) \\exp(x) = \\left(\\frac{e^x - e^{-x}}{2}\\right) e^x = \\frac{e^{2x} - 1}{2}$$\nThe number of ways to color the $n$ books, let's call it $c_n$, is the coefficient of $\\frac{x^n}{n!}$ in $G(x)$.\n$$c_n = n! [x^n] \\left(\\frac{1}{2} e^{2x} - \\frac{1}{2}\\right)$$\nFor $n \\ge 1$, the constant term $-\\frac{1}{2}$ does not contribute. Thus:\n$$c_n = n! \\left( \\frac{1}{2} \\frac{2^n}{n!} \\right) = 2^{n-1}$$\nSo, there are $2^{n-1}$ ways to assign colors to the $n$ books.\n\n**Step 2: Arrange the books.**\nFor each of the $c_n = 2^{n-1}$ valid colorings of the $n$ distinct books, there are $n!$ ways to arrange them on the shelf.\n\nThe total number of distinct arrangements is the product of the number of colorings and the number of permutations:\n$$ \\text{Total Arrangements} = c_n \\times n! = 2^{n-1} n! $$", "answer": "$$\\boxed{2^{\\,n-1}n!}$$", "id": "1369393"}]}
{"hands_on_practices": [{"introduction": "The Cook-Levin theorem proof involves constructing a Boolean formula $\\phi$ by assembling smaller logical pieces, each enforcing a rule of the Turing Machine's operation. This exercise guides you through creating an \"exactly-one\" constraint in Conjunctive Normal Form (CNF), a fundamental pattern for ensuring components like tape cells have a unique value at any given time [@problem_id:1405676].", "problem": "In the proof of the Cook-Levin theorem, a polynomial-time non-deterministic Turing Machine (TM) computation is converted into a Boolean satisfiability problem. This is done by constructing a formula $\\phi$ in Conjunctive Normal Form (CNF) that is satisfiable if and only if the TM accepts its input.\n\nConsider a part of this construction for a TM with a tape alphabet $\\Gamma = \\{s_0, s_1, s_B\\}$, where $s_B$ is the blank symbol. The state of the tape is described by a set of Boolean variables $P_{i,j,s}$, where $P_{i,j,s}$ is true if and only if at time step $i$, tape cell $j$ contains the symbol $s$.\n\nOne of the fundamental constraints to enforce is that at any given time, each tape cell must contain exactly one symbol from the alphabet.\n\nFor the specific instance of time step $i=5$ and tape cell $j=2$, let the variables be $A = P_{5,2,s_0}$, $B = P_{5,2,s_1}$, and $C = P_{5,2,s_B}$. Which of the following formulas, written in CNF, correctly expresses the constraint that tape cell 2 holds exactly one symbol from the set $\\{s_0, s_1, s_B\\}$ at time 5?\n\nA. $(A \\lor B \\lor C) \\land (\\neg A \\lor \\neg B) \\land (\\neg A \\lor \\neg C) \\land (\\neg B \\lor \\neg C)$\n\nB. $(A \\lor B \\lor C)$\n\nC. $(\\neg A \\lor \\neg B) \\land (\\neg A \\lor \\neg C) \\land (\\neg B \\lor \\neg C)$\n\nD. $(A \\land B \\land C)$\n\nE. $(A \\lor \\neg B) \\land (\\neg A \\lor C) \\land (B \\lor \\neg C)$", "solution": "We are encoding the Cook-Levin \"exactly one symbol per tape cell at a given time\" constraint using Boolean variables. For time step $i=5$ and tape cell $j=2$, define\n$$\nA = P_{5,2,s_{0}}, \\quad B = P_{5,2,s_{1}}, \\quad C = P_{5,2,s_{B}}.\n$$\nThe requirement that the cell contains exactly one symbol from $\\{s_{0},s_{1},s_{B}\\}$ means:\n1) At least one of $A,B,C$ is true.\n2) At most one of $A,B,C$ is true.\n\nThe \"at least one\" part is the single clause $(A \\lor B \\lor C)$.\n\nThe \"at most one\" part forbids any pair from being simultaneously true, equivalently\n$$\n\\neg(A \\land B), \\quad \\neg(A \\land C), \\quad \\neg(B \\land C),\n$$\nwhich in CNF is $(\\neg A \\lor \\neg B) \\land (\\neg A \\lor \\neg C) \\land (\\neg B \\lor \\neg C)$.\n\nCombining both gives the CNF $(A \\lor B \\lor C) \\land (\\neg A \\lor \\neg B) \\land (\\neg A \\lor \\neg C) \\land (\\neg B \\lor \\neg C)$, which corresponds to option A.\n\nTo confirm the other options are incorrect:\n- B includes only the \"at least one\" part and allows multiple symbols simultaneously.\n- C includes only the \"at most one\" part and allows all three to be false.\n- D forces all three to be true, which violates exclusivity.\n- E is not equivalent to exactly-one; for instance, with $A=\\text{false}$, $B=\\text{false}$, $C=\\text{false}$, each clause in E evaluates as\n$$\nA \\lor \\neg B = \\text{false} \\lor \\text{true} = \\text{true}, \\quad \\neg A \\lor C = \\text{true} \\lor \\text{false} = \\text{true}, \\quad B \\lor \\neg C = \\text{false} \\lor \\text{true} = \\text{true},\n$$\nso E is satisfied even though none of $A,B,C$ is true, violating the \"at least one\" requirement.\n\nTherefore, the correct CNF is option A.", "answer": "$$\\boxed{A}$$", "id": "1405676"}, {"introduction": "To capture a machine's dynamic behavior, its transition function, $\\delta$, must be encoded in logic, a step that relies on the locality of Turing Machine operations. This practice challenges you to think about the reduction as a concrete algorithm, focusing on how to systematically generate the clauses for the $\\phi_{\\text{transition}}$ formula that models how configurations evolve over time [@problem_id:1455986].", "problem": "In the context of the Cook-Levin theorem, we are interested in the polynomial-time reduction from an arbitrary language in the complexity class NP to the Boolean Satisfiability (SAT) problem. This reduction involves constructing a Boolean formula $\\phi$ that is satisfiable if and only if a given Non-deterministic Turing Machine (NDTM) $M$ accepts an input string $w$.\n\nLet the NDTM be $M = (Q, \\Sigma, \\Gamma, \\delta, q_0, q_{\\text{accept}}, q_{\\text{reject}})$, where $Q$ is the set of states, $\\Sigma$ is the input alphabet, $\\Gamma$ is the tape alphabet, $\\delta$ is the transition function, $q_0$ is the start state, and $q_{\\text{accept}}$ and $q_{\\text{reject}}$ are the unique accepting and rejecting states. Assume $M$ halts on all inputs in $p(n)$ steps, where $n = |w|$ and $p$ is a polynomial.\n\nThe computation of $M$ on $w$ is represented by a $p(n) \\times p(n)$ tableau (a grid of cells). To describe the contents of this tableau, a special set of symbols $C = \\Gamma \\cup (Q \\times \\Gamma)$ is used. A symbol $(q, a) \\in (Q \\times \\Gamma)$ in a cell indicates that the tape head is at that position, the machine is in state $q$, and the tape cell contains symbol $a$. A symbol from $\\Gamma$ indicates the tape head is not at that cell.\n\nBoolean variables $y_{i,j,s}$ are defined for $0 \\le i, j  p(n)$ and $s \\in C$. The variable $y_{i,j,s}$ is true if and only if cell $(i, j)$ of the tableau (row $i$, column $j$) contains the symbol $s$.\n\nThe overall Boolean formula $\\phi_{M,w}$ is a conjunction of four parts: $\\phi_{\\text{cell}} \\land \\phi_{\\text{start}} \\land \\phi_{\\text{accept}} \\land \\phi_{\\text{transition}}$. The formula $\\phi_{\\text{transition}}$ is responsible for ensuring that each row of the tableau (a configuration) correctly yields the next row according to the transition function $\\delta$ of the NDTM. The correctness of the symbol in cell $(i+1, j)$ depends only on the symbols in the three cells $(i, j-1)$, $(i, j)$, and $(i, j+1)$. This is known as a 2x3 window.\n\nA Deterministic Turing Machine (DTM) can be constructed to perform this reduction in polynomial time. Which of the following options correctly describes the high-level algorithm that this DTM would use to generate the clauses for the $\\phi_{\\text{transition}}$ part of the formula?\n\nA. For each $i$ from $0$ to $p(n)-2$ and $j$ from $1$ to $p(n)-2$, the algorithm iterates through all 4-tuples of symbols $(s_1, s_2, s_3, s_4)$ from $C$. If the local configuration where a 2x3 window with contents $s_1, s_2, s_3$ at time $i$ yields the symbol $s_4$ in the cell below its center at time $i+1$ is **forbidden** by the transition function $\\delta$, the algorithm outputs the clause $(\\neg y_{i,j-1,s_1} \\lor \\neg y_{i,j,s_2} \\lor \\neg y_{i,j+1,s_3} \\lor \\neg y_{i+1,j,s_4})$.\n\nB. For each $i$ from $0$ to $p(n)-2$ and $j$ from $0$ to $p(n)-1$, the algorithm considers the 2x2 window of cells $(i,j)$ and $(i+1,j)$. It iterates through all pairs of symbols $(s_1, s_2)$ from $C$. If a transition from a cell containing $s_1$ to a cell containing $s_2$ is not a valid move according to $\\delta$, it outputs the clause $(\\neg y_{i,j,s_1} \\lor \\neg y_{i+1,j,s_2})$.\n\nC. For each $i$ from $0$ to $p(n)-2$, the algorithm checks every possible complete configuration for row $i$ against every possible complete configuration for row $i+1$. If the transition from the configuration of row $i$ to the configuration of row $i+1$ is **illegal** according to $\\delta$, it generates a single, complex clause that forbids this pair of entire row configurations from occurring consecutively.\n\nD. For each $i$ from $0$ to $p(n)-2$ and $j$ from $1$ to $p(n)-2$, the algorithm iterates through all 4-tuples of symbols $(s_1, s_2, s_3, s_4)$ from $C$. If the local configuration where a 2x3 window with contents $s_1, s_2, s_3$ at time $i$ yields $s_4$ at time $i+1$ is a **legal** transition according to $\\delta$, the algorithm outputs the clause $(y_{i,j-1,s_1} \\lor y_{i,j,s_2} \\lor y_{i,j+1,s_3} \\lor y_{i+1,j,s_4})$.", "solution": "We begin by restating the constraint that defines the transition subformula. Let $C=\\Gamma \\cup (Q \\times \\Gamma)$ and let the tableau be indexed by time $i \\in \\{0,\\ldots,p(n)-1\\}$ and tape position $j \\in \\{0,\\ldots,p(n)-1\\}$. For each cell $(i,j)$ and each $s \\in C$, the Boolean variable $y_{i,j,s}$ means that cell $(i,j)$ contains symbol $s$. The intended local consistency condition is that the symbol in $(i+1,j)$ is determined solely by the three symbols in the 2x3 window above, i.e., in $(i,j-1)$, $(i,j)$, and $(i,j+1)$, according to the transition function $\\delta$ and the definition of $C$.\n\nFormally, define the set of locally permitted quadruples\n$$\nT \\subseteq C^{4}\n$$\nwhere $(s_{1},s_{2},s_{3},s_{4}) \\in T$ if and only if placing $s_{1}$, $s_{2}$, $s_{3}$ in cells $(i,j-1)$, $(i,j)$, $(i,j+1)$ at time $i$ can legally yield $s_{4}$ in cell $(i+1,j)$ at time $i+1$ under the instantaneous description update induced by $\\delta$.\n\nTo enforce that only permitted local patterns occur, we forbid every illegal local pattern. For each time $i \\in \\{0,\\ldots,p(n)-2\\}$ and position $j \\in \\{1,\\ldots,p(n)-2\\}$ (interior positions so that the 2x3 window is defined), and for each quadruple $(s_{1},s_{2},s_{3},s_{4}) \\in C^{4} \\setminus T$, we add the clause that rules out the conjunction that all four corresponding literals hold simultaneously. The illegal conjunction is\n$$\ny_{i,j-1,s_{1}} \\land y_{i,j,s_{2}} \\land y_{i,j+1,s_{3}} \\land y_{i+1,j,s_{4}},\n$$\nso by the distributive form of De Morgan’s laws, its negation in conjunctive normal form is the single clause\n$$\n\\neg y_{i,j-1,s_{1}} \\lor \\neg y_{i,j,s_{2}} \\lor \\neg y_{i,j+1,s_{3}} \\lor \\neg y_{i+1,j,s_{4}}.\n$$\nConjoining all such clauses over all $i$, $j$, and all $(s_{1},s_{2},s_{3},s_{4}) \\notin T$ yields exactly the $\\phi_{\\text{transition}}$ part that enforces local consistency with $\\delta$. The number of clauses produced is polynomial in $p(n)$ and $|C|$ (specifically $O(p(n)^{2} |C|^{4})$), so a deterministic Turing machine can generate them in polynomial time.\n\nWe now compare the options:\n\nOption A exactly implements the above “forbid every illegal local 2x3 pattern” method by emitting, for each forbidden $(s_{1},s_{2},s_{3},s_{4})$, the clause\n$$\n\\neg y_{i,j-1,s_{1}} \\lor \\neg y_{i,j,s_{2}} \\lor \\neg y_{i,j+1,s_{3}} \\lor \\neg y_{i+1,j,s_{4}},\n$$\nwith $i \\in \\{0,\\ldots,p(n)-2\\}$ and $j \\in \\{1,\\ldots,p(n)-2\\}$. This matches the standard Cook–Levin construction.\n\nOption B uses only a 2x2 window and ignores the dependence on the neighboring cells $(i,j-1)$ and $(i,j+1)$. This is insufficient to capture head movement and simultaneous symbol/state updates, so it does not correctly encode $\\delta$.\n\nOption C attempts to compare entire rows, generating clauses that forbid pairs of complete configurations. Enumerating all row configurations is exponential in $p(n)$, so this is not a polynomial-time reduction.\n\nOption D adds a clause with positive literals for each legal quadruple. A clause of the form\n$$\ny_{i,j-1,s_{1}} \\lor y_{i,j,s_{2}} \\lor y_{i,j+1,s_{3}} \\lor y_{i+1,j,s_{4}}\n$$\nis far too weak: it is typically satisfied regardless of whether the specific local pattern occurs, and, even when conjoined over all legal quadruples, it does not forbid any illegal combination. The standard CNF encoding forbids illegal patterns instead.\n\nTherefore, the correct high-level algorithm is the one described in Option A.", "answer": "$$\\boxed{A}$$", "id": "1455986"}, {"introduction": "A key strength of the Cook-Levin theorem's proof is that its encoding technique can be generalized to different computational models. This exercise [@problem_id:1456015] challenges you to adapt the standard construction to a two-tape Turing Machine, forcing you to reason from first principles about how to define a set of variables that can capture a more complex machine's complete configuration.", "problem": "In the context of computational complexity, we often want to prove a problem is NP-complete by showing that a Non-deterministic Turing Machine (NTM) can be represented by a propositional logic formula. This involves creating a set of propositional variables that can fully describe the machine's configuration at every step of its computation.\n\nConsider a specific type of NTM that uses two independent, infinite, read/write tapes, which we'll call Tape 1 and Tape 2. The input string of length $n$ is initially written on Tape 1, and Tape 2 is initially blank. The machine's transition function is of the form $\\delta(q, \\sigma_1, \\sigma_2) \\to \\{(q', \\sigma'_1, \\sigma'_2, D_1, D_2), ...\\}$, where $q$ is the current state, $\\sigma_1$ and $\\sigma_2$ are the symbols read from Tape 1 and Tape 2 respectively, and in the resulting new state $q'$, the machine writes symbols $\\sigma'_1$ and $\\sigma'_2$ and moves the heads on each tape according to directions $D_1, D_2 \\in \\{\\text{Left, Right}\\}$. The machine is guaranteed to halt within $p(n)$ steps, where $p(n)$ is a polynomial in $n$.\n\nA standard construction for a single-tape NTM uses variables to encode the machine's state ($Q_{q,t}$), the head's position ($H_{i,t}$), and the symbol in each tape cell ($S_{i,\\sigma,t}$) at each time step $t$. How must this set of variables be expanded to correctly and directly model the configuration of the two-tape NTM described above?\n\nA. Add a second set of head-position variables, one for each tape. The original single set of tape-cell variables is sufficient, as the machine's state dictates which tape is being modified.\n\nB. Add a second set of head-position variables (one for each tape) and a second, independent set of tape-cell-content variables (one for each tape).\n\nC. Augment the state variables to indicate the active tape, for example, $Q_{q,k,t}$ where $k \\in \\{1, 2\\}$, and augment the head-position variables to indicate the active tape. The tape-cell variables do not need to be changed.\n\nD. Keep the state variables the same, but create new variable types that encode pairs of values, such as a variable for the pair of head positions $(i_1, i_2)$ and a variable for the pair of symbols $(\\sigma_1, \\sigma_2)$ being read.\n\nE. No new types of variables are needed. The two tapes can be modeled as a single, combined tape, and the standard set of variables can be used on this larger tape.", "solution": "The core task is to define a set of propositional variables that can uniquely describe the complete configuration of the two-tape Non-deterministic Turing Machine (NTM) at any time step $t$ during its computation, up to a polynomial time bound $T=p(n)$ and a polynomial space bound $S=p(n)$. A complete configuration, also known as an Instantaneous Description (ID), must capture everything about the machine's state.\n\nFor the specified two-tape NTM, a configuration at time $t$ consists of:\n1.  The machine's current state.\n2.  The position of the head on Tape 1.\n3.  The position of the head on Tape 2.\n4.  The entire contents of Tape 1.\n5.  The entire contents of Tape 2.\n\nWe need to create propositional variables that represent each of these components. Let's analyze the requirements for each component based on the standard single-tape construction. The indices for time $t$ will range from $0$ to $T$, and indices for tape position $i$ will range from $0$ to $S$.\n\n**1. Machine State:**\nThe machine has a single finite set of states. At any time $t$, it is in exactly one state. This is identical to the single-tape case. We can define the variables:\n$Q_{q,t}$ is true if and only if the machine is in state $q$ at time $t$. This part of the variable set does not change.\n\n**2. Head Positions:**\nThe machine has two independent heads, one for each tape. The position of the head on Tape 1 is independent of the position of the head on Tape 2. To capture this, we cannot use a single set of head-position variables. We need one set for each head.\nLet's define them as:\n- $H_{1,i,t}$ is true if and only if the head of Tape 1 is at position $i$ at time $t$.\n- $H_{2,i,t}$ is true if and only if the head of Tape 2 is at position $i$ at time $t$.\nTherefore, we must introduce a second, distinct set of head-position variables to track the second head.\n\n**3. Tape Contents:**\nThe two tapes are independent read/write tapes. The contents of Tape 1 can change at each step based on the transition function, and independently, the contents of Tape 2 can also change. A single set of variables $S_{i,\\sigma,t}$ is insufficient because it cannot distinguish between \"cell $i$ on Tape 1 has symbol $\\sigma$\" and \"cell $i$ on Tape 2 has symbol $\\sigma$\". To correctly model the system, we need to track the contents of each tape separately.\nWe define two sets of variables for the tape cell contents:\n- $S_{1,i,\\sigma,t}$ is true if and only if cell $i$ of Tape 1 contains the symbol $\\sigma$ at time $t$.\n- $S_{2,i,\\sigma,t}$ is true if and only if cell $i$ of Tape 2 contains the symbol $\\sigma$ at time $t$.\nThis means we must also introduce a second, independent set of tape-cell-content variables.\n\n**Conclusion:**\nTo directly model the two-tape NTM, we must augment the single-tape variable set by adding a new set of variables for the second head's position and a new set of variables for the second tape's contents. This corresponds to choice B.\n\nLet's review the other options:\n- **A** is incorrect because the tape contents evolve independently. A single set of cell-content variables cannot capture the distinct strings on the two tapes.\n- **C** is incorrect because the NTM has a single central state, not a state \"per tape\". The transition function depends on the single state and symbols from all tapes.\n- **D** is incorrect because propositional variables are atomic (they are simply true or false). They cannot encode composite structures like pairs. One would need a much more complex set of variables to represent a pair, which would ultimately be equivalent to having two separate sets of variables.\n- **E** describes a method for *simulating* a multi-tape machine on a single-tape machine. While this simulation is possible, the problem asks for a *direct* modeling of the two-tape machine's configuration for the construction of the propositional formula. The Cook-Levin theorem proof constructs the formula based on the machine's actual definition, not a simulation of it. Therefore, this is not the correct approach for the direct construction.", "answer": "$$\\boxed{B}$$", "id": "1456015"}]}
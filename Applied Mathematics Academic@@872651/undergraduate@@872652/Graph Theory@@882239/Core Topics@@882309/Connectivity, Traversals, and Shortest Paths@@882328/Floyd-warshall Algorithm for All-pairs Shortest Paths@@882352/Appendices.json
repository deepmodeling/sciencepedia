{"hands_on_practices": [{"introduction": "The best way to understand an algorithm is to run it by hand. This first exercise guides you through the core mechanical steps of the Floyd-Warshall algorithm, allowing you to see how the distance matrix is iteratively updated. By tracing the first two iterations, you'll gain a concrete feel for how the algorithm systematically considers intermediate vertices to find shorter paths [@problem_id:1504965].", "problem": "Consider a weighted directed graph with 4 vertices, labeled 1, 2, 3, and 4. The costs of the direct paths between any two vertices are given by an initial distance matrix $D^{(0)}$. In this matrix, the element $D^{(0)}_{ij}$ represents the weight of the directed edge from vertex $i$ to vertex $j$. If no direct edge exists from $i$ to $j$, the weight is considered infinite ($\\infty$). The self-distance $D^{(0)}_{ii}$ is 0 for all vertices.\n\nThe initial distance matrix $D^{(0)}$ is given as:\n$$ D^{(0)} = \\begin{pmatrix} 0  4  \\infty  7 \\\\ \\infty  0  1  \\infty \\\\ 6  \\infty  0  2 \\\\ 3  -2  \\infty  0 \\end{pmatrix} $$\n\nThe Floyd-Warshall algorithm computes the all-pairs shortest paths by iteratively updating this matrix. In the $k$-th iteration (for $k=1, 2, \\dots, 4$), the algorithm considers paths that use vertex $k$ as an intermediate vertex to potentially find a shorter path between any two vertices $i$ and $j$.\n\nStarting with the given matrix $D^{(0)}$, perform the first two iterations of the Floyd-Warshall algorithm to compute the matrices $D^{(1)}$ (using $k=1$) and $D^{(2)}$ (using $k=2$). Your task is to determine the final state of the distance matrix after the second iteration, $D^{(2)}$.", "solution": "We use the Floyd-Warshall update rule: for each iteration $k$ and for all $i,j$,\n$$\nD^{(k)}_{ij}=\\min\\left(D^{(k-1)}_{ij},\\,D^{(k-1)}_{ik}+D^{(k-1)}_{kj}\\right).\n$$\nGiven\n$$\nD^{(0)}=\\begin{pmatrix}\n0  4  \\infty  7\\\\\n\\infty  0  1  \\infty\\\\\n6  \\infty  0  2\\\\\n3  -2  \\infty  0\n\\end{pmatrix},\n$$\nwe perform the first iteration with $k=1$, using $D^{(1)}_{ij}=\\min\\left(D^{(0)}_{ij},\\,D^{(0)}_{i1}+D^{(0)}_{1j}\\right)$.\n\nFor $i=1$:\n- $j=1$: $\\min(0,\\,0+0)=0$.\n- $j=2$: $\\min(4,\\,0+4)=4$.\n- $j=3$: $\\min(\\infty,\\,0+\\infty)=\\infty$.\n- $j=4$: $\\min(7,\\,0+7)=7$.\n\nFor $i=2$ (since $D^{(0)}_{21}=\\infty$, all via $1$ are $\\infty$):\n- $j=1$: $\\min(\\infty,\\,\\infty)=\\infty$.\n- $j=2$: $\\min(0,\\,\\infty)=0$.\n- $j=3$: $\\min(1,\\,\\infty)=1$.\n- $j=4$: $\\min(\\infty,\\,\\infty)=\\infty$.\n\nFor $i=3$ (with $D^{(0)}_{31}=6$):\n- $j=1$: $\\min(6,\\,6+0)=6$.\n- $j=2$: $\\min(\\infty,\\,6+4)=10$.\n- $j=3$: $\\min(0,\\,6+\\infty)=0$.\n- $j=4$: $\\min(2,\\,6+7)=2$.\n\nFor $i=4$ (with $D^{(0)}_{41}=3$):\n- $j=1$: $\\min(3,\\,3+0)=3$.\n- $j=2$: $\\min(-2,\\,3+4)=-2$.\n- $j=3$: $\\min(\\infty,\\,3+\\infty)=\\infty$.\n- $j=4$: $\\min(0,\\,3+7)=0$.\n\nThus\n$$\nD^{(1)}=\\begin{pmatrix}\n0  4  \\infty  7\\\\\n\\infty  0  1  \\infty\\\\\n6  10  0  2\\\\\n3  -2  \\infty  0\n\\end{pmatrix}.\n$$\n\nNext, perform the second iteration with $k=2$, using $D^{(2)}_{ij}=\\min\\left(D^{(1)}_{ij},\\,D^{(1)}_{i2}+D^{(1)}_{2j}\\right)$.\n\nFor $i=1$ (with $D^{(1)}_{12}=4$):\n- $j=1$: $\\min(0,\\,4+\\infty)=0$.\n- $j=2$: $\\min(4,\\,4+0)=4$.\n- $j=3$: $\\min(\\infty,\\,4+1)=5$.\n- $j=4$: $\\min(7,\\,4+\\infty)=7$.\n\nFor $i=2$ (with $D^{(1)}_{22}=0$):\n- $j=1$: $\\min(\\infty,\\,0+\\infty)=\\infty$.\n- $j=2$: $\\min(0,\\,0+0)=0$.\n- $j=3$: $\\min(1,\\,0+1)=1$.\n- $j=4$: $\\min(\\infty,\\,0+\\infty)=\\infty$.\n\nFor $i=3$ (with $D^{(1)}_{32}=10$):\n- $j=1$: $\\min(6,\\,10+\\infty)=6$.\n- $j=2$: $\\min(10,\\,10+0)=10$.\n- $j=3$: $\\min(0,\\,10+1)=0$.\n- $j=4$: $\\min(2,\\,10+\\infty)=2$.\n\nFor $i=4$ (with $D^{(1)}_{42}=-2$):\n- $j=1$: $\\min(3,\\, -2+\\infty)=3$.\n- $j=2$: $\\min(-2,\\, -2+0)=-2$.\n- $j=3$: $\\min(\\infty,\\, -2+1)=-1$.\n- $j=4$: $\\min(0,\\, -2+\\infty)=0$.\n\nTherefore, the matrix after the second iteration is\n$$\nD^{(2)}=\\begin{pmatrix}\n0  4  5  7\\\\\n\\infty  0  1  \\infty\\\\\n6  10  0  2\\\\\n3  -2  -1  0\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}0  4  5  7 \\\\ \\infty  0  1  \\infty \\\\ 6  10  0  2 \\\\ 3  -2  -1  0\\end{pmatrix}}$$", "id": "1504965"}, {"introduction": "Once you're comfortable with the mechanics, it's helpful to think about the algorithm more abstractly. Instead of performing every calculation, this practice asks you to predict where updates are *possible* during a specific iteration. This helps you develop a deeper intuition for the algorithm's logic, specifically how the choice of an intermediate vertex $k$ limits the potential for path improvements [@problem_id:1504989].", "problem": "The Floyd-Warshall algorithm is a classic method for finding the shortest paths between all pairs of vertices in a weighted directed graph. Let the vertices be labeled from $1$ to $n$. The algorithm iteratively computes a series of matrices $D^{(0)}, D^{(1)}, \\dots, D^{(n)}$. The matrix $D^{(k)}$ stores the lengths of the shortest paths between any two vertices $i$ and $j$, with the constraint that any intermediate vertices on the path must belong to the set $\\{1, 2, \\dots, k\\}$. The initial matrix $D^{(0)}$ is the weight matrix of the graph. The core update step of the algorithm is given by:\n\n$$D^{(k)}[i, j] = \\min(D^{(k-1)}[i, j], D^{(k-1)}[i, k] + D^{(k-1)}[k, j])$$\n\nConsider a directed graph with 5 vertices, labeled $\\{1, 2, 3, 4, 5\\}$. The weight matrix $W$ (which is equivalent to $D^{(0)}$) of the graph is given below, where an entry $W[i, j]$ represents the weight of the directed edge from vertex $i$ to vertex $j$. A value of $\\infty$ indicates that there is no direct edge.\n\n$$\nW = \n\\begin{pmatrix}\n0  \\infty  10  \\infty  \\infty \\\\\n2  0  \\infty  \\infty  \\infty \\\\\n\\infty  \\infty  0  3  8 \\\\\n\\infty  \\infty  \\infty  0  1 \\\\\n\\infty  2  \\infty  \\infty  0\n\\end{pmatrix}\n$$\n\nDuring the execution of the Floyd-Warshall algorithm on this graph, an update to the distance $D[i, j]$ occurs at step $k=3$ if $D^{(3)}[i, j]  D^{(2)}[i, j]$. Identify the complete set of pairs $(i, j)$ for which such an update is *potentially* possible.\n\nA. $\\{(1, 4), (1, 5), (2, 4), (2, 5), (5, 4), (5, 5)\\}$\n\nB. $\\{(1, 4), (1, 5)\\}$\n\nC. $\\{(1, 4), (1, 5), (2, 4), (2, 5)\\}$\n\nD. $\\{(i, j) \\mid i, j \\in \\{1, 2, 4, 5\\}\\}$\n\nE. $\\{(1, 2), (1, 4), (1, 5), (2, 4), (2, 5), (5, 1), (5, 4), (5, 5)\\}$", "solution": "The Floyd-Warshall update at step $k=3$ uses\n$$\nD^{(3)}[i,j] = \\min\\left(D^{(2)}[i,j],\\; D^{(2)}[i,3] + D^{(2)}[3,j]\\right).\n$$\nFor an update with strict improvement to be even possible at $k=3$, the via-vertex-3 term must be well-defined; thus we require $D^{(2)}[i,3]  \\infty$ and $D^{(2)}[3,j]  \\infty$. Moreover, if $i=3$ or $j=3$, then\n$$\nD^{(2)}[3,3]=0 \\quad\\Rightarrow\\quad D^{(2)}[i,3]+D^{(2)}[3,j] = D^{(2)}[i,j],\n$$\nso no strict improvement can occur. Hence we focus on $i \\neq 3$ and $j \\neq 3$ with both legs finite.\n\nCompute the needed $D^{(2)}$ entries (intermediates only from $\\{1,2\\}$):\n- From $i$ to $3$:\n  - $D^{(2)}[1,3] = 10$ (direct).\n  - $D^{(2)}[2,3] = D^{(2)}[2,1] + D^{(2)}[1,3] = 2 + 10 = 12$.\n  - $D^{(2)}[5,3] = D^{(2)}[5,2] + D^{(2)}[2,1] + D^{(2)}[1,3] = 2 + 2 + 10 = 14$.\n  - $D^{(2)}[4,3] = \\infty$ (any route uses $4$ or $5$ as intermediates, which are not allowed at $k=2$).\n- From $3$ to $j$:\n  - $D^{(2)}[3,4] = 3$ (direct).\n  - $D^{(2)}[3,5] = 8$ (direct).\n  - $D^{(2)}[3,1] = \\infty$, $D^{(2)}[3,2] = \\infty$ (no path using only $\\{1,2\\}$ as intermediates).\n\nThus the pairs with both $D^{(2)}[i,3]$ and $D^{(2)}[3,j]$ finite (and $i \\neq 3$, $j \\neq 3$) are\n$$\n(i,j) \\in \\{(1,4), (1,5), (2,4), (2,5), (5,4), (5,5)\\}.\n$$\nThese are exactly the entries for which an update at $k=3$ is potentially possible via vertex $3$ (the algorithm will consider the via-$3$ path). In this specific graph, the strict improvement actually occurs for all listed pairs except $(5,5)$; however, the complete set of potentially possible updates at step $k=3$ is the set above, which corresponds to option A.", "answer": "$$\\boxed{A}$$", "id": "1504989"}, {"introduction": "This final practice moves beyond the standard algorithm to a 'what-if' scenario that tests your conceptual understanding of shortest paths. By analyzing the effect of uniformly increasing all edge weights, you'll discover that the shortest path itself can change, revealing a deeper principle about path length versus the number of edges. This exercise challenges common assumptions and strengthens your analytical problem-solving skills in graph theory [@problem_id:1504949].", "problem": "Consider a weighted, directed graph $G = (V, E)$ with a weight function $w: E \\to \\mathbb{R}$ for its edges. The graph has no negative-weight cycles. The all-pairs shortest path distance matrix for this graph contains entries $d(u, v)$ for all pairs of vertices $(u, v) \\in V \\times V$, representing the minimum possible sum of edge weights along a path from $u$ to $v$.\n\nNow, let's construct a new graph $G'$ on the same set of vertices and edges, but with a new weight function $w'$. For a given positive constant $c  0$, the new weight of every edge is defined as $w'(u, v) = w(u, v) + c$. Let $d'(u, v)$ be the shortest path distance from $u$ to $v$ in this new graph $G'$.\n\nFurthermore, let's define $d_k(u, v)$ as the weight of the shortest path from vertex $u$ to vertex $v$ in the original graph $G$ that contains *exactly* $k$ edges. If no path with exactly $k$ edges exists between $u$ and $v$, we consider $d_k(u, v)$ to be infinite.\n\nWhich of the following expressions correctly relates the new shortest path distance $d'(u, v)$ to the properties of the original graph $G$?\n\nA. $d'(u, v) = d(u, v) + c$\n\nB. $d'(u, v) = d(u, v) \\cdot (1 + c)$\n\nC. $d'(u, v) = d(u, v) + k_{uv} \\cdot c$, where $k_{uv}$ is the number of edges on a shortest path from $u$ to $v$ in the original graph $G$.\n\nD. The shortest paths in $G'$ are the same set of paths as in $G$, just with their total weights increased.\n\nE. $d'(u, v) = \\min_{k \\ge 1} \\{ d_k(u,v) + k \\cdot c \\}$", "solution": "Let $P$ be any directed path from $u$ to $v$ in $G$ using exactly $k$ edges $e_{1},\\dots,e_{k}$. Its total weight in $G$ is\n$$\nw(P)=\\sum_{i=1}^{k} w(e_{i}).\n$$\nIn $G'$ each edge weight is shifted by $c0$, so the total weight of the same path $P$ in $G'$ is\n$$\nw'(P)=\\sum_{i=1}^{k} \\big(w(e_{i})+c\\big)=\\sum_{i=1}^{k} w(e_{i})+kc=w(P)+kc.\n$$\n\nBy definition, the shortest path distance in $G'$ is\n$$\nd'(u,v)=\\min_{P:u\\to v} w'(P)=\\min_{P:u\\to v} \\big(w(P)+k(P)\\,c\\big),\n$$\nwhere $k(P)$ denotes the number of edges on $P$. Grouping paths by their edge count $k$ and using the definition of $d_{k}(u,v)$ as the minimum weight among $k$-edge $u\\to v$ paths (with $d_{k}(u,v)=\\infty$ if none exists), we obtain\n$$\nd'(u,v)=\\min_{k\\ge 1}\\left(\\min_{P:u\\to v,\\ |P|=k} w(P)+k\\,c\\right)=\\min_{k\\ge 1}\\big(d_{k}(u,v)+k\\,c\\big).\n$$\nThis establishes option E.\n\nWe now assess the other options:\n\n- A: $d'(u,v)=d(u,v)+c$ would ignore the dependence on the number of edges; since each edge incurs an additional $c$, the increment depends on $k$, so A is false in general.\n\n- B: $d'(u,v)=d(u,v)\\cdot(1+c)$ is a multiplicative scaling, whereas the transformation is additive per edge; thus B is false.\n\n- C: $d'(u,v)=d(u,v)+k_{uv}\\,c$, where $k_{uv}$ is the edge count of a shortest $u\\to v$ path in $G$, can fail because after adding $c$ per edge a different path with a different number of edges may become optimal; thus C is false in general.\n\n- D: The set of shortest paths need not remain the same, because adding $c$ per edge favors paths with fewer edges; thus D is false in general.\n\nTherefore, only E correctly characterizes $d'(u,v)$.", "answer": "$$\\boxed{E}$$", "id": "1504949"}]}
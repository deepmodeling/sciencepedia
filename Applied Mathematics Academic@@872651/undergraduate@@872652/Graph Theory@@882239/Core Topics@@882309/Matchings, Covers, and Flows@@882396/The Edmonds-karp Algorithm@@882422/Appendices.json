{"hands_on_practices": [{"introduction": "To build a solid foundation, our first practice involves manually tracing the core mechanics of the Edmonds-Karp algorithm. This exercise requires you to perform the first two augmentations on a simple network, focusing on how Breadth-First Search (BFS) is used to systematically find the shortest augmenting path. By stepping through the process of identifying paths and updating the residual graph, you will gain a concrete understanding of the algorithm's fundamental operations [@problem_id:1540089].", "problem": "An intelligence agency is analyzing a communication network represented by a directed graph. The nodes are operatives, and the directed edges represent secure one-way communication channels. The capacity of each channel is exactly one data packet per unit of time. The agency wants to determine the data flow from a source operative, 'HQ', to a target operative, 'Target'.\n\nThe network is defined by the following channels (edges):\n- HQ to Alpha\n- HQ to Bravo\n- Alpha to Charlie\n- Alpha to Delta\n- Bravo to Alpha\n- Bravo to Delta\n- Charlie to Target\n- Delta to Echo\n- Echo to Charlie\n- Echo to Target\n\nYou are tasked with analyzing the flow using the Edmonds-Karp algorithm, which finds augmenting paths via a Breadth-First Search (BFS) on the residual graph. Assume that when the BFS must choose between multiple nodes at the same distance from the source to add to its queue, it adds them in lexicographical (alphabetical) order.\n\nCalculate the total flow from HQ to Target after the first two path augmentations have been completed.", "solution": "We model the problem as a unit-capacity directed network and apply the Edmonds-Karp algorithm, which repeatedly finds a shortest augmenting path from the source to the sink via a BFS in the residual graph, breaking ties among equally distant nodes in lexicographical order.\n\nAll capacities are $1$, so for any simple $s$–$t$ path in the residual graph, the bottleneck (minimum residual capacity along the path) is $1$. We denote the residual capacity by $c_{r}(\\cdot,\\cdot)$.\n\nInitial residual graph equals the given graph. Perform the first BFS from HQ:\n- Start with HQ in the queue. From HQ, the residual neighbors are Alpha and Bravo; enqueue in alphabetical order: Alpha, then Bravo. Parents set: $\\text{parent}(\\text{Alpha})=\\text{HQ}$, $\\text{parent}(\\text{Bravo})=\\text{HQ}$.\n- Dequeue Alpha. Its residual neighbors are Charlie and Delta; enqueue Charlie, then Delta. Set $\\text{parent}(\\text{Charlie})=\\text{Alpha}$, $\\text{parent}(\\text{Delta})=\\text{Alpha}$.\n- Dequeue Bravo. Its neighbors Alpha and Delta are already discovered; no change.\n- Dequeue Charlie. Its residual neighbor Target is discovered; set $\\text{parent}(\\text{Target})=\\text{Charlie}$ and stop BFS.\n\nThe first augmenting path is HQ → Alpha → Charlie → Target. The augmentation amount is\n$$\n\\Delta f_{1}=\\min\\{c_{r}(\\text{HQ},\\text{Alpha}),\\,c_{r}(\\text{Alpha},\\text{Charlie}),\\,c_{r}(\\text{Charlie},\\text{Target})\\}=1.\n$$\nUpdate the residual graph along these edges: each used forward edge gets residual capacity $0$ and a unit-capacity reverse edge is created.\n\nPerform the second BFS on the updated residual graph:\n- From HQ, only Bravo has positive residual capacity; enqueue Bravo. Set $\\text{parent}(\\text{Bravo})=\\text{HQ}$.\n- Dequeue Bravo. Its residual neighbors are Alpha and Delta; enqueue Alpha, then Delta. Set $\\text{parent}(\\text{Alpha})=\\text{Bravo}$, $\\text{parent}(\\text{Delta})=\\text{Bravo}$.\n- Dequeue Alpha. Its residual neighbors include Delta (forward) and HQ (reverse), but Delta is already discovered and HQ is the source; no new nodes enqueued.\n- Dequeue Delta. Its residual neighbor Echo is enqueued. Set $\\text{parent}(\\text{Echo})=\\text{Delta}$.\n- Dequeue Echo. Its residual neighbors are Charlie and Target; enqueue Charlie, then Target. Upon discovering Target, set $\\text{parent}(\\text{Target})=\\text{Echo}$ and stop BFS.\n\nThe second augmenting path is HQ → Bravo → Delta → Echo → Target. The augmentation amount is\n$$\n\\Delta f_{2}=\\min\\{c_{r}(\\text{HQ},\\text{Bravo}),\\,c_{r}(\\text{Bravo},\\text{Delta}),\\,c_{r}(\\text{Delta},\\text{Echo}),\\,c_{r}(\\text{Echo},\\text{Target})\\}=1.\n$$\n\nAfter completing these two augmentations, the total flow value from HQ to Target is\n$$\n|f|=\\Delta f_{1}+\\Delta f_{2}=1+1=2.\n$$", "answer": "$$\\boxed{2}$$", "id": "1540089"}, {"introduction": "This next problem reveals one of the most elegant features of max-flow algorithms: the ability to correct and improve upon existing flow paths. You will start with a non-optimal flow and discover how the Edmonds-Karp algorithm uses backward edges in the residual graph to find a new augmenting path. This exercise is crucial for understanding how the algorithm can \"undo\" a suboptimal decision to ultimately achieve the maximum possible flow, illustrating the power of the residual graph concept [@problem_id:1540106].", "problem": "Consider a flow network represented by a directed graph $G = (V, E)$, where the set of vertices is $V = \\{s, t, a, b\\}$. The vertex $s$ is the source and $t$ is the sink. The network has five directed edges with the following integer capacities:\n- $c(s, a) = 20$\n- $c(s, b) = 20$\n- $c(b, a) = 20$\n- $c(a, t) = 20$\n- $c(b, t) = 20$\n\nAn initial, non-zero flow $f$ is established in the network. This flow consists of 20 units sent along the path $s \\rightarrow b \\rightarrow a \\rightarrow t$. That is, $f(s, b) = 20$, $f(b, a) = 20$, and $f(a, t) = 20$. The flow on all other edges is zero. The total value of this initial flow is $|f|=20$.\n\nStarting from this initial flow $f$, the Edmonds-Karp algorithm is applied to find the maximum flow from $s$ to $t$. The first step of the algorithm is to find an augmenting path in the residual graph $G_f$ using a Breadth-First Search (BFS) starting from the source $s$.\n\nDetermine the amount of flow that will be sent along this first augmenting path. Express your answer as an integer.", "solution": "We use the standard residual network construction for a flow $f$ on a capacity graph $(G,c)$. For each directed edge $(u,v)\\in E$ with capacity $c(u,v)$ and current flow $f(u,v)$, the residual capacities are defined by:\n- Forward residual capacity $r_{f}(u,v) = c(u,v) - f(u,v)$.\n- Backward residual capacity $r_{f}(v,u) = f(u,v)$.\n\nThe given capacities and initial flow are:\n- $c(s,a)=20$, $f(s,a)=0$.\n- $c(s,b)=20$, $f(s,b)=20$.\n- $c(b,a)=20$, $f(b,a)=20$.\n- $c(a,t)=20$, $f(a,t)=20$.\n- $c(b,t)=20$, $f(b,t)=0$.\n\nCompute residual capacities:\n- From $s$: $r_{f}(s,a)=20-0=20$, $r_{f}(s,b)=20-20=0$.\n- From $a$: $r_{f}(a,t)=20-20=0$, and the backward residual to $b$ is $r_{f}(a,b)=f(b,a)=20$; also $r_{f}(a,s)=f(s,a)=0$.\n- From $b$: $r_{f}(b,t)=20-0=20$, $r_{f}(b,a)=20-20=0$, and the backward to $s$ is $r_{f}(b,s)=f(s,b)=20$.\n- From $t$: $r_{f}(t,a)=f(a,t)=20$, $r_{f}(t,b)=f(b,t)=0$.\n\nEdmonds-Karp runs a BFS from $s$ over edges with positive residual capacity. Starting at $s$, the only neighbor with positive residual is $a$ via $s \\rightarrow a$. From $a$, the only outgoing residual edge with positive capacity is to $b$ via the backward edge $a \\rightarrow b$. From $b$, there is a forward residual edge to $t$ with positive capacity $b \\rightarrow t$. Therefore, the shortest augmenting path found by BFS is:\n$$\ns \\rightarrow a \\rightarrow b \\rightarrow t.\n$$\nThe augmenting amount is the bottleneck (minimum residual capacity) along this path:\n$$\n\\Delta = \\min\\{r_{f}(s,a),\\, r_{f}(a,b),\\, r_{f}(b,t)\\} = \\min\\{20,\\, 20,\\, 20\\} = 20.\n$$\nThus, the first augmenting path carries $20$ units of additional flow.", "answer": "$$\\boxed{20}$$", "id": "1540106"}, {"introduction": "Moving into a more dynamic and practical scenario, this final practice explores how to efficiently update a maximum flow after a network change. Instead of re-computing the solution from scratch when an edge capacity decreases, you will learn a method to adjust the existing flow by rerouting the now-excess flow using the residual graph. This demonstrates the algorithm's application in realistic settings where network conditions are not static and highlights a more advanced use of flow concepts for efficient problem-solving [@problem_id:1540154].", "problem": "A distributed computing network is modeled as a directed graph where nodes are servers and edges are communication links. The capacity of each link, given in Terabits per second (Tbps), represents its maximum data transfer rate. A crucial data synchronization task requires sending the maximum possible data rate from a source server, $S$, to a target server, $T$.\n\nThe network consists of six servers: $S, A, B, C, D, T$. The links and their capacities are defined as follows:\n- $c(S, A) = 10$\n- $c(S, B) = 10$\n- $c(A, B) = 1$\n- $c(A, C) = 7$\n- $c(B, D) = 6$\n- $c(C, D) = 4$\n- $c(C, T) = 9$\n- $c(D, T) = 12$\n\nAn initial analysis using the Edmonds-Karp algorithm determined that the maximum flow (data rate) from $S$ to $T$ is 13 Tbps. The specific flow values, $f(u, v)$, on each link for this maximum flow are:\n- $f(S, A) = 7$\n- $f(S, B) = 6$\n- $f(A, C) = 7$\n- $f(B, D) = 6$\n- $f(C, T) = 7$\n- $f(D, T) = 6$\nFlow on all other links, such as $(A,B)$ and $(C,D)$, is 0.\n\nSuddenly, the primary link between servers $B$ and $D$ is physically damaged, and its capacity $c(B, D)$ catastrophically drops from 6 Tbps to 0 Tbps. To avoid re-running the entire resource-intensive max-flow computation from scratch, you are tasked to devise a more efficient method to determine the new maximum flow.\n\nWhat is the new maximum flow value from $S$ to $T$ after the capacity of link $(B,D)$ is reduced? Express your answer in Tbps.", "solution": "The problem asks for the new maximum flow after an edge capacity is reduced. Instead of re-running the entire Edmonds-Karp algorithm, we can find the new maximum flow by adjusting the existing one.\n\n**Step 1: Identify the Invalid Flow**\nThe initial maximum flow is 13 Tbps. This flow includes 6 Tbps along the path $S \\to B \\to D \\to T$, so $f(B, D) = 6$.\nThe capacity of the link $(B, D)$ is reduced from 6 to 0. The current flow of 6 on this link now violates its new capacity. This makes the path $S \\to B \\to D \\to T$ unusable for carrying these 6 units of flow.\n\n**Step 2: Adjust to a New Valid Flow**\nThe simplest way to create a valid flow is to remove the flow contributed by the now-broken path. The total flow was a combination of two paths:\n1.  $S \\to A \\to C \\to T$, carrying 7 Tbps.\n2.  $S \\to B \\to D \\to T$, carrying 6 Tbps.\n\nWe remove the 6 Tbps from the second path. The new, valid (but not necessarily maximal) flow, let's call it $f'$, is now just the 7 Tbps on the path $S \\to A \\to C \\to T$. The total value of this flow is $|f'| = 7$ Tbps.\n\n**Step 3: Check for New Augmenting Paths**\nThe current flow of 7 Tbps is valid. To determine if it is the *new maximum* flow, we must check if there are any augmenting paths from $S$ to $T$ in the new residual graph, $G_{f'}$.\n\nThe residual capacities for the new flow $f'$ (where $f'(S,A)=7, f'(A,C)=7, f'(C,T)=7$ and all other flows are 0) are:\n- **Forward residual capacities:**\n  $c_f(S, A) = 10-7=3$\n  $c_f(S, B) = 10-0=10$\n  $c_f(A, B) = 1-0=1$\n  $c_f(A, C) = 7-7=0$ (saturated)\n  $c_f(B, D) = 0-0=0$ (broken link)\n  $c_f(C, D) = 4-0=4$\n  $c_f(C, T) = 9-7=2$\n  $c_f(D, T) = 12-0=12$\n- **Backward residual capacities:**\n  $c_f(A, S) = 7$\n  $c_f(C, A) = 7$\n  $c_f(T, C) = 7$\n\nNow, let's search for a path from $S$ to $T$ using these residual capacities:\n- From $S$, we can reach $A$ (capacity 3) and $B$ (capacity 10).\n- Let's explore from $B$: The only outgoing link from $B$ is $(B,D)$, which has a residual capacity of 0. So, node $B$ is a dead end for any new flow from $S$.\n- Let's explore from $A$: From $A$, we can go to $B$ (capacity 1), but we just saw $B$ is a dead end. We cannot go to $C$ (capacity 0).\n- This means any path starting with $S \\to B$ or $S \\to A$ cannot reach the sink $T$.\n\nSince there is no augmenting path from $S$ to $T$ in the residual graph $G_{f'}$, the flow $f'$ is maximal.\n\n**Step 4: Conclusion**\nThe new maximum flow value is the value of the flow $f'$, which is 7 Tbps.\n$$ |f_{new}| = |f_{old}| - \\text{unroutable flow} = 13 - 6 = 7 \\text{ Tbps} $$\nThe reduction of 6 Tbps corresponds exactly to the flow that was using the link $(B,D)$ and could not be rerouted.", "answer": "$$\\boxed{7}$$", "id": "1540154"}]}
{"hands_on_practices": [{"introduction": "The first fundamental action in a particle filter is the prediction step, where we simulate how each hypothesis about the system's state evolves over time. This practice [@problem_id:1322969] brings this concept to life by modeling the motion of a falling probe. You will propagate a set of particles forward using basic kinematic equations, incorporating both the deterministic effect of gravity and the stochastic effect of process noise to predict the probe's state at the next time step.", "problem": "An aerospace engineering team is developing a state estimation algorithm for a small sensor probe designed to be dropped from a high-altitude balloon. They use a simulation technique involving multiple computational 'particles', where each particle represents a hypothesis for the probe's true state. The state of the probe is defined by its vertical position, $y$ (positive upwards), and its vertical velocity, $v_y$.\n\nAt time $t=0$, the system is initialized with a set of three particles. Their initial states $(y_0, v_{y,0})$ are given as:\n- Particle 1: $(100.0 \\, \\text{m}, 0.5 \\, \\text{m/s})$\n- Particle 2: $(100.5 \\, \\text{m}, -0.2 \\, \\text{m/s})$\n- Particle 3: $(99.8 \\, \\text{m}, 0.1 \\, \\text{m/s})$\n\nThe state of each particle is propagated forward in time using a discrete model that accounts for gravity and small, random perturbations. For a time step of $\\Delta t$, the state $(y_k, v_{y,k})$ at time step $k$ evolves to the state $(y_{k+1}, v_{y,k+1})$ at time step $k+1$ according to the following equations:\n$$y_{k+1} = y_k + v_{y,k} \\Delta t - \\frac{1}{2} g (\\Delta t)^2 + w_y$$\n$$v_{y,k+1} = v_{y,k} - g \\Delta t + w_v$$\nwhere $g$ is the acceleration due to gravity, and $w_y$ and $w_v$ are the random perturbations for that time step.\n\nFor the first time step from $t=0$ to $t=\\Delta t=0.1 \\, \\text{s}$, the team uses the constant $g = 9.81 \\, \\text{m/s}^2$. The specific perturbation values sampled for each particle during this step are:\n- For Particle 1: $(w_y, w_v) = (0.02 \\, \\text{m}, 0.05 \\, \\text{m/s})$\n- For Particle 2: $(w_y, w_v) = (-0.01 \\, \\text{m}, -0.03 \\, \\text{m/s})$\n- For Particle 3: $(w_y, w_v) = (0.03 \\, \\text{m}, 0.01 \\, \\text{m/s})$\n\nThe overall estimate of the probe's position at a given time is taken as the arithmetic mean of the positions of all particles. Calculate this mean vertical position at time $t = \\Delta t$. Express your final answer in meters, rounded to four significant figures.", "solution": "We propagate each particle’s vertical position over the interval $\\Delta t$ using\n$$\ny_{k+1}=y_{k}+v_{y,k}\\,\\Delta t-\\frac{1}{2}g\\,(\\Delta t)^{2}+w_{y}.\n$$\nFor this step, $\\Delta t=0.1\\,\\text{s}$ and $g=9.81\\,\\text{m/s}^{2}$. The gravitational displacement term common to all particles is\n$$\n\\frac{1}{2}g(\\Delta t)^{2}=\\frac{1}{2}\\cdot 9.81\\cdot (0.1)^{2}=0.04905\\,\\text{m}.\n$$\nThus, for each particle $j$, the update becomes\n$$\ny_{1}^{(j)}=y_{0}^{(j)}+v_{y,0}^{(j)}\\,(0.1)-0.04905+w_{y}^{(j)}.\n$$\nCompute each:\n$$\n\\begin{aligned}\n\\text{Particle 1:}\\quad y_{1}^{(1)}  =100.0+0.5\\cdot 0.1-0.04905+0.02=100.02095\\,\\text{m},\\\\\n\\text{Particle 2:}\\quad y_{1}^{(2)}  =100.5+(-0.2)\\cdot 0.1-0.04905-0.01=100.42095\\,\\text{m},\\\\\n\\text{Particle 3:}\\quad y_{1}^{(3)}  =99.8+0.1\\cdot 0.1-0.04905+0.03=99.79095\\,\\text{m}.\n\\end{aligned}\n$$\nThe arithmetic mean of the positions at $t=\\Delta t$ is\n$$\n\\bar{y}_{1}=\\frac{y_{1}^{(1)}+y_{1}^{(2)}+y_{1}^{(3)}}{3}=\\frac{100.02095+100.42095+99.79095}{3}=\\frac{300.23285}{3}=100.077616\\ldots\\,\\text{m}.\n$$\nRounding to four significant figures gives $100.1\\,\\text{m}$.", "answer": "$$\\boxed{100.1}$$", "id": "1322969"}, {"introduction": "After predicting the new states of our particles, we must weigh them according to how well they explain the latest sensor measurement, which generates a set of 'importance weights'. This exercise [@problem_id:1323002] hones in on a crucial computational detail: normalizing these weights. This step ensures they form a valid probability distribution, which is essential before proceeding to the resampling stage where particles with higher weights are more likely to be chosen.", "problem": "A mobile robot uses a particle filter to estimate its position within a warehouse. At a particular time step, after processing a sensor measurement, the filter evaluates five hypothetical positions, referred to as particles. Each particle is assigned an un-normalized importance weight that reflects how well that hypothetical position explains the sensor reading. The five particles, labeled 1 through 5, have the following un-normalized weights:\n- Particle 1: $w_1 = 0.42$\n- Particle 2: $w_2 = 0.91$\n- Particle 3: $w_3 = 0.15$\n- Particle 4: $w_4 = 0.68$\n- Particle 5: $w_5 = 0.34$\n\nTo proceed to the next step of the filter (resampling), these weights must be normalized so that they sum to 1. Calculate the normalized importance weight for each of the five particles. Present your final answer as a single row matrix containing the five normalized weights, in order from Particle 1 to Particle 5. Round each individual weight in your final answer to three significant figures.", "solution": "To normalize particle filter weights, divide each un-normalized weight by the sum of all weights so that the normalized weights sum to 1. Let $w_{i}$ be the given un-normalized weights and $\\tilde{w}_{i}$ the normalized weights. The normalization rule is\n$$\n\\tilde{w}_{i}=\\frac{w_{i}}{\\sum_{j=1}^{5} w_{j}}.\n$$\nFirst compute the sum of the un-normalized weights:\n$$\n\\sum_{j=1}^{5} w_{j}=0.42+0.91+0.15+0.68+0.34=2.50.\n$$\nNow compute each normalized weight:\n$$\n\\tilde{w}_{1}=\\frac{0.42}{2.50}=0.168,\\quad\n\\tilde{w}_{2}=\\frac{0.91}{2.50}=0.364,\\quad\n\\tilde{w}_{3}=\\frac{0.15}{2.50}=0.060,\\quad\n\\tilde{w}_{4}=\\frac{0.68}{2.50}=0.272,\\quad\n\\tilde{w}_{5}=\\frac{0.34}{2.50}=0.136.\n$$\nVerify they sum to 1:\n$$\n0.168+0.364+0.060+0.272+0.136=1.000.\n$$\nRounding each to three significant figures gives\n$$\n0.168,\\ 0.364,\\ 0.0600,\\ 0.272,\\ 0.136,\n$$\nwhere $0.0600$ is written with trailing zeros to indicate three significant figures. The final answer as a row matrix is:\n$$\n\\begin{pmatrix}\n0.168  0.364  0.0600  0.272  0.136\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}0.168  0.364  0.0600  0.272  0.136\\end{pmatrix}}$$", "id": "1323002"}, {"introduction": "Let's now integrate the prediction and update stages to execute a complete cycle of a particle filter and derive a final state estimate. This problem [@problem_id:1322990] challenges you to track a cart's position using a unique sensor that only reports which discrete zone the cart occupies. By predicting the particles' movement and then evaluating them against this quantized measurement, you will practice the core logic of the filter and see how it can flexibly handle various types of sensor data.", "problem": "A self-driving cart moves along a 1D track that spans from $x=0$ to $x=12$ meters. Its position is monitored using a set of five computational particles, which represent hypotheses about the cart's true position. The state of the cart is its 1D position, $x$.\n\nThe cart's motion is modeled by a simple random walk. The predicted position of a particle at time $t$ is given by its position at time $t-1$ plus a random displacement: $x_t^{(\\text{pred})} = x_{t-1} + v_t$. The initial positions of the five particles at time $t=0$ are:\n$x_0^{(1)} = 1.5$ m, $x_0^{(2)} = 3.5$ m, $x_0^{(3)} = 5.0$ m, $x_0^{(4)} = 7.5$ m, $x_0^{(5)} = 10.0$ m.\n\nFor the time step from $t=0$ to $t=1$, the specific random displacements experienced by each particle are given as:\n$v_0^{(1)} = +2.0$ m, $v_0^{(2)} = +1.2$ m, $v_0^{(3)} = -1.8$ m, $v_0^{(4)} = -2.5$ m, $v_0^{(5)} = -3.1$ m.\n\nThe track is equipped with a low-resolution zone sensor that reports which of four zones the cart occupies. The zones are defined as:\n- Zone 1: $0 \\text{ m} \\le x  3.0 \\text{ m}$\n- Zone 2: $3.0 \\text{ m} \\le x  6.0 \\text{ m}$\n- Zone 3: $6.0 \\text{ m} \\le x  9.0 \\text{ m}$\n- Zone 4: $9.0 \\text{ m} \\le x \\le 12.0 \\text{ m}$\n\nAt time $t=1$, the sensor makes a measurement and reports that the cart is in Zone 2.\n\nThe estimation algorithm updates the importance of each particle based on this measurement. A \"survival score\" is assigned to each predicted particle position $x_1^{(\\text{pred})}$. The score is 1 if the particle's position is consistent with the measurement (i.e., falls within the measured zone), and 0 otherwise. The final estimate of the cart's position, $\\hat{x}_1$, is the arithmetic mean of the positions of only those particles that received a non-zero survival score.\n\nCalculate the estimated position $\\hat{x}_1$ of the cart at time $t=1$. Express your answer in meters, rounded to three significant figures.", "solution": "The motion model is a random walk with prediction equation $x_{t}^{(\\text{pred})} = x_{t-1} + v_{t}$. For $t=1$, compute each particle’s predicted position:\n$$\n\\begin{aligned}\nx_{1}^{(\\text{pred},1)}  = x_{0}^{(1)} + v_{0}^{(1)} = 1.5 + 2.0 = 3.5,\\\\\nx_{1}^{(\\text{pred},2)}  = x_{0}^{(2)} + v_{0}^{(2)} = 3.5 + 1.2 = 4.7,\\\\\nx_{1}^{(\\text{pred},3)}  = x_{0}^{(3)} + v_{0}^{(3)} = 5.0 - 1.8 = 3.2,\\\\\nx_{1}^{(\\text{pred},4)}  = x_{0}^{(4)} + v_{0}^{(4)} = 7.5 - 2.5 = 5.0,\\\\\nx_{1}^{(\\text_pred},5)}  = x_{0}^{(5)} + v_{0}^{(5)} = 10.0 - 3.1 = 6.9.\n\\end{aligned}\n$$\nThe measurement indicates Zone 2, defined by $3.0 \\le x  6.0$. The particles consistent with this are those with $x_{1}^{(\\text{pred})} \\in [3.0, 6.0)$, namely $3.5$, $4.7$, $3.2$, and $5.0$. The survival scores are therefore $1$ for these four and $0$ for $6.9$.\n\nThe estimate is the arithmetic mean of the surviving predicted positions:\n$$\n\\hat{x}_{1} = \\frac{3.5 + 4.7 + 3.2 + 5.0}{4} = \\frac{16.4}{4} = 4.1.\n$$\nRounding to three significant figures gives $4.10$ meters.", "answer": "$$\\boxed{4.10}$$", "id": "1322990"}]}
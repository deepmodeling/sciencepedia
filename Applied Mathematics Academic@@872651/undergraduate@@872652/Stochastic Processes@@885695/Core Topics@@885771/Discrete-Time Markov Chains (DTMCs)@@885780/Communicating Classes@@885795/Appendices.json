{"hands_on_practices": [{"introduction": "To begin, let's explore the most intuitive representation of communicating classes using a graph. This practice models a random walk on a disconnected graph, providing a clear visual link between the concept of a communicating class and a connected component [@problem_id:1329629]. By analyzing the possible paths, you'll see how a state space naturally partitions into separate, self-contained sets.", "problem": "Consider a discrete-time Markov chain defined by a random walk on a finite, undirected graph $G$. The graph $G$ has a set of six vertices, labeled $V = \\{1, 2, 3, 4, 5, 6\\}$. The edges of the graph are such that they form two completely separate 3-vertex cycles (triangles). The first triangle connects vertices $\\{1, 2, 3\\}$, and the second triangle connects vertices $\\{4, 5, 6\\}$. There are no other edges in the graph.\n\nThe process starts at some vertex in $V$. At each time step, if the walk is at a given vertex, it moves to one of its adjacent neighbors. Each neighbor is chosen with equal probability. The state space of the Markov chain is the set of vertices $V$.\n\nWhich of the following options correctly describes the partition of the state space $V$ into communicating classes?\n\nA. $\\{\\{1, 2, 3, 4, 5, 6\\}\\}$\n\nB. $\\{\\{1, 2\\}, \\{3, 4\\}, \\{5, 6\\}\\}$\n\nC. $\\{\\{1, 2, 3\\}, \\{4, 5, 6\\}\\}$\n\nD. $\\{\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}, \\{5\\}, \\{6\\}\\}$\n\nE. $\\{\\{1, 4\\}, \\{2, 5\\}, \\{3, 6\\}\\}$", "solution": "The problem asks us to identify the communicating classes of a Markov chain defined on a graph. The state space of the chain is the set of vertices $S = V = \\{1, 2, 3, 4, 5, 6\\}$.\n\nFirst, let's recall the definitions related to communicating classes.\nTwo states $i$ and $j$ in a Markov chain are said to communicate, denoted $i \\leftrightarrow j$, if it is possible to go from state $i$ to state $j$ in a finite number of steps, and it is also possible to go from state $j$ to state $i$ in a finite number of steps.\nMathematically, $i \\leftrightarrow j$ if and only if state $j$ is accessible from state $i$ ($i \\to j$) and state $i$ is accessible from state $j$ ($j \\to i$).\nA state $j$ is accessible from $i$ if the probability of reaching $j$ starting from $i$ in some number of steps $n \\ge 0$ is greater than zero. For a random walk on an unweighted graph, this is equivalent to the existence of a path of vertices and edges from vertex $i$ to vertex $j$.\n\nCommunication is an equivalence relation, which means it is reflexive ($i \\leftrightarrow i$), symmetric ($i \\leftrightarrow j \\implies j \\leftrightarrow i$), and transitive ($i \\leftrightarrow j$ and $j \\leftrightarrow k \\implies i \\leftrightarrow k$). This relation partitions the state space into disjoint equivalence classes, which are called communicating classes.\n\nLet's analyze the structure of the graph $G$. It consists of two disconnected components.\nComponent 1: A triangle with vertices $\\{1, 2, 3\\}$. The edges are $(1, 2)$, $(2, 3)$, and $(3, 1)$.\nComponent 2: A triangle with vertices $\\{4, 5, 6\\}$. The edges are $(4, 5)$, $(5, 6)$, and $(6, 4)$.\nThere are no edges connecting any vertex from $\\{1, 2, 3\\}$ to any vertex in $\\{4, 5, 6\\}$.\n\nA random walk can only move between adjacent vertices. Therefore, for state $j$ to be accessible from state $i$, there must be a path connecting vertex $i$ and vertex $j$ in the graph.\n\nLet's consider the first component, vertices $\\{1, 2, 3\\}$.\n- Is state 2 accessible from state 1 ($1 \\to 2$)? Yes, there is an edge from 1 to 2. The transition probability $p_{12} > 0$.\n- Is state 1 accessible from state 2 ($2 \\to 1$)? Yes, there is an edge from 2 to 1. The transition probability $p_{21} > 0$.\nSince $1 \\to 2$ and $2 \\to 1$, we have $1 \\leftrightarrow 2$.\n- Similarly, for states 2 and 3, there is an edge $(2, 3)$, so $2 \\to 3$ and $3 \\to 2$. Thus, $2 \\leftrightarrow 3$.\n- For states 1 and 3, there is an edge $(1, 3)$, so $1 \\to 3$ and $3 \\to 1$. Thus, $1 \\leftrightarrow 3$.\nBy the transitivity of the communication relation (since $1 \\leftrightarrow 2$ and $2 \\leftrightarrow 3$, then $1 \\leftrightarrow 3$), all vertices in the set $\\{1, 2, 3\\}$ communicate with each other. Therefore, $\\{1, 2, 3\\}$ forms a single communicating class.\n\nNow, let's consider the second component, vertices $\\{4, 5, 6\\}$.\n- Using the same logic as above, the existence of edges $(4, 5)$, $(5, 6)$, and $(6, 4)$ means that all vertices within this set are mutually accessible.\n- $4 \\leftrightarrow 5$, $5 \\leftrightarrow 6$, and $6 \\leftrightarrow 4$.\n- Therefore, all vertices in the set $\\{4, 5, 6\\}$ communicate with each other, forming another single communicating class.\n\nFinally, let's consider a state from the first component and a state from the second component, for example, state 1 and state 4.\n- Is state 4 accessible from state 1 ($1 \\to 4$)? For the walk to go from vertex 1 to vertex 4, there must be a path of edges in the graph connecting them. By the problem description, the two triangles are disjoint, meaning there are no edges between the set $\\{1, 2, 3\\}$ and the set $\\{4, 5, 6\\}$.\n- Therefore, there is no path from 1 to 4. The probability of ever reaching state 4 starting from state 1 is zero. So, $1 \\not\\to 4$.\n- Since accessibility is not bidirectional, states 1 and 4 do not communicate. The same logic applies to any pair of vertices $(i, j)$ where $i \\in \\{1, 2, 3\\}$ and $j \\in \\{4, 5, 6\\}$.\n\nIn conclusion, the state space $S = \\{1, 2, 3, 4, 5, 6\\}$ is partitioned into two communicating classes: $C_1 = \\{1, 2, 3\\}$ and $C_2 = \\{4, 5, 6\\}$. The set of all communicating classes is $\\{\\{1, 2, 3\\}, \\{4, 5, 6\\}\\}$.\n\nComparing this result with the given options:\nA. $\\{\\{1, 2, 3, 4, 5, 6\\}\\}$ - Incorrect. This would imply the graph is connected.\nB. $\\{\\{1, 2\\}, \\{3, 4\\}, \\{5, 6\\}\\}$ - Incorrect.\nC. $\\{\\{1, 2, 3\\}, \\{4, 5, 6\\}\\}$ - Correct.\nD. $\\{\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}, \\{5\\}, \\{6\\}\\}$ - Incorrect. This would imply no state communicates with any other state, which is false.\nE. $\\{\\{1, 4\\}, \\{2, 5\\}, \\{3, 6\\}\\}$ - Incorrect. This mixes vertices from the two disconnected components.", "answer": "$$\\boxed{C}$$", "id": "1329629"}, {"introduction": "Building on the graph-based intuition, this next exercise introduces a scenario where transitions are not necessarily symmetric. By modeling the movements of a programmable elevator, you will need to carefully apply the definition of communication, which requires reachability in both directions [@problem_id:1289775]. This problem highlights how directed transitions can create more complex class structures, including classes from which escape is possible but re-entry is not.", "problem": "An elevator in a four-story building operates according to a fixed probabilistic program. The state of the system is the discrete floor number where the elevator is currently stopped, with the state space being $S = \\{1, 2, 3, 4\\}$. The transition rules for the elevator's next stop are defined as follows:\n\n- If the elevator is at Floor 1, its next stop is always Floor 3.\n- If the elevator is at Floor 2, its next stop is Floor 1 with a probability of 0.5, or Floor 4 with a probability of 0.5.\n- If the elevator is at Floor 3, its next stop is always Floor 1.\n- If the elevator is at Floor 4, its next stop is always Floor 2.\n\nThis system can be modeled as a Markov chain where the states are the floor numbers. Identify all the communicating classes for this Markov chain.\n\nA. $\\{1, 2, 3, 4\\}$\n\nB. $\\{1, 3\\}$ and $\\{2, 4\\}$\n\nC. $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$\n\nD. $\\{1, 2\\}$ and $\\{3, 4\\}$\n\nE. $\\{1, 2, 3\\}$ and $\\{4\\}$", "solution": "We model the system as a Markov chain on $S=\\{1,2,3,4\\}$ with transition probabilities determined by the rules:\n- From $1$: next is $3$ with probability $1$.\n- From $2$: next is $1$ with probability $\\frac{1}{2}$, and $4$ with probability $\\frac{1}{2}$.\n- From $3$: next is $1$ with probability $1$.\n- From $4$: next is $2$ with probability $1$.\n\nLet $P$ be the transition matrix in the state order $(1,2,3,4)$:\n$$\nP=\\begin{pmatrix}\n0 & 0 & 1 & 0\\\\\n\\frac{1}{2} & 0 & 0 & \\frac{1}{2}\\\\\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\n\\end{pmatrix}.\n$$\nTwo states $i,j$ communicate, written $i\\leftrightarrow j$, if there exist nonnegative integers $m,n$ such that $P^{m}(i,j)>0$ and $P^{n}(j,i)>0$. The communicating classes are the equivalence classes under $\\leftrightarrow$.\n\nFirst, analyze reachability from $1$ and $3$. Since $1\\to 3$ with probability $1$ and $3\\to 1$ with probability $1$, the chain alternates between $1$ and $3$. By induction on $n$, for all $n\\ge 0$,\n$$\nP^{n}(1,1)=\\begin{cases}1,& n \\text{ even}\\\\ 0,& n \\text{ odd}\\end{cases},\\quad\nP^{n}(1,3)=\\begin{cases}0,& n \\text{ even}\\\\ 1,& n \\text{ odd}\\end{cases},\n$$\nand $P^{n}(1,2)=P^{n}(1,4)=0$ for all $n$. Similarly, starting from $3$,\n$$\nP^{n}(3,1)=\\begin{cases}1,& n \\text{ odd}\\\\ 0,& n \\text{ even}\\end{cases},\\quad\nP^{n}(3,3)=\\begin{cases}1,& n \\text{ even}\\\\ 0,& n \\text{ odd}\\end{cases},\n$$\nand $P^{n}(3,2)=P^{n}(3,4)=0$ for all $n$. Therefore $1\\leftrightarrow 3$, and neither $1$ nor $3$ can reach $2$ or $4$, so they do not communicate with $2$ or $4$.\n\nNext, analyze $2$ and $4$. We have $P(2,4)=\\frac{1}{2}>0$ and $P(4,2)=1>0$, hence $2\\leftrightarrow 4$. Additionally, $2\\to 1$ in one step with probability $\\frac{1}{2}$ and $4\\to 1$ in two steps via $4\\to 2\\to 1$ with positive probability, but there is no path from $1$ (or $3$) back to $2$ or $4$ as shown above. Thus $2$ and $4$ do not communicate with $1$ or $3$.\n\nTherefore, the communicating classes are $\\{1,3\\}$ and $\\{2,4\\}$, which corresponds to option B.", "answer": "$$\\boxed{B}$$", "id": "1289775"}, {"introduction": "Our final practice scales up to a large, abstract state space representing a system of interconnected components. Directly mapping all possible paths is impractical here, so a more elegant approach is needed. This problem will guide you to discover an \"invariant\"—a property of the state that remains unchanged by any transition—which provides a powerful method for partitioning the entire state space into its fundamental communicating classes [@problem_id:714681].", "problem": "Consider a system of $N$ interconnected two-state components, where $N \\ge 2$ is an integer. The state of the system is described by a binary vector $s = (s_1, s_2, \\dots, s_N) \\in \\{0, 1\\}^N$, where $s_i$ is the state of the $i$-th component. The system evolves in discrete time steps according to a stochastic process.\n\nAt each time step, a pair of distinct components $\\{i, j\\}$ with $1 \\le i < j \\le N$ is chosen uniformly at random from all possible pairs. The states of these two chosen components, $s_i$ and $s_j$, are then flipped (i.e., $s_i \\to 1-s_i$ and $s_j \\to 1-s_j$). This process defines a time-homogeneous Markov chain on the state space $S = \\{0, 1\\}^N$.\n\nA communicating class of a Markov chain is a maximal set of states such that for any two states $u, v$ in the set, $v$ is reachable from $u$ and $u$ is reachable from $v$.\n\nDetermine the total number of communicating classes for this Markov chain.", "solution": "1. The Markov chain transitions by flipping exactly two bits, so any transition from state $s$ to $s'$ satisfies\n$d_H(s,s')=2,$\nwhere $d_H$ is the Hamming distance.\n\n2. Flipping two bits changes the total number of ones by an even integer. Thus the parity\n$$\\sum_{i=1}^N s_i\\pmod{2}$$\nis invariant under all transitions.\n\n3. Hence the state space $\\{0,1\\}^N$ splits into two disjoint subsets:\n   - Even parity: states with $\\sum_i s_i\\equiv0\\pmod2$,\n   - Odd parity: states with $\\sum_i s_i\\equiv1\\pmod2$.\n\n4. Each subset is connected under pairwise bit-flips:\n   - From any even-parity state one can successively flip pairs of 1’s to reach the all-zero state.\n   - From any odd-parity state one can reduce to weight-1 by flipping pairs of 1’s, then move among weight-1 states by flipping the unique 1 and a 0.\n\n5. Therefore there are exactly two communicating classes.", "answer": "$$\\boxed{2}$$", "id": "714681"}]}